var __webpack_modules__ = {
  "./src/musicplayer/index.ts": 
  /*!**********************************!*\
  !*** ./src/musicplayer/index.ts ***!
  \**********************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZodPersistedState: () => (/* binding */ ZodPersistedState),\n/* harmony export */   ZodPlaylistConfig: () => (/* binding */ ZodPlaylistConfig),\n/* harmony export */   ZodQueueItemState: () => (/* binding */ ZodQueueItemState),\n/* harmony export */   ZodSingleCondition: () => (/* binding */ ZodSingleCondition),\n/* harmony export */   ZodTrackConfig: () => (/* binding */ ZodTrackConfig),\n/* harmony export */   ZodTriggerConfig: () => (/* binding */ ZodTriggerConfig),\n/* harmony export */   ZodWorldbookConfig: () => (/* binding */ ZodWorldbookConfig)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(zod__WEBPACK_IMPORTED_MODULE_0__);\nconsole.log('音乐播放器脚本8.3.4版本');\n// =================================================================\n// 0. 诊断工具 (Diagnostic Tools)\n// =================================================================\n\nconst SCRIPT_LOAD_TIME = performance.now();\nfunction logProbe(message, type = 'log') {\n    const timestamp = `(T+${(performance.now() - SCRIPT_LOAD_TIME).toFixed(0)}ms)`;\n    const finalMessage = `${timestamp} ${message}`;\n    switch (type) {\n        case 'warn':\n            console.warn(finalMessage);\n            break;\n        case 'error':\n            console.error(finalMessage);\n            break;\n        case 'group':\n            console.group(finalMessage);\n            break;\n        case 'groupCollapsed':\n            console.groupCollapsed(finalMessage);\n            break;\n        case 'groupEnd':\n            console.groupEnd();\n            break;\n        default:\n            console.log(finalMessage);\n    }\n}\n// =================================================================\n// 1.1. Zod 边界防御 Schemas (Zod Border Defense Schemas)\n// -----------------------------------------------------------------\n// 探针: 这些 schemas 不仅仅是类型，它们是主动的验证器，是我们系统的第一道防线。\n//       每一个 `required_error` 和 `message` 都是一个内置的探针，当外部数据\n//       不符合我们的“法律”时，它们会自动报告错误。\n// 原则: 单一事实来源 (SSoT) - 关于外部数据应该长什么样的“真相”，只由这里定义。\n// =================================================================\n// 世界书音轨配置 Schema\nconst ZodTrackConfig = zod__WEBPACK_IMPORTED_MODULE_0__.z\n    .object({\n    歌名: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    歌手: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    封面: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url({ message: '封面URL格式无效' }).optional(),\n    url: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url({ message: '音轨URL格式无效' }),\n})\n    .strict();\n// 定义一个“单一条件”\nconst ZodSingleCondition = zod__WEBPACK_IMPORTED_MODULE_0__.z\n    .object({\n    variable_path: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    greater_than: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    greater_than_or_equal_to: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    less_than: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    less_than_or_equal_to: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.union([zod__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()]).optional(),\n    value_contains: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    time_in_range: zod__WEBPACK_IMPORTED_MODULE_0__.z\n        .string()\n        .regex(/^\\d{2}:\\d{2}-\\d{2}:\\d{2}$/, {\n        message: '时间范围格式必须是 \"HH:MM-HH:MM\"',\n    })\n        .optional(),\n})\n    .strict();\n// 主触发器 Schema 引用“单一条件”的数组\nconst ZodTriggerConfig = zod__WEBPACK_IMPORTED_MODULE_0__.z\n    .object({\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal('mvu_variable'),\n    playlist_id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    priority: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().default(0),\n    conditions: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ZodSingleCondition).nonempty({ message: '触发器必须至少包含一个条件' }),\n})\n    .strict();\n// 世界书歌单配置 Schema\nconst ZodPlaylistConfig = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    onFinishRule: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(['loop', 'pop'], { message: \"onFinishRule 必须是 'loop' 或 'pop'\" }).default('loop'),\n    tracks: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ZodTrackConfig).nonempty({ message: \"歌单的 'tracks' 列表不能为空\" }),\n});\n// 世界书总配置 Schema (这是我们将使用的顶级验证器)\nconst ZodWorldbookConfig = zod__WEBPACK_IMPORTED_MODULE_0__.z\n    .object({\n    default_playlist_id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    playlists: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ZodPlaylistConfig).optional(),\n    triggers: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ZodTriggerConfig).optional(),\n})\n    .strict();\n// 持久化状态 - 队列项 Schema\nconst ZodQueueItemState = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    playlistId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    currentIndex: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().default(0),\n    playedIndices: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.number()).default([]),\n    wasEverPlayed: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().default(false),\n    triggerSource: ZodTriggerConfig.optional(),\n});\n// 持久化状态 - 总 Schema\nconst ZodPersistedState = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    active_queue: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ZodQueueItemState),\n    mode: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(['list', 'single', 'random']).default('list'),\n    volume: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(0).max(1).default(0.5),\n    last_active_swipe_id: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().nullable().default(null),\n    finished_base_playlists: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).default([]),\n    previousMvuState: zod__WEBPACK_IMPORTED_MODULE_0__.z.record(zod__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod__WEBPACK_IMPORTED_MODULE_0__.z.any()).optional(),\n});\nconst STATE_KEY_MVU_HISTORY = '灰烬双星_MVU状态记忆';\n/**\n * [工具函数] 将多种格式的时间字符串解析为从午夜开始的分钟数。\n * 它的职责单一，且对输入格式有很强的容错能力。\n * @param timeStr - 例如 \"14:30\", \"8时5分\", \"22 : 00\"\n * @returns {number | null} 转换后的分钟数，或在无法解析时返回 null。\n */\nfunction _parseTimeToMinutes(timeStr) {\n    // 探针: 记录传入的原始值，便于调试\n    if (!timeStr || typeof timeStr !== 'string')\n        return null;\n    // 步骤1: 归一化输入，处理常见变体 (已修正 let -> const 和 replace 语法)\n    const cleanStr = timeStr.trim().replace('：', ':');\n    let match;\n    // 步骤2: 尝试匹配 \"HH:MM\" 格式 (最常见)\n    match = cleanStr.match(/^(\\d{1,2})\\s*:\\s*(\\d{1,2})$/);\n    if (match) {\n        const hours = parseInt(match[1], 10);\n        const minutes = parseInt(match[2], 10);\n        // 严格校验数值范围\n        if (hours >= 0 && hours < 24 && minutes >= 0 && minutes < 60) {\n            return hours * 60 + minutes;\n        }\n    }\n    // 步骤3: 尝试匹配 \"H时M分\" 格式\n    match = cleanStr.match(/^(\\d{1,2})\\s*时\\s*(\\d{1,2})\\s*分?$/);\n    if (match) {\n        const hours = parseInt(match[1], 10);\n        const minutes = parseInt(match[2], 10);\n        if (hours >= 0 && hours < 24 && minutes >= 0 && minutes < 60) {\n            return hours * 60 + minutes;\n        }\n    }\n    // 探针: 如果所有格式都匹配失败，记录下来\n    logProbe(`[TimeParser] 无法解析时间字符串: \"${timeStr}\"`, 'warn');\n    // [新增] 修复“缺少 return”的逻辑漏洞\n    return null;\n}\n// =================================================================\n// 2. MVU 管理器 (The MvuManager - \"The Analyst\")\n// =================================================================\nconst MvuManager = (() => {\n    logProbe('[MvuManager] 模块正在初始化...');\n    let _previousMvuState = {};\n    /**\n     * [核心算法 V2.1] 检查一个给定的 stat_data 是否满足一个触发器的所有条件。\n     * 新版已加固，支持多种匹配模式和 AND 条件组合，且代码风格已优化。\n     */\n    function _checkTriggerCondition(trigger, statData) {\n        if (!statData)\n            return false;\n        // 遍历所有 AND 条件。只要有一个不满足，整个触发器就失败。\n        for (const condition of trigger.conditions) {\n            const currentValue = _.get(statData, condition.variable_path);\n            let conditionMet = false; // 当前条件是否满足\n            let isHandled = false; // 当前条件是否被任何一个匹配模式处理过\n            // 使用 if / else if 链条，确保每个条件项只采用一种匹配模式\n            if (condition.value_contains !== undefined) {\n                isHandled = true;\n                // [安全加固] 必须检查 currentValue 是字符串，否则 .includes() 会导致崩溃\n                if (typeof currentValue === 'string' && currentValue.includes(condition.value_contains)) {\n                    conditionMet = true;\n                }\n            }\n            else if (condition.time_in_range !== undefined) {\n                isHandled = true;\n                // [安全加固] 同样检查类型\n                if (typeof currentValue === 'string') {\n                    const currentTimeInMinutes = _parseTimeToMinutes(currentValue);\n                    if (currentTimeInMinutes !== null) {\n                        const [startStr, endStr] = condition.time_in_range.split('-');\n                        const startMinutes = _parseTimeToMinutes(startStr);\n                        const endMinutes = _parseTimeToMinutes(endStr);\n                        if (startMinutes !== null && endMinutes !== null) {\n                            // [代码风格修正] 移除不必要的嵌套 if，使代码更简洁\n                            if (startMinutes <= endMinutes) {\n                                // 普通范围\n                                conditionMet = currentTimeInMinutes >= startMinutes && currentTimeInMinutes <= endMinutes;\n                            }\n                            else {\n                                // 跨天范围\n                                conditionMet = currentTimeInMinutes >= startMinutes || currentTimeInMinutes <= endMinutes;\n                            }\n                        }\n                    }\n                }\n            }\n            else if (condition.value !== undefined) {\n                isHandled = true;\n                if (currentValue === condition.value) {\n                    conditionMet = true;\n                }\n            }\n            else if (condition.greater_than !== undefined) {\n                isHandled = true;\n                if (typeof currentValue === 'number' && currentValue > condition.greater_than) {\n                    conditionMet = true;\n                }\n            }\n            else if (condition.greater_than_or_equal_to !== undefined) {\n                isHandled = true;\n                if (typeof currentValue === 'number' && currentValue >= condition.greater_than_or_equal_to) {\n                    conditionMet = true;\n                }\n            }\n            else if (condition.less_than !== undefined) {\n                isHandled = true;\n                if (typeof currentValue === 'number' && currentValue < condition.less_than) {\n                    conditionMet = true;\n                }\n            }\n            else if (condition.less_than_or_equal_to !== undefined) {\n                isHandled = true;\n                if (typeof currentValue === 'number' && currentValue <= condition.less_than_or_equal_to) {\n                    conditionMet = true;\n                }\n            }\n            // [最终裁决] 如果这是一个空条件 (isHandled=false)，或条件不满足，则立即失败\n            if (!isHandled || !conditionMet) {\n                return false;\n            }\n        }\n        // 如果循环正常结束，说明所有 AND 条件都满足\n        return true;\n    }\n    // --- 公共接口 ---\n    const publicAPI = {\n        checkTriggerCondition: _checkTriggerCondition,\n        /**\n         * [生命周期] 从酒馆变量中读取并恢复上一次的 MVU 状态。\n         */\n        initialize() {\n            logProbe('[MvuManager] (Lifecycle) 执行 initialize...');\n            try {\n                const savedState = getVariables({ type: 'chat' })[STATE_KEY_MVU_HISTORY];\n                if (savedState && typeof savedState === 'object') {\n                    _previousMvuState = savedState;\n                    logProbe('[MvuManager] 成功从存档中恢复了 MVU 历史状态。');\n                }\n                else {\n                    _previousMvuState = {};\n                    logProbe('[MvuManager] 未发现有效的 MVU 历史存档，已初始化为空状态。', 'warn');\n                }\n            }\n            catch (error) {\n                logProbe(`[MvuManager] 初始化时读取存档失败: ${error}`, 'error');\n                _previousMvuState = {};\n            }\n        },\n        resetState() {\n            logProbe('[MvuManager] (Lifecycle) 正在重置模块内部状态...');\n            _previousMvuState = {};\n            logProbe('[MvuManager] 模块状态已重置。');\n        },\n        /**\n         * [命令] 将当前的 MVU 状态持久化到酒馆变量中。\n         * @param currentStateData - 最新的 stat_data 对象。\n         */\n        async persistCurrentState(currentStateData) {\n            if (!isScriptActive) {\n                logProbe('[MvuManager] 持久化操作被阻止，因为脚本正在停机。', 'warn');\n                return;\n            }\n            logProbe('[MvuManager] (Command) 执行 persistCurrentState...');\n            _previousMvuState = _.cloneDeep(currentStateData);\n            try {\n                await updateVariablesWith(vars => {\n                    vars[STATE_KEY_MVU_HISTORY] = _previousMvuState;\n                    return vars;\n                }, { type: 'chat' });\n                logProbe('[MvuManager] 已成功将当前 MVU 状态持久化。');\n            }\n            catch (error) {\n                logProbe(`[MvuManager] 持久化 MVU 状态时发生严重错误: ${error}`, 'error');\n            }\n        },\n        /**\n         * [查询] 获取内存中存储的上一次的 MVU 状态。\n         */\n        getPreviousState: () => _.cloneDeep(_previousMvuState),\n        /**\n         * [核心查询] 计算新旧状态之间的“边沿变化”。\n         * @param previousStateData - 上一次的 stat_data。\n         * @param currentStateData - 最新的 stat_data。\n         * @param allTriggers - 从世界书解析出的所有有效触发器。\n         * @returns 报告对象，包含新激活和新失效的触发器列表。\n         */\n        calculateChangeReport(previousStateData, currentStateData, allTriggers) {\n            const report = { newlyActiveTriggers: [], newlyInactiveTriggers: [] };\n            logProbe('[MvuManager] (Query) 正在计算状态变化报告 (\"边沿检测\")...', 'group');\n            logProbe('[Probe] 正在审查用于对比的新旧状态数据:');\n            console.log('上一份历史记忆 (previousStateData):');\n            console.dir(_.cloneDeep(previousStateData));\n            console.log('当前权威状态 (currentStateData):');\n            console.dir(_.cloneDeep(currentStateData));\n            // =======================================================\n            for (const trigger of allTriggers) {\n                const wasMet = _checkTriggerCondition(trigger, previousStateData);\n                const isMet = _checkTriggerCondition(trigger, currentStateData);\n                if (!wasMet && isMet) {\n                    logProbe(`(探針) 新激活的触发器 -> playlist: \"${trigger.playlist_id}\"`);\n                    report.newlyActiveTriggers.push(trigger);\n                }\n                else if (wasMet && !isMet) {\n                    logProbe(`(探針) 新失效的触发器 -> playlist: \"${trigger.playlist_id}\"`);\n                    report.newlyInactiveTriggers.push(trigger);\n                }\n            }\n            logProbe(`报告生成完毕: ${report.newlyActiveTriggers.length} 个新激活, ${report.newlyInactiveTriggers.length} 个新失效。`);\n            logProbe('', 'groupEnd');\n            return report;\n        },\n    };\n    logProbe('[MvuManager] 模块初始化完成。');\n    return publicAPI;\n})();\n// =================================================================\n// 2. 状态管理器 (The State Manager) - [V2.0 重构版]\n// =================================================================\nconst StateManager = (() => {\n    logProbe('[StateManager] 模块正在初始化 (优先级队列内核)...');\n    // -------------------\n    // 2.1. 私有状态 (Private State)\n    // -------------------\n    // [重构] 核心数据结构变更为优先级队列\n    let _activePlaylistQueue = [];\n    let _lastActiveSwipeId = null;\n    let _finishedBasePlaylists = new Set();\n    let _playbackMode = 'list';\n    let _masterVolume = 0.5;\n    let _playbackState = 'STOPPED';\n    let _isPerformingEffect = false;\n    // -------------------\n    // 2.2. 私有核心算法 (Private Core Algorithms)\n    // -------------------\n    function _applyDepartureIsHistoryPrinciple(item, departingIndex) {\n        if (typeof departingIndex !== 'number' || departingIndex < 0)\n            return;\n        item.playedIndices.add(departingIndex);\n    }\n    // -------------------\n    // 2.3. 公共接口 (Public API)\n    // -------------------\n    const publicAPI = {\n        // --- 基础状态查询 ---\n        getPlaybackMode: () => _playbackMode,\n        getVolume: () => _masterVolume,\n        // [兼容性] 旧接口，仅当状态明确为 PLAYING 时返回 true\n        isPlaying: () => _playbackState === 'PLAYING',\n        getPlaybackState: () => _playbackState,\n        isPerformingEffect: () => _isPerformingEffect,\n        // --- [重构] 队列核心查询 ---\n        /**\n         * 获取当前优先级最高的歌单项（队首）。\n         * 这是系统唯一的事实来源：当前应该播放什么。\n         */\n        getTopQueueItem: () => _.cloneDeep(_activePlaylistQueue[0]),\n        /**\n         * 获取整个队列的副本（用于调试或决策分析）。\n         */\n        getQueue: () => _.cloneDeep(_activePlaylistQueue),\n        // --- 状态快照 ---\n        getStateSnapshotForRuntime: () => {\n            return _.cloneDeep({\n                active_queue: _activePlaylistQueue,\n                mode: _playbackMode,\n                volume: _masterVolume,\n                // [兼容性] 同时提供布尔值和枚举值\n                isPlaying: _playbackState === 'PLAYING',\n                playbackState: _playbackState,\n                isPerformingEffect: _isPerformingEffect,\n            });\n        },\n        getStateSnapshotForPersistence() {\n            const runtimeQueue = _.cloneDeep(_activePlaylistQueue);\n            const persistentQueue = runtimeQueue.map(item => {\n                const persistedItem = _.omit(item, ['playbackPlan', 'planIndex', 'playlistContent']);\n                return {\n                    ...persistedItem,\n                    // 将 Set 转换为 Array 以便 JSON 序列化\n                    playedIndices: Array.from(item.playedIndices),\n                };\n            });\n            return {\n                active_queue: persistentQueue,\n                mode: _playbackMode,\n                volume: _masterVolume,\n                last_active_swipe_id: _lastActiveSwipeId,\n                finished_base_playlists: Array.from(_finishedBasePlaylists),\n            };\n        },\n        // --- 生命周期管理 ---\n        resetState() {\n            logProbe('[StateManager] 正在硬性重置所有状态...', 'warn');\n            _activePlaylistQueue = [];\n            _playbackMode = 'list';\n            _masterVolume = 0.5;\n            _playbackState = 'STOPPED';\n            _isPerformingEffect = false;\n            _lastActiveSwipeId = null;\n            _finishedBasePlaylists.clear();\n        },\n        loadState(stateToLoad) {\n            logProbe('[StateManager] 正在加载状态...', 'group');\n            _playbackMode = stateToLoad.mode;\n            _masterVolume = stateToLoad.volume;\n            _activePlaylistQueue = stateToLoad.active_queue || [];\n            _lastActiveSwipeId = stateToLoad.last_active_swipe_id ?? null;\n            _finishedBasePlaylists = new Set(stateToLoad.finished_base_playlists || []);\n            logProbe(`(探针) 记忆加载完成: 上次SwipeID=${_lastActiveSwipeId}, 已完结基础歌单数=${_finishedBasePlaylists.size}`);\n            logProbe(`状态加载完成. 队列深度: ${_activePlaylistQueue.length}, 模式: ${_playbackMode}, 音量: ${_masterVolume}`);\n            logProbe('', 'groupEnd');\n        },\n        // --- 基础状态设置 ---\n        setPlaybackMode: (mode) => {\n            _playbackMode = mode;\n        },\n        setVolume: (volume) => {\n            _masterVolume = volume;\n        },\n        setPlaybackState: (newState) => {\n            // [探针] 状态变更日志，帮助我们追踪每一次状态跳变\n            if (_playbackState !== newState) {\n                logProbe(`[StateManager] 状态流转: ${_playbackState} -> ${newState}`);\n            }\n            _playbackState = newState;\n        },\n        setPerformingEffect: (isPerforming) => {\n            _isPerformingEffect = isPerforming;\n        },\n        getLastActiveSwipeId: () => _lastActiveSwipeId,\n        setLastActiveSwipeId: (id) => {\n            _lastActiveSwipeId = id;\n        },\n        getFinishedBasePlaylists: () => new Set(_finishedBasePlaylists),\n        addToFinishedBasePlaylists: (playlistId) => {\n            logProbe(`[StateManager]将基础歌单 \"${playlistId}\" 刻入已完成列表。`);\n            _finishedBasePlaylists.add(playlistId);\n        },\n        clearFinishedBasePlaylists: () => {\n            logProbe(`[StateManager]清空记录。`);\n            _finishedBasePlaylists.clear();\n        },\n        // --- [重构] 队列核心操作 ---\n        /**\n         * [核心] 更新整个队列。\n         * 此方法会自动按优先级降序排列队列，确保 _activePlaylistQueue[0] 永远是优先级最高的。\n         */\n        updateQueue(newQueue) {\n            logProbe(`[StateManager] (Command) updateQueue: 正在更新并重排序队列 (共 ${newQueue.length} 项)...`);\n            _activePlaylistQueue = _.cloneDeep(newQueue).sort((a, b) => b.priority - a.priority);\n            if (_activePlaylistQueue.length > 0) {\n                logProbe(`(探针) 新队首: \"${_activePlaylistQueue[0].playlistId}\" (优先级: ${_activePlaylistQueue[0].priority})`);\n            }\n            else {\n                logProbe(`(探针) 队列现已为空。`);\n            }\n        },\n        // --- 当前项操作 (作用于队首) ---\n        setCurrentIndex(index) {\n            const currentItem = _activePlaylistQueue[0];\n            if (currentItem) {\n                _applyDepartureIsHistoryPrinciple(currentItem, currentItem.currentIndex);\n                currentItem.currentIndex = index;\n            }\n        },\n        commitNavigationStep(newTrackIndex) {\n            const currentItem = _activePlaylistQueue[0];\n            if (!currentItem)\n                return;\n            _applyDepartureIsHistoryPrinciple(currentItem, currentItem.currentIndex);\n            if (_playbackMode === 'random' && currentItem.playbackPlan) {\n                const newPlanIndex = currentItem.playbackPlan.indexOf(newTrackIndex);\n                if (newPlanIndex !== -1) {\n                    currentItem.planIndex = newPlanIndex;\n                }\n            }\n            currentItem.currentIndex = newTrackIndex;\n        },\n        clearHistoryForCurrentItem() {\n            const currentItem = _activePlaylistQueue[0];\n            if (currentItem)\n                currentItem.playedIndices.clear();\n        },\n        resetCurrentItemForLoop() {\n            const currentItem = _activePlaylistQueue[0];\n            if (currentItem) {\n                currentItem.playedIndices.clear();\n                currentItem.currentIndex = 0;\n            }\n        },\n        commitGenesisState(newCurrentIndex, newPlaybackPlan, newPlanIndex) {\n            const currentItem = _activePlaylistQueue[0];\n            if (currentItem) {\n                currentItem.currentIndex = newCurrentIndex;\n                currentItem.playbackPlan = newPlaybackPlan;\n                currentItem.planIndex = newPlanIndex;\n            }\n        },\n        userInitiatedJump(trackIndex) {\n            const currentItem = _activePlaylistQueue[0];\n            if (!currentItem || trackIndex === currentItem.currentIndex)\n                return;\n            _applyDepartureIsHistoryPrinciple(currentItem, currentItem.currentIndex);\n            currentItem.currentIndex = trackIndex;\n            if (this.getPlaybackMode() === 'random' && currentItem.playbackPlan) {\n                const newPlanIndex = currentItem.playbackPlan.indexOf(trackIndex);\n                if (newPlanIndex !== -1)\n                    currentItem.planIndex = newPlanIndex;\n            }\n        },\n        clearRandomModePlan() {\n            const currentItem = _activePlaylistQueue[0];\n            if (currentItem) {\n                currentItem.playbackPlan = undefined;\n                currentItem.planIndex = undefined;\n            }\n        },\n        applyNewPlaybackPlan(plan, planIndex) {\n            const currentItem = _activePlaylistQueue[0];\n            if (currentItem) {\n                currentItem.playbackPlan = plan;\n                currentItem.planIndex = planIndex;\n            }\n        },\n    };\n    logProbe('[StateManager] 模块初始化完成 (V2.0 内核)。');\n    return publicAPI;\n})();\n// =================================================================\n// 2.1. 播放引擎 (The Playback Engine)\n// =================================================================\nconst PlaybackEngine = (() => {\n    logProbe('[PlaybackEngine] 模块正在初始化...');\n    let _playerA = null;\n    let _playerB = null;\n    let _activePlayer = null;\n    let _standbyPlayer = null;\n    let _fadeInterval = null;\n    const FADE_DURATION = 400;\n    // --- 私有函数 ---\n    function _swapPlayers() {\n        [_activePlayer, _standbyPlayer] = [_standbyPlayer, _activePlayer];\n    }\n    function _fadeVolumeAsync(player, targetVolume, duration) {\n        return new Promise(resolve => {\n            if (_fadeInterval) {\n                clearInterval(_fadeInterval);\n                _fadeInterval = null;\n            }\n            if (!player)\n                return resolve();\n            const startVolume = player.volume;\n            const stepTime = 50;\n            const steps = duration / stepTime;\n            if (steps <= 0) {\n                player.volume = targetVolume;\n                return resolve();\n            }\n            const volumeStep = (targetVolume - startVolume) / steps;\n            let currentStep = 0;\n            _fadeInterval = window.setInterval(() => {\n                currentStep++;\n                if (currentStep >= steps) {\n                    if (_fadeInterval)\n                        clearInterval(_fadeInterval);\n                    _fadeInterval = null;\n                    player.volume = targetVolume;\n                    resolve();\n                }\n                else {\n                    player.volume += volumeStep;\n                }\n            }, stepTime);\n        });\n    }\n    // --- 公共接口 ---\n    const publicAPI = {\n        initialize() {\n            if (_playerA && _playerB)\n                return;\n            logProbe('[Engine] 正在创建和配置 HTML5 Audio 元素...');\n            const createPlayer = () => {\n                const audio = new Audio();\n                audio.preload = 'auto';\n                audio.crossOrigin = 'anonymous';\n                audio.addEventListener('ended', () => {\n                    if (audio === _activePlayer)\n                        void _handleTrackEnded();\n                });\n                audio.addEventListener('error', () => {\n                    /* 错误由 Promise reject 处理 */\n                });\n                audio.addEventListener('timeupdate', broadcastTimeUpdate);\n                return audio;\n            };\n            _playerA = createPlayer();\n            _playerB = createPlayer();\n            _activePlayer = _playerA;\n            _standbyPlayer = _playerB;\n            logProbe('[Engine] Audio 元素已就绪。');\n        },\n        getActivePlayer: () => _activePlayer,\n        getStandbyPlayer: () => _standbyPlayer,\n        async transitionToTrack(targetTrackUrl, targetVolume) {\n            logProbe(`[Engine] 收到过渡请求: URL=${targetTrackUrl.slice(0, 50)}...`, 'group');\n            if (!_standbyPlayer || !_activePlayer) {\n                logProbe('[Engine] 过渡中止：播放器实例尚未初始化。', 'error');\n                logProbe('', 'groupEnd');\n                throw new Error('播放器实例尚未初始化');\n            }\n            const standbyPlayer = _standbyPlayer;\n            const activePlayer = _activePlayer;\n            standbyPlayer.src = targetTrackUrl;\n            standbyPlayer.load();\n            try {\n                await new Promise((resolve, reject) => {\n                    const onCanPlay = () => {\n                        standbyPlayer.removeEventListener('canplaythrough', onCanPlay);\n                        standbyPlayer.removeEventListener('error', onError);\n                        logProbe('[Engine] 备用播放器加载成功 (canplaythrough)。', 'log');\n                        resolve();\n                    };\n                    const onError = (e) => {\n                        standbyPlayer.removeEventListener('canplaythrough', onCanPlay);\n                        standbyPlayer.removeEventListener('error', onError);\n                        logProbe(`[Engine] 备用播放器加载失败!`, 'error');\n                        const target = e.target;\n                        const error = target.error;\n                        reject(new Error(`音频加载失败: ${error?.message || '未知错误'}`));\n                    };\n                    standbyPlayer.addEventListener('canplaythrough', onCanPlay);\n                    standbyPlayer.addEventListener('error', onError);\n                });\n            }\n            catch (error) {\n                logProbe('[Engine] 过渡因加载失败而中止。', 'groupEnd');\n                throw error;\n            }\n            await _fadeVolumeAsync(activePlayer, 0, 500);\n            activePlayer.pause();\n            _swapPlayers();\n            const newActivePlayer = this.getActivePlayer();\n            if (!newActivePlayer)\n                throw new Error('播放器实例在交换后丢失');\n            const playPromise = newActivePlayer.play();\n            if (playPromise) {\n                await playPromise;\n            }\n            await _fadeVolumeAsync(newActivePlayer, targetVolume, 500);\n            logProbe('[Engine] 过渡成功完成。', 'groupEnd');\n        },\n        async fadeOutAndPause() {\n            logProbe('[Engine] 命令: FadeOutAndPause');\n            await _fadeVolumeAsync(_activePlayer, 0, FADE_DURATION);\n            _activePlayer?.pause();\n        },\n        async executeHardCut(targetTrackUrl, targetVolume) {\n            logProbe(`[Engine:HardCut] 收到“瞬击”请求: URL=${targetTrackUrl.slice(0, 50)}...`, 'group');\n            const activePlayer = this.getActivePlayer();\n            if (!activePlayer) {\n                logProbe('[Engine:HardCut] 致命错误：无可用播放器实例。', 'error');\n                logProbe('', 'groupEnd');\n                throw new Error('No active player available for hard cut.');\n            }\n            logProbe(`(探针) 切换前 src: ${activePlayer.src.slice(-50)}`);\n            activePlayer.pause();\n            activePlayer.src = targetTrackUrl;\n            activePlayer.volume = targetVolume;\n            logProbe(`(探针) 切换后 src: ${activePlayer.src.slice(-50)}`);\n            try {\n                const playPromise = activePlayer.play();\n                if (playPromise) {\n                    await playPromise;\n                }\n                StateManager.setPlaybackState('PLAYING');\n                logProbe('[Engine:HardCut] “瞬击”播放成功。');\n            }\n            catch (error) {\n                logProbe(`[Engine:HardCut] “瞬击”播放失败! 这通常是因为用户未与页面交互。`, 'error');\n                StateManager.setPlaybackState('STOPPED');\n                throw error;\n            }\n            finally {\n                logProbe('', 'groupEnd');\n            }\n        },\n        async resumeAndFadeIn(targetVolume) {\n            logProbe('[Engine] 命令: ResumeAndFadeIn');\n            const playPromise = _activePlayer?.play();\n            if (playPromise)\n                await playPromise;\n            await _fadeVolumeAsync(_activePlayer, targetVolume, FADE_DURATION);\n        },\n    };\n    logProbe('[PlaybackEngine] 模块初始化完成。');\n    return publicAPI;\n})();\n// =================================================================\n// 2.2. 播放策略实现 (Playback Strategies)\n// =================================================================\nclass ListStrategy {\n    onQueueChanged(_currentItem) { }\n    advance(currentItem, direction) {\n        logProbe(`[Strategy:List] 收到 advance 请求. 方向: ${direction}, 当前: { playlistId: \"${currentItem.playlistId}\", index: ${currentItem.currentIndex}, rule: \"${currentItem.onFinishRule}\" }`);\n        if (direction === 'next') {\n            logProbe('[Strategy:List] 决策: advance(next) -> 委托给 onTrackEnd');\n            return this.onTrackEnd(currentItem);\n        }\n        const { currentIndex, onFinishRule, playlistContent } = currentItem;\n        const totalTracks = playlistContent.length;\n        if (currentIndex > 0) {\n            const nextIndex = currentIndex - 1;\n            logProbe(`[Strategy:List] 决策: advance(prev) -> GoTo (index: ${nextIndex})`);\n            return { action: 'GoTo', nextIndex };\n        }\n        else if (onFinishRule === 'loop') {\n            const lastIndex = totalTracks > 0 ? totalTracks - 1 : 0;\n            logProbe(`[Strategy:List] 决策: advance(prev) at start -> Loop to end (index: ${lastIndex})`);\n            return { action: 'GoTo', nextIndex: lastIndex };\n        }\n        else {\n            logProbe('[Strategy:List] 决策: advance(prev) at start -> Restart');\n            return { action: 'Restart' };\n        }\n    }\n    onTrackEnd(currentItem) {\n        logProbe(`[Strategy:List] 收到 onTrackEnd 请求. 当前: { playlistId: \"${currentItem.playlistId}\", index: ${currentItem.currentIndex}, rule: \"${currentItem.onFinishRule}\" }`);\n        const { currentIndex, onFinishRule, playlistContent, playedIndices } = currentItem;\n        const totalTracks = playlistContent.length;\n        const nextIndex = currentIndex + 1;\n        if (nextIndex < totalTracks) {\n            logProbe(`[Strategy:List] 决策: onTrackEnd -> GoTo (index: ${nextIndex})`);\n            return { action: 'GoTo', nextIndex };\n        }\n        else if (onFinishRule === 'pop') {\n            logProbe('[Strategy:List] 决策: onTrackEnd at end -> PopStack');\n            return { action: 'RemoveTopAndAdvance' };\n        }\n        else {\n            const totalValidTracks = playlistContent.length;\n            const historySizeAfterThisTrack = playedIndices.size + 1;\n            if (historySizeAfterThisTrack >= totalValidTracks) {\n                logProbe(`[Strategy:List] 决策: onTrackEnd at end -> LoopReset (一个完整的循环已结束)`, 'warn');\n                return { action: 'LoopReset' };\n            }\n            else {\n                logProbe(`[Strategy:List] 决策: onTrackEnd at end -> GoTo (普通循环，继续播放未听过的歌曲)`);\n                return { action: 'GoTo', nextIndex: 0 };\n            }\n        }\n    }\n    onPlaybackError(currentItem) {\n        logProbe(`[Strategy:List] 收到 onPlaybackError 请求。决策: 委托给 advance('next')`);\n        return this.advance(currentItem, 'next');\n    }\n}\nclass SingleStrategy {\n    onQueueChanged(_currentItem) { }\n    advance(_currentItem, direction) {\n        logProbe(`[Strategy:Single] 收到 advance 请求. 方向: ${direction}. 决策: Restart`);\n        return { action: 'Restart' };\n    }\n    onTrackEnd(_currentItem) {\n        logProbe(`[Strategy:Single] 收到 onTrackEnd 请求. 决策: Restart`);\n        return { action: 'Restart' };\n    }\n    onPlaybackError(_currentItem) {\n        logProbe(`[Strategy:Single] 收到 onPlaybackError 请求。决策: Stop (单曲循环下无法自动前进)`);\n        return { action: 'Stop' };\n    }\n}\nclass RandomStrategy {\n    _generateIntelligentShuffle(allTrackIndices, playedIndices, currentIndex) {\n        logProbe(`[Strategy:Random] (Algo) _generateIntelligentShuffle 执行...`, 'groupCollapsed');\n        logProbe(`输入: allIndices.length=${allTrackIndices.length}, playedIndices.size=${playedIndices.size}, currentIndex=${currentIndex}`);\n        const sourceForShuffle = allTrackIndices.filter(i => !playedIndices.has(i) && i !== currentIndex);\n        logProbe(`计算待选池 (sourceForShuffle) 大小: ${sourceForShuffle.length}`);\n        for (let i = sourceForShuffle.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [sourceForShuffle[i], sourceForShuffle[j]] = [sourceForShuffle[j], sourceForShuffle[i]];\n        }\n        logProbe(`洗牌完成. 输出 shuffledIndices (纯粹的未来队列): [${sourceForShuffle.join(', ')}]`);\n        logProbe('', 'groupEnd');\n        return sourceForShuffle;\n    }\n    _generatePlaybackPlan(playedIndices, currentIndex, shuffledIndices) {\n        logProbe(`[Strategy:Random] (Algo) _generatePlaybackPlan 执行...`, 'groupCollapsed');\n        logProbe(`输入: playedIndices.size=${playedIndices.size}, currentIndex=${currentIndex}, shuffledIndices.length=${shuffledIndices.length}`);\n        const knownSequence = Array.from(new Set([...playedIndices, currentIndex]));\n        const planIndex = knownSequence.indexOf(currentIndex);\n        const playbackPlan = [...knownSequence, ...shuffledIndices];\n        logProbe(`(守护者探针) \"已知序列\" (unique history + current): [${knownSequence.join(', ')}]`);\n        logProbe(`生成导航地图 (playbackPlan): [${playbackPlan.join(', ')}]`);\n        logProbe(`定位导航指针 (planIndex): ${planIndex}`);\n        logProbe('', 'groupEnd');\n        return { playbackPlan, planIndex };\n    }\n    _handlePlanEnd(currentItem) {\n        logProbe(`[Strategy:Random] (Helper) _handlePlanEnd: 已到达计划终点，开始进行边界决策...`, 'groupCollapsed');\n        logProbe(`(探针) 待决策歌单: \"${currentItem.playlistId}\", 结束规则: \"${currentItem.onFinishRule}\"`);\n        if (currentItem.onFinishRule === 'pop') {\n            logProbe(`(边界决策) onFinishRule 为 'pop'，决策 -> PopStack`);\n            logProbe('', 'groupEnd');\n            return { action: 'RemoveTopAndAdvance' };\n        }\n        else {\n            logProbe(`(边界决策) onFinishRule 为 'loop'，决策 -> LoopReset`);\n            logProbe('', 'groupEnd');\n            return { action: 'LoopReset' };\n        }\n    }\n    onQueueChanged(currentItem) {\n        if (!currentItem) {\n            logProbe('[Strategy:Random] onQueueChanged 中止：无有效的当前项。');\n            return;\n        }\n        logProbe(`[Strategy:Random] onQueueChanged 已触发 (连续性恢复)，将为歌单 \"${currentItem.playlistId}\" 生成播放计划...`);\n        const allIndices = currentItem.playlistContent.map((_, i) => i);\n        const shuffled = this._generateIntelligentShuffle(allIndices, currentItem.playedIndices, currentItem.currentIndex);\n        const { playbackPlan, planIndex } = this._generatePlaybackPlan(currentItem.playedIndices, currentItem.currentIndex, shuffled);\n        StateManager.applyNewPlaybackPlan(playbackPlan, planIndex);\n    }\n    prepareGenesis(currentItem) {\n        if (!currentItem || !currentItem.playlistContent) {\n            logProbe('[Strategy:Random] prepareGenesis 中止：传入的队列项无效。', 'error');\n            return null;\n        }\n        logProbe('[Strategy:Random] (Query) prepareGenesis: 收到“创世乐谱”谱写请求...', 'group');\n        const allIndices = currentItem.playlistContent.map((_, i) => i);\n        for (let i = allIndices.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [allIndices[i], allIndices[j]] = [allIndices[j], allIndices[i]];\n        }\n        const newPlaybackPlan = allIndices;\n        const newPlanIndex = 0;\n        const newCurrentIndex = newPlaybackPlan[newPlanIndex];\n        logProbe(`(乐谱) 谱写完成。New CurrentIndex: ${newCurrentIndex}, New PlanIndex: ${newPlanIndex}`);\n        logProbe('', 'groupEnd');\n        return { newCurrentIndex, newPlaybackPlan, newPlanIndex };\n    }\n    advance(currentItem, direction) {\n        logProbe(`[Strategy:Random] 收到 advance 请求. 方向: ${direction}`, 'groupCollapsed');\n        const { playbackPlan, planIndex } = currentItem;\n        if (!playbackPlan || planIndex === undefined) {\n            logProbe('[Strategy:Random] 决策中止：导航计划 (playbackPlan) 尚未初始化。', 'error');\n            logProbe('', 'groupEnd');\n            return { action: 'DoNothing' };\n        }\n        logProbe(`(探针) 当前导航指针 (planIndex): ${planIndex}`);\n        logProbe(`(探针) 导航地图 (playbackPlan): [${playbackPlan.join(', ')}]`);\n        if (direction === 'next') {\n            const nextPlanIndex = planIndex + 1;\n            if (nextPlanIndex < playbackPlan.length) {\n                const targetTrackIndex = playbackPlan[nextPlanIndex];\n                logProbe(`[Strategy:Random] 决策: advance(next) -> GoTo (新 planIndex: ${nextPlanIndex}, 目标 trackIndex: ${targetTrackIndex})`);\n                logProbe('', 'groupEnd');\n                return { action: 'GoTo', nextIndex: targetTrackIndex };\n            }\n            else {\n                logProbe('[Strategy:Random] advance(next) 已到达计划终点，委托给 _handlePlanEnd...');\n                logProbe('', 'groupEnd');\n                return this._handlePlanEnd(currentItem);\n            }\n        }\n        else {\n            // direction === 'prev'\n            const prevPlanIndex = planIndex - 1;\n            if (prevPlanIndex >= 0) {\n                const targetTrackIndex = playbackPlan[prevPlanIndex];\n                logProbe(`[Strategy:Random] 决策: advance(prev) -> GoTo (新 planIndex: ${prevPlanIndex}, 目标 trackIndex: ${targetTrackIndex})`);\n                logProbe('', 'groupEnd');\n                return { action: 'GoTo', nextIndex: targetTrackIndex };\n            }\n            else {\n                logProbe(`[Strategy:Random] 决策: advance(prev) 已在计划起点。返回 DoNothing。`);\n                logProbe('', 'groupEnd');\n                return { action: 'DoNothing' };\n            }\n        }\n    }\n    onTrackEnd(currentItem) {\n        logProbe(`[Strategy:Random] 收到 onTrackEnd 请求.`, 'groupCollapsed');\n        const { playbackPlan, planIndex } = currentItem;\n        if (!playbackPlan || planIndex === undefined) {\n            logProbe('[Strategy:Random] 决策中止：导航计划 (playbackPlan) 尚未初始化。返回 Stop 以策安全。', 'error');\n            logProbe('', 'groupEnd');\n            return { action: 'Stop' };\n        }\n        logProbe(`(探针) 当前导航指针 (planIndex): ${planIndex}`);\n        logProbe(`(探针) 导航地图 (playbackPlan): [${playbackPlan.join(', ')}]`);\n        const nextPlanIndex = planIndex + 1;\n        if (nextPlanIndex < playbackPlan.length) {\n            const targetTrackIndex = playbackPlan[nextPlanIndex];\n            logProbe(`[Strategy:Random] 决策: onTrackEnd -> GoTo (新 planIndex: ${nextPlanIndex}, 目标 trackIndex: ${targetTrackIndex})`);\n            logProbe('', 'groupEnd');\n            return { action: 'GoTo', nextIndex: targetTrackIndex };\n        }\n        else {\n            logProbe('[Strategy:Random] onTrackEnd 已到达计划终点，委托给 _handlePlanEnd...');\n            logProbe('', 'groupEnd');\n            return this._handlePlanEnd(currentItem);\n        }\n    }\n    onPlaybackError(currentItem) {\n        logProbe(`[Strategy:Random] 收到 onPlaybackError 请求。决策: 委托给 advance('next')`);\n        return this.advance(currentItem, 'next');\n    }\n}\n// =================================================================\n// 2.3. 策略管理器 (The StrategyManager - \"The Conductor\")\n// =================================================================\nconst StrategyManager = (() => {\n    logProbe('[StrategyManager] 模块正在初始化...');\n    const _strategies = {\n        list: new ListStrategy(),\n        single: new SingleStrategy(),\n        random: new RandomStrategy(),\n    };\n    let _currentStrategy = _strategies.list;\n    const publicAPI = {\n        /**\n         * [命令] 设置新的播放模式，并自动切换到对应的策略实例。\n         */\n        setMode(mode) {\n            logProbe(`[StrategyManager] (Command) setMode: 切换策略模式为 -> ${mode}`);\n            _currentStrategy = _strategies[mode];\n        },\n        /**\n         * [查询] 获取当前激活的策略实例。这是我们遵循CQS原则的体现。\n         */\n        getCurrentStrategy: () => _currentStrategy,\n        /**\n         * [命令] 通知当前策略：核心状态（如队列）已发生重大变化。\n         * 这是修复BUG的核心，它为策略提供了一个统一的生命周期钩子。\n         */\n        notifyQueueChanged() {\n            logProbe(`[StrategyManager] (Command) notifyQueueChanged: 正在通知当前策略 (${_currentStrategy.constructor.name}) 队列已变更...`, 'groupCollapsed');\n            const currentItem = StateManager.getTopQueueItem();\n            _currentStrategy.onQueueChanged(currentItem);\n            logProbe('[StrategyManager] 通知完成。', 'groupEnd');\n        },\n    };\n    logProbe('[StrategyManager] 模块初始化完成。');\n    return publicAPI;\n})();\n// =================================================================\n// 3. 全局变量与常量 (Global Variables & Constants)\n// =================================================================\nconst STATE_KEY = '余烬双星_播放器状态';\nlet isInitializedForThisChat = false;\nlet isReconciling = false;\nlet _initializationPromiseControls = null;\nlet _initializationPromise = null;\nlet isScriptActive = true;\nlet allPlaylists = {};\nlet triggers = [];\nlet defaultPlaylistId = '';\nlet isMvuIntegrationActive = false;\nlet isCorePlayerInitialized = false;\nlet _currentChatId = null;\nconst fullStateUpdateCallbacks = [];\nconst timeUpdateCallbacks = [];\n/**\n * [V9.0 统一校准官] 新架构的“运行时大脑”。\n * 它的单一职责是：响应“运行时”的增量事件，通过“边沿检测”模型，\n * 精确地、最小化地修改当前队列，并决策是否需要变更播放。\n * @param eventPayload - 可选的、来自 MVU 事件的最新状态数据。\n */\nasync function _reconcilePlaylistQueue(eventPayload, options) {\n    // --- 1. 【前置检查】: 防止并发的事件风暴 ---\n    if (isReconciling) {\n        logProbe('[Reconciler] 请求被合并：前一个校准任务仍在进行中。', 'warn');\n        return;\n    }\n    isReconciling = true;\n    logProbe('=== [Reconciler] “统一校准官”已接管运行时事件 ===', 'group');\n    try {\n        StateManager.setPerformingEffect(true);\n        logProbe('[Reconciler] (事务) 已上效果锁并广播“过渡中”状态，UI应进入等待。');\n        broadcastFullState();\n        // --- 核心逻辑 (原有的 try...finally 块) ---\n        try {\n            const oldTopItem = StateManager.getTopQueueItem();\n            // --- 2. 【获取事实】: 遵循“时序悖论”定律 ---\n            const currentStateData = eventPayload?.stat_data\n                ? eventPayload.stat_data\n                : ((await _findLatestAuthoritativeMvuState())?.mvuData?.stat_data ?? {});\n            logProbe(`[Reconciler] (探针) 已确定本次校准的权威 MVU 状态 (来源: ${eventPayload ? '事件载荷' : '主动查询'})。`);\n            // --- 3. 【生成报告】: 委托 MvuManager 进行边沿检测 ---\n            const previousStateData = MvuManager.getPreviousState();\n            const changeReport = MvuManager.calculateChangeReport(previousStateData, currentStateData, triggers);\n            // --- 4. 【执行队列的增量修改】: 先减后加 ---\n            const newQueue = StateManager.getQueue();\n            if (changeReport.newlyInactiveTriggers.length > 0) {\n                _.remove(newQueue, item => changeReport.newlyInactiveTriggers.some(inactiveTrigger => areTriggersFunctionallyEqual(item.triggerSource, inactiveTrigger)));\n                logProbe(`[Reconciler] (修改) 根据报告移除了 ${changeReport.newlyInactiveTriggers.length} 个失效项。`);\n            }\n            if (changeReport.newlyActiveTriggers.length > 0) {\n                for (const activeTrigger of changeReport.newlyActiveTriggers) {\n                    if (newQueue.some(item => item.triggerSource && areTriggersFunctionallyEqual(item.triggerSource, activeTrigger))) {\n                        logProbe(`[Reconciler] (防御) 拒绝添加重复的激活项: \"${activeTrigger.playlist_id}\"`, 'warn');\n                        continue;\n                    }\n                    const newItem = createQueueItem({\n                        type: 'mvu',\n                        playlistId: activeTrigger.playlist_id,\n                        trigger: activeTrigger,\n                    });\n                    if (newItem) {\n                        newQueue.push(newItem);\n                        logProbe(`[Reconciler] (修改) 根据报告添加了新激活项: \"${newItem.playlistId}\"`);\n                    }\n                }\n            }\n            StateManager.updateQueue(newQueue);\n            // --- 5. 【决策与执行】: 对比新旧队首 ---\n            const newTopItem = StateManager.getTopQueueItem();\n            if (newTopItem?.playlistId !== oldTopItem?.playlistId) {\n                logProbe(`[Reconciler] (决策) 队首发生变更！ 从 \"${oldTopItem?.playlistId ?? '无'}\" 变为 \"${newTopItem?.playlistId ?? '无'}\"。`);\n                if (newTopItem) {\n                    logProbe('[Reconciler] (握手) 正在通知 StrategyManager 队列已变更...');\n                    StrategyManager.notifyQueueChanged();\n                    newTopItem.wasEverPlayed = true;\n                    const targetIndex = newTopItem.wasEverPlayed ? newTopItem.currentIndex : 0;\n                    if (StateManager.isPlaying()) {\n                        logProbe('[Reconciler] (效果) 用户正在播放，将执行过渡效果...');\n                        if (options?.transitionEffect === 'hard') {\n                            await PlaybackEngine.executeHardCut(newTopItem.playlistContent[targetIndex].url, StateManager.getVolume());\n                        }\n                        else {\n                            await _executeTransition(targetIndex);\n                        }\n                    }\n                    else if (oldTopItem === undefined && // 1. 队列发生“从无到有”的跃迁\n                        StateManager.getPlaybackState() === 'STOPPED' // 2. 关键：只要不是 PAUSED (用户主动暂停)，就允许场景触发播放\n                    ) {\n                        logProbe('[Reconciler] 自动播放契约满足 (Queue 0->1 + Not Paused)，将调用 _executeGenesisPlayInternal。', 'warn');\n                        await _executeGenesisPlayInternal(targetIndex);\n                    }\n                    else {\n                        logProbe('[Reconciler] (效果) 用户已暂停或未授权，仅在后台静默更新轨道，不播放。');\n                        const track = newTopItem.playlistContent[targetIndex];\n                        const activePlayer = PlaybackEngine.getActivePlayer();\n                        if (track && activePlayer) {\n                            activePlayer.src = track.url;\n                        }\n                    }\n                }\n                else {\n                    logProbe('[Reconciler] (决策) 监测到队列已完全清空。正在执行“物理静音”协议...', 'warn');\n                    await PlaybackEngine.fadeOutAndPause();\n                    StateManager.setPlaybackState('STOPPED');\n                    StrategyManager.notifyQueueChanged();\n                    logProbe('[Reconciler] (执行) “物理静音”完成，播放状态已置为 STOPPED。');\n                }\n            }\n            else {\n                logProbe('[Reconciler] (决策) 队首未发生变更，保持当前播放稳定。');\n            }\n            // --- 6. 【更新记忆】: 为下一次边沿检测做准备 ---\n            await MvuManager.persistCurrentState(currentStateData);\n        }\n        catch (error) {\n            logProbe(`[Reconciler] 核心逻辑执行期间发生严重错误: ${error}`, 'error');\n            console.error(error);\n        }\n        finally {\n            await writeState('reconciliation');\n        }\n    }\n    finally {\n        isReconciling = false;\n        await _releaseEffectLock();\n        logProbe('=== [Reconciler] “统一校准官”任务完成 (锁已通过调度器释放) ===', 'groupEnd');\n    }\n}\n// =================================================================\n// 4. 核心工具与广播系统 (Core Utilities & Broadcast System)\n// =================================================================\nfunction broadcastFullState() {\n    const currentItem = StateManager.getTopQueueItem();\n    const currentPlaylist = currentItem?.playlistContent ?? [];\n    const currentIndex = currentItem?.currentIndex ?? 0;\n    const payload = {\n        currentItem: currentPlaylist[currentIndex]\n            ? {\n                title: currentPlaylist[currentIndex].歌名,\n                artist: currentPlaylist[currentIndex].歌手,\n                cover: currentPlaylist[currentIndex].封面,\n            }\n            : null,\n        isPlaying: StateManager.isPlaying(),\n        playbackState: StateManager.getPlaybackState(),\n        playbackMode: StateManager.getPlaybackMode(),\n        masterVolume: StateManager.getVolume(),\n        playlist: currentPlaylist.map(item => ({ title: item.歌名, artist: item.歌手, cover: item.封面 })),\n        isTransitioning: StateManager.isPerformingEffect(),\n    };\n    logProbe(`[Broadcast] 正在广播完整状态... [旧兼容: isPlaying=${payload.isPlaying}] [新内核: state=${payload.playbackState}] mode: ${payload.playbackMode}, currentItem: ${payload.currentItem?.title ?? '无'}`, 'groupCollapsed');\n    logProbe(`详细: isTransitioning=${payload.isTransitioning}`);\n    logProbe('', 'groupEnd');\n    fullStateUpdateCallbacks.forEach(callback => {\n        try {\n            callback(payload);\n        }\n        catch (e) {\n            console.error('[音乐脚本] 完整状态回调执行出错:', e);\n        }\n    });\n}\nfunction broadcastTimeUpdate() {\n    const activePlayer = PlaybackEngine.getActivePlayer();\n    if (!StateManager.isPlaying() || !activePlayer)\n        return;\n    const payload = {\n        currentTime: activePlayer.currentTime,\n        duration: activePlayer.duration || 0,\n    };\n    timeUpdateCallbacks.forEach(callback => callback(payload));\n}\nfunction prepareNextTrack() {\n    const currentItem = StateManager.getTopQueueItem();\n    const standbyPlayer = PlaybackEngine.getStandbyPlayer();\n    if (!standbyPlayer || !currentItem)\n        return;\n    const nextIndex = currentItem.currentIndex + 1;\n    if (nextIndex < currentItem.playlistContent.length) {\n        const nextTrack = currentItem.playlistContent[nextIndex];\n        if (nextTrack && standbyPlayer.src !== nextTrack.url) {\n            standbyPlayer.src = nextTrack.url;\n            standbyPlayer.load();\n        }\n    }\n}\n// =================================================================\n// 5. 状态管理 (State Management)\n// =================================================================\nfunction readState() {\n    logProbe('[StateReader] 正在尝试从酒馆变量读取持久化状态...');\n    const savedData = getVariables({ type: 'chat' })[STATE_KEY];\n    if (!savedData || typeof savedData !== 'object') {\n        logProbe('[StateReader] 未发现有效存档。');\n        return null;\n    }\n    logProbe('[StateReader] 发现原始状态数据，正在提交给 Zod 进行安全验证...');\n    const validationResult = ZodPersistedState.safeParse(savedData);\n    if (validationResult.success) {\n        logProbe('[StateReader] Zod 验证成功，状态数据安全。');\n        return validationResult.data;\n    }\n    else {\n        console.warn('[StateReader] 持久化状态验证失败:', validationResult.error);\n        return null;\n    }\n}\nasync function writeState(source) {\n    if (!isScriptActive) {\n        logProbe(`[State] 写入操作被阻止，因为脚本正在停机。(来源: ${source})`, 'warn');\n        return;\n    }\n    try {\n        logProbe(`[State] 由 \"${source}\" 触发状态写入...`);\n        const dataToSave = StateManager.getStateSnapshotForPersistence();\n        await updateVariablesWith(vars => {\n            vars[STATE_KEY] = dataToSave;\n            return vars;\n        }, { type: 'chat' });\n        logProbe(`[State] 状态已成功写入酒馆变量`);\n    }\n    catch (e) {\n        logProbe(`[State] 写入状态时发生严重错误: ${e}`, 'error');\n    }\n}\n// =================================================================\n// 6. 世界书配置解析与队列操作 (Worldbook Parsing & Stack Operations)\n// =================================================================\n/**\n * @description 格式化 Zod 验证错误，以便在 toastr 中为角色卡作者显示清晰、可操作的反馈。\n */\nfunction _formatZodErrorForToastr(error) {\n    const issue = error.issues[0];\n    const path = issue.path.join(' -> ');\n    const message = issue.message;\n    const toastrTitle = `[MusicConfig] 内容错误`;\n    const toastrMessage = `路径: ${path} | 问题: ${message}`;\n    const fullLogMessage = `[MusicConfig] 内容错误:\\n路径: ${path}\\n问题: ${message}`;\n    logProbe(`[ZodValidator] 世界书配置验证失败: ${fullLogMessage}`, 'error');\n    toastr.error(toastrMessage, toastrTitle, { timeOut: 15000 });\n}\n// =================================================================\n// 核心算法 V9.5 (Core Algorithms for \"Concerto\")\n// 原则: 这些函数都必须是纯粹的查询 (CQS)，严禁产生任何副作用。\n// =================================================================\n/**\n * [核心算法] 判断两个触发器对象是否代表同一个“功能身份”。\n * @param a - 第一个触发器对象。\n * @param b - 第二个触发器对象。\n * @returns {boolean} 如果功能上相等，则返回 true。\n */\nfunction areTriggersFunctionallyEqual(a, b) {\n    if (!a || !b)\n        return a === b;\n    if (a.playlist_id !== b.playlist_id)\n        return false;\n    const getCanonicalString = (condition) => {\n        return Object.keys(condition)\n            .sort()\n            .map(key => `${key}:${String(condition[key])}`) // 使用 String() 来确保所有值都能被正确处理\n            .join(',');\n    };\n    const conditionsA = a.conditions.map(getCanonicalString).sort();\n    const conditionsB = b.conditions.map(getCanonicalString).sort();\n    return conditionsA.length === conditionsB.length && conditionsA.every((val, index) => val === conditionsB[index]);\n}\n/**\n * @description [V9.7 核心强化] 查找权威MVU状态。现在能够识别“创世”和“运行时”两种数据结构。\n * @param context - 可选的上下文，用于指导查找方式。\n * @returns {Promise<{ mvuData: any, messageId: number } | null>} 权威状态或 null。\n */\nasync function _findLatestAuthoritativeMvuState(context) {\n    // --- 模式一: 精确制导 (通常用于开场白) ---\n    if (context && context.messageId === 0 && typeof context.swipeId === 'number') {\n        logProbe(`[StateFinder] (精确制导模式) 目标: message_id=${context.messageId}, swipe_id=${context.swipeId}`, 'groupCollapsed');\n        try {\n            const mvuDataContainer = await Mvu.getMvuData({ type: 'message', message_id: 0 });\n            const swipeSpecificData = mvuDataContainer?.swipes_data?.[context.swipeId];\n            if (swipeSpecificData?.stat_data) {\n                // 成功在 \"创世\" 结构中找到特定 swipe 的数据\n                logProbe('[StateFinder] (探针) 检测到“创世”结构 (swipes_data)，成功命中！');\n                logProbe('', 'groupEnd');\n                return { mvuData: swipeSpecificData, messageId: 0 };\n            }\n            else if (mvuDataContainer?.stat_data) {\n                // 在顶层找到了 \"运行时\" 结构的数据 (可能只有一个开场白)\n                logProbe('[StateFinder] (探针) 检测到“运行时”结构 (顶层 stat_data)，直接采用。');\n                logProbe('', 'groupEnd');\n                return { mvuData: mvuDataContainer, messageId: 0 };\n            }\n            else {\n                logProbe('[StateFinder] (精确制导模式) 查找失败：在两种已知结构中均未找到 stat_data。', 'warn');\n            }\n        }\n        catch (error) {\n            logProbe(`[StateFinder] (精确制导模式) 查询时出错: ${error}`, 'error');\n        }\n        finally {\n            logProbe('', 'groupEnd');\n        }\n    }\n    // --- 模式二: 回溯扫描 (找不到精确目标时的标准流程) ---\n    logProbe('[StateFinder] (回溯扫描模式) 开始执行...', 'groupCollapsed');\n    try {\n        const allMessages = getChatMessages(-1, { include_swipes: true });\n        for (let i = allMessages.length - 1; i >= 0; i--) {\n            const message = allMessages[i];\n            // [V9.7 核心修正] 修复致命拼写错误：message.id -> message.message_id\n            const currentMessageId = message.message_id;\n            // 防御性编程：如果 message_id 无效，直接跳过，防止意外\n            if (typeof currentMessageId !== 'number') {\n                logProbe(`(探针) 跳过无效楼层 (索引 ${i})，因其 message_id 为 ${currentMessageId}。`, 'warn');\n                continue;\n            }\n            try {\n                logProbe(`(探针) 正在查询 message_id: ${currentMessageId}...`);\n                const mvuData = await Mvu.getMvuData({ type: 'message', message_id: currentMessageId });\n                if (mvuData?.stat_data) {\n                    logProbe(`[StateFinder] 查找成功！在 message_id: ${currentMessageId} 处找到权威状态。`);\n                    logProbe('', 'groupEnd');\n                    return { mvuData, messageId: currentMessageId };\n                }\n            }\n            catch (error) {\n                logProbe(`(探针) 查询 message_id: ${currentMessageId} 时接口失败，将继续向前查找。错误: ${error}`, 'warn');\n            }\n        }\n        logProbe('[StateFinder] 查找失败：遍历完所有消息楼层，均未找到有效的 stat_data。', 'warn');\n        return null;\n    }\n    catch (error) {\n        logProbe(`[StateFinder] 在获取聊天记录时发生严重错误: ${error}`, 'error');\n        return null;\n    }\n    finally {\n        logProbe('', 'groupEnd');\n    }\n}\n/**\n * @description [职责单一] 找到、解析、验证并准备好【可供运行时直接使用】的音乐配置。\n * @returns {Promise<{ playlists: Record<string, PlaylistConfig>, defaultId: string, triggers: Trigger[] } | null>}\n *          一个包含了【 playlists 映射 】的、完全准备就绪的配置对象，或在失败时返回 null。\n */\nasync function parseWorldbookConfig() {\n    logProbe('[WorldbookParser V4-健壮模式] 开始解析...', 'group');\n    // [修改点] 自定义错误类，用于清晰地区分“配置缺失”和“未知错误”\n    // 这让我们的错误处理逻辑更符合 SRP 原则\n    class ConfigMissingError extends Error {\n        constructor(message) {\n            super(message);\n            this.name = 'ConfigMissingError';\n        }\n    }\n    const aggregatedConfig = {\n        playlists: [],\n        triggers: [],\n        defaultPlaylistId: undefined,\n        _defaultPlaylistIdSourceFile: null,\n    };\n    try {\n        // 前置检查：在执行任何复杂逻辑前，首先确认世界书数据是否可访问。\n        const worldbookNames = getCharWorldbookNames('current');\n        const searchOrder = [worldbookNames.primary, ...worldbookNames.additional].filter(Boolean);\n        // 如果角色卡没有关联任何世界书，直接抛出我们自定义的错误\n        if (searchOrder.length === 0) {\n            throw new ConfigMissingError('角色卡未关联任何世界书。');\n        }\n        let foundAnyConfigEntry = false;\n        for (const bookName of searchOrder) {\n            if (!bookName)\n                continue;\n            const entries = await getWorldbook(bookName);\n            const configEntries = entries.filter(e => e.name.includes('[MusicConfig]'));\n            if (configEntries.length > 0) {\n                foundAnyConfigEntry = true;\n            }\n            for (const entry of configEntries) {\n                logProbe(`[Parser V4] 发现并处理配置文件: \"${entry.name}\"`);\n                try {\n                    const rawConfig = YAML.parse(entry.content);\n                    const validationResult = ZodWorldbookConfig.safeParse(rawConfig);\n                    if (!validationResult.success) {\n                        logProbe(`[Parser V4] 条目 \"${entry.name}\" Zod验证失败，已跳过。`, 'error');\n                        _formatZodErrorForToastr(validationResult.error);\n                        continue;\n                    }\n                    const data = validationResult.data;\n                    if (data.playlists) {\n                        aggregatedConfig.playlists.push(...data.playlists.map(p => ({ ...p, _sourceFile: entry.name })));\n                    }\n                    if (data.triggers) {\n                        aggregatedConfig.triggers.push(...data.triggers.map(t => ({ ...t, _sourceFile: entry.name })));\n                    }\n                    if (data.default_playlist_id) {\n                        if (aggregatedConfig.defaultPlaylistId && aggregatedConfig.defaultPlaylistId !== data.default_playlist_id) {\n                            const warningMsg = `在文件 \"${entry.name}\" 中发现的 default_playlist_id (\"${data.default_playlist_id}\") 覆盖了来自文件 \"${aggregatedConfig._defaultPlaylistIdSourceFile ?? '未知'}\" 的定义 (\"${aggregatedConfig.defaultPlaylistId}\")。为确保行为可预测，建议只保留一个定义。`;\n                            logProbe(`[Parser V4] ${warningMsg}`, 'warn');\n                            toastr.warning(warningMsg, '配置警告', { timeOut: 20000, closeButton: true });\n                        }\n                        aggregatedConfig.defaultPlaylistId = data.default_playlist_id;\n                        aggregatedConfig._defaultPlaylistIdSourceFile = entry.name;\n                    }\n                }\n                catch (e) {\n                    logProbe(`[Parser V4] 解析条目 \"${entry.name}\" 时发生YAML语法错误: ${e.message}`, 'error');\n                    toastr.error(`[MusicConfig] 文件 \"${entry.name}\" 格式错误：YAML 语法不正确。`, '配置错误', {\n                        timeOut: 10000,\n                    });\n                }\n            }\n        }\n        // 在所有文件都检查完之后，再判断是否找到了任何 [MusicConfig] 条目\n        if (!foundAnyConfigEntry) {\n            throw new ConfigMissingError('在已关联的世界书中，未找到任何包含 [MusicConfig] 的条目。');\n        }\n        // --- 全局健全性检查 (逻辑保持不变) ---\n        logProbe('[Parser V4] 所有文件聚合完毕，开始执行全局健全性检查...', 'groupCollapsed');\n        let isGloballyValid = true;\n        const playlistsById = _.groupBy(aggregatedConfig.playlists, 'id');\n        for (const id in playlistsById) {\n            if (playlistsById[id].length > 1) {\n                const sources = playlistsById[id].map(p => p._sourceFile).join(', ');\n                const errorMsg = `[MusicConfig] 致命错误: 歌单 ID \"${id}\" 在多个文件中重复定义。来源: ${sources}。ID 必须是唯一的。`;\n                logProbe(errorMsg, 'error');\n                toastr.error(errorMsg, '配置冲突', { timeOut: 15000 });\n                isGloballyValid = false;\n            }\n        }\n        const allPlaylistIds = new Set(aggregatedConfig.playlists.map(p => p.id));\n        if (aggregatedConfig.defaultPlaylistId && !allPlaylistIds.has(aggregatedConfig.defaultPlaylistId)) {\n            const errorMsg = `[MusicConfig] 配置错误: 最终的 default_playlist_id (\"${aggregatedConfig.defaultPlaylistId}\", 来自文件 \"${aggregatedConfig._defaultPlaylistIdSourceFile ?? '未知'}\") 指向了一个不存在的歌单。`;\n            logProbe(errorMsg, 'error');\n            toastr.error(errorMsg, '配置错误', { timeOut: 15000 });\n            aggregatedConfig.defaultPlaylistId = undefined;\n        }\n        const finalTriggers = aggregatedConfig.triggers.filter(trigger => {\n            if (allPlaylistIds.has(trigger.playlist_id)) {\n                return true;\n            }\n            const errorMsg = `[MusicConfig] 校验失败: 来自文件 \"${trigger._sourceFile}\" 的触发器指向了不存在的歌单ID \"${trigger.playlist_id}\"。该触发器将被忽略。`;\n            logProbe(errorMsg, 'error');\n            toastr.error(errorMsg, '配置错误', { timeOut: 10000 });\n            return false;\n        });\n        if (!isGloballyValid) {\n            logProbe('[Parser V4] 全局健全性检查失败，配置被拒绝。', 'error');\n            logProbe('', 'groupEnd');\n            logProbe('', 'groupEnd');\n            return null;\n        }\n        logProbe('[Parser V4] 全局健全性检查通过。');\n        logProbe('', 'groupEnd');\n        if (aggregatedConfig.playlists.length === 0) {\n            throw new ConfigMissingError('所有配置文件中都未能找到任何有效的歌单 (playlists)。');\n        }\n        // --- 数据归一化并返回 ---\n        const playlistsAsMap = {};\n        for (const pl of aggregatedConfig.playlists) {\n            const normalizedTracks = pl.tracks.map(track => ({\n                url: track.url,\n                歌名: track.歌名 && track.歌名.trim() !== ''\n                    ? track.歌名\n                    : decodeURIComponent(track.url.split('/').pop()?.split('?')[0] || '未知歌曲'),\n                歌手: track.歌手,\n                封面: track.封面,\n            }));\n            playlistsAsMap[pl.id] = { ..._.omit(pl, '_sourceFile'), tracks: normalizedTracks };\n        }\n        const finalConfig = {\n            playlists: playlistsAsMap,\n            defaultId: aggregatedConfig.defaultPlaylistId,\n            triggers: finalTriggers.map(t => _.omit(t, '_sourceFile')),\n        };\n        logProbe('[Parser V4] 数据归一化完成，运行时配置已就绪。', 'log');\n        logProbe('', 'groupEnd');\n        return finalConfig;\n    }\n    catch (error) {\n        // 这是新的、更智能的错误处理中心\n        if (error instanceof ConfigMissingError) {\n            // 判断这个错误是不是我们自己抛出的“配置缺失”错误\n            logProbe(`[Parser V4] 捕获到可预见的配置错误: ${error.message}`, 'error');\n            // [核心修改] 直接使用 error.message 作为 toastr 的提示内容\n            // 这确保了我们抛出的具体错误信息能够直接呈现给用户\n            toastr.error(error.message, '[音乐播放器] 配置缺失', {\n                timeOut: 20000,\n                closeButton: true,\n            });\n        }\n        else {\n            // 如果是其他所有无法预料的错误，比如酒馆环境问题\n            logProbe(`[Parser V4] 解析过程中发生意外顶层错误: ${error}`, 'error');\n            // 显示通用的、建议用户刷新的提示\n            toastr.error('播放器在加载设置时遇到一个临时问题。这通常可以通过按 F5 刷新酒馆页面来解决。', '[音乐播放器] 加载时遇到临时问题', {\n                timeOut: 20000,\n                closeButton: true,\n            });\n        }\n        logProbe('', 'groupEnd');\n        return null;\n    }\n}\n/**\n * [工厂 V3.0] 从持久化对象重建一个完整的、可供运行时使用的 QueueItem。\n * @param persistedItem - 从酒馆变量读取的、经过 Zod 验证的item。\n * @param playlistConfig - 从当前世界书解析出的对应歌单配置。\n * @returns {QueueItem} 一个完整的运行时 QueueItem。\n */\nfunction reconstituteQueueItem(persistedItem, playlistConfig) {\n    return {\n        playlistId: persistedItem.playlistId,\n        priority: persistedItem.triggerSource?.priority ?? -Infinity,\n        playlistContent: _.cloneDeep(playlistConfig.tracks),\n        onFinishRule: playlistConfig.onFinishRule,\n        currentIndex: persistedItem.currentIndex,\n        playedIndices: new Set(persistedItem.playedIndices),\n        wasEverPlayed: persistedItem.wasEverPlayed,\n        triggeredBy: persistedItem.triggerSource ? 'mvu' : 'base',\n        triggerSource: persistedItem.triggerSource,\n    };\n}\n/**\n * [工厂 V3.0] 创建一个全新的、状态初始化的 QueueItem。\n * @param config - 一个包含所有必要信息的配置对象。\n * @returns {QueueItem | null} 一个完整的队列项，或在失败时返回 null。\n */\nfunction createQueueItem(config) {\n    const { playlistId } = config;\n    if (!playlistId || !allPlaylists[playlistId]) {\n        logProbe(`[Factory] 创建队列项失败：请求的歌单ID \"${playlistId}\" 不存在。`, 'error');\n        return null;\n    }\n    const playlistConfig = allPlaylists[playlistId];\n    const baseItem = {\n        playlistId: playlistId,\n        playlistContent: _.cloneDeep(playlistConfig.tracks),\n        currentIndex: 0,\n        playedIndices: new Set(),\n        wasEverPlayed: false,\n    };\n    if (config.type === 'base') {\n        return {\n            ...baseItem,\n            priority: -Infinity,\n            triggeredBy: 'base',\n            onFinishRule: playlistConfig.onFinishRule ?? 'loop',\n        };\n    }\n    else {\n        return {\n            ...baseItem,\n            priority: config.trigger.priority,\n            triggeredBy: 'mvu',\n            onFinishRule: playlistConfig.onFinishRule,\n            triggerSource: config.trigger,\n        };\n    }\n}\n// =================================================================\n// 7. 运行时初始化与播放器控制 (Runtime & Player Controls)\n// =================================================================\nasync function initializePlayerForChat(config, authoritativeState, options) {\n    logProbe('=== 开始执行【核心·自愈式初始化】 V9.0 ===', 'group');\n    try {\n        // --- 【准备阶段】 清理与重置 ---\n        isCorePlayerInitialized = true;\n        // 注意：StateReset 会重置内存，所以我们需要先读档，再根据读档结果恢复必要的记忆\n        const savedState = readState();\n        StateManager.resetState();\n        if (savedState) {\n            // 恢复基础状态（此时 active_queue 还是空的，将在后面重建）\n            StateManager.loadState(savedState);\n        }\n        MvuManager.resetState();\n        MvuManager.initialize();\n        const activePlayer = PlaybackEngine.getActivePlayer();\n        if (activePlayer)\n            activePlayer.pause();\n        triggers = [];\n        allPlaylists = {};\n        defaultPlaylistId = '';\n        if (!config) {\n            logProbe('[Initializer] 配置无效，初始化中止。', 'error');\n            broadcastFullState();\n            throw new Error('世界书音乐配置解析失败，请检查配置。');\n        }\n        allPlaylists = config.playlists;\n        defaultPlaylistId = config.defaultId;\n        triggers = config.triggers;\n        const currentStatData = authoritativeState?.mvuData?.stat_data ?? null;\n        const authoritativeMessageId = authoritativeState?.messageId;\n        let finalQueue = [];\n        // --- 【第一步】 确定并验证权威的基础歌单 ID ---\n        let correctBasePlaylistId = defaultPlaylistId;\n        const msgZero = getChatMessages(0, { include_swipes: true })[0];\n        const currentSwipeId = msgZero?.swipe_id ?? 0;\n        if (msgZero) {\n            const currentGreeting = msgZero.swipes?.[msgZero.swipe_id];\n            const tagMatch = currentGreeting?.match(/<playlist:([^>]+)>/);\n            if (tagMatch && tagMatch[1]) {\n                const tagPlaylistId = tagMatch[1];\n                if (allPlaylists[tagPlaylistId]) {\n                    logProbe(`[Initializer-Heal] (基准) 从开场白标签确定权威基础歌单: \"${tagPlaylistId}\"`);\n                    correctBasePlaylistId = tagPlaylistId;\n                }\n                else {\n                    const errorMsg = `[MusicConfig] 配置警告: 开场白标签 <playlist:${tagPlaylistId}> 指向了一个不存在的歌单ID。将回退至默认歌单。`;\n                    logProbe(errorMsg, 'warn');\n                    toastr.warning(errorMsg, '配置警告', { timeOut: 15000 });\n                }\n            }\n            else {\n                logProbe(`[Initializer-Heal] (基准) 开场白无标签，使用世界书默认歌单: \"${defaultPlaylistId ?? '无'}\"`);\n            }\n        }\n        const lastSwipeId = StateManager.getLastActiveSwipeId();\n        if (lastSwipeId !== null && lastSwipeId !== currentSwipeId) {\n            logProbe(`[Initializer] (上下文切换) 检测到平行宇宙跃迁: Swipe ${lastSwipeId} -> ${currentSwipeId}。`, 'warn');\n            logProbe(`[Initializer] (决策) 旧时间线的墓志铭已失效，正在清空...`);\n            StateManager.clearFinishedBasePlaylists();\n        }\n        else {\n            logProbe(`[Initializer] (上下文保持) 同一时间线 (Swipe ${currentSwipeId})，保持墓志铭记录。`);\n        }\n        // 更新当前锚点\n        StateManager.setLastActiveSwipeId(currentSwipeId);\n        // [新增] 检查 4: 基础歌单与场景歌单冲突检查\n        if (correctBasePlaylistId) {\n            const scenePlaylistIds = new Set(triggers.map(t => t.playlist_id));\n            if (scenePlaylistIds.has(correctBasePlaylistId)) {\n                const fatalErrorMsg = `[MusicConfig] 致命配置错误: 歌单 \"${correctBasePlaylistId}\" 不能同时被用作基础歌单（在开场白或默认设置中）和场景歌单（被触发器关联）。请为它们使用不同的歌单。`;\n                logProbe(fatalErrorMsg, 'error');\n                toastr.error(fatalErrorMsg, '配置冲突', { timeOut: 20000, closeButton: true });\n                throw new Error('基础歌单与场景歌单存在致命冲突。');\n            }\n        }\n        // --- 【第二步】 队列净化与重建 (Heal the Past) ---\n        if (savedState) {\n            logProbe('[Initializer-Heal] (净化) 开始审查存档...', 'groupCollapsed');\n            const healedQueue = [];\n            // 注意：此时我们使用的是 savedState.active_queue，而不是 StateManager 中的（因为 resetState 会清空）\n            for (const persistedItem of savedState.active_queue) {\n                if (!Object.prototype.hasOwnProperty.call(allPlaylists, persistedItem.playlistId)) {\n                    logProbe(`(净化-丢弃) 存档歌单 \"${persistedItem.playlistId}\" 已不存在。`, 'warn');\n                    continue;\n                }\n                const playlistConfig = allPlaylists[persistedItem.playlistId];\n                const isBaseItem = !persistedItem.triggerSource;\n                if (isBaseItem) {\n                    if (persistedItem.playlistId === correctBasePlaylistId) {\n                        logProbe(`(净化-保留) 基础歌单 \"${persistedItem.playlistId}\" 仍然有效。`);\n                        healedQueue.push(reconstituteQueueItem(persistedItem, playlistConfig));\n                    }\n                    else {\n                        logProbe(`(净化-丢弃) 基础歌单 \"${persistedItem.playlistId}\" 已被新的权威歌单 \"${correctBasePlaylistId ?? '无'}\" 替代。`, 'warn');\n                    }\n                }\n                else {\n                    const currentTrigger = triggers.find(t => t.playlist_id === persistedItem.playlistId);\n                    logProbe(`(探针-净化) 正在审查存档的MVU歌单 \"${persistedItem.playlistId}\"...`);\n                    if (playlistConfig.onFinishRule === 'pop') {\n                        logProbe(`(净化-丢弃) 原因：规则为 'pop' (场景歌单不应跨会话保留)。`);\n                        continue;\n                    }\n                    if (!currentTrigger) {\n                        logProbe(`(净化-丢弃) 原因：在最新的世界书配置中已找不到对应的触发器。`, 'warn');\n                        continue;\n                    }\n                    if (!MvuManager.checkTriggerCondition(currentTrigger, currentStatData)) {\n                        logProbe(`(净化-丢弃) 原因：最新的触发器条件在当前状态下不满足。`);\n                        continue;\n                    }\n                    logProbe(`(净化-保留) 验证通过。`);\n                    healedQueue.push(reconstituteQueueItem(persistedItem, playlistConfig));\n                }\n            }\n            finalQueue = healedQueue;\n            logProbe('[Initializer-Heal] (净化) 审查完成。', 'groupEnd');\n        }\n        // --- 【第三步】 队列补充 ---\n        if (currentStatData && triggers.length > 0) {\n            logProbe('[Initializer-Heal] (补充) 正在检查是否有新激活的场景歌单...', 'groupCollapsed');\n            for (const trigger of triggers) {\n                const alreadyExists = finalQueue.some(item => item.triggerSource && areTriggersFunctionallyEqual(item.triggerSource, trigger));\n                if (!alreadyExists && MvuManager.checkTriggerCondition(trigger, currentStatData)) {\n                    const playlistConfig = allPlaylists[trigger.playlist_id];\n                    if (playlistConfig && playlistConfig.onFinishRule === 'pop') {\n                        if (authoritativeMessageId === 0) {\n                            logProbe(`(补充) 允许添加 'pop' 歌单 \"${trigger.playlist_id}\"，因为上下文是开场白。`);\n                            const newItem = createQueueItem({ type: 'mvu', playlistId: trigger.playlist_id, trigger: trigger });\n                            if (newItem)\n                                finalQueue.push(newItem);\n                        }\n                        else {\n                            logProbe(`(补充-阻止) 场景歌单 \"${trigger.playlist_id}\" 因规则为 'pop' 且上下文非开场白而被忽略。`, 'warn');\n                        }\n                    }\n                    else {\n                        const newItem = createQueueItem({ type: 'mvu', playlistId: trigger.playlist_id, trigger: trigger });\n                        if (newItem)\n                            finalQueue.push(newItem);\n                    }\n                }\n            }\n            logProbe('[Initializer-Heal] (补充) 检查完成。', 'groupEnd');\n        }\n        // --- 【第四步】 基础歌单最终注入 (Final Guarantee V2.0) ---\n        const basePlaylistExists = finalQueue.some(item => item.triggeredBy === 'base');\n        if (!basePlaylistExists && correctBasePlaylistId && allPlaylists[correctBasePlaylistId]) {\n            const isDead = StateManager.getFinishedBasePlaylists().has(correctBasePlaylistId);\n            if (isDead) {\n                logProbe(`[Initializer-Heal] (注入-阻止) 基础歌单 \"${correctBasePlaylistId}\" 在此上下文(Swipe ${currentSwipeId})中已完结(墓志铭在册)。尊重历史，拒绝复活。`);\n            }\n            else {\n                logProbe(`[Initializer-Heal] (注入) 最终注入权威基础歌单 \"${correctBasePlaylistId}\"。`);\n                const baseItem = createQueueItem({ type: 'base', playlistId: correctBasePlaylistId });\n                if (baseItem)\n                    finalQueue.push(baseItem);\n            }\n        }\n        // --- 【第五步】 最终加载与后续设置 ---\n        logProbe('[Initializer-Finalize] 正在提交最终队列并完成设置...');\n        StateManager.updateQueue(finalQueue);\n        // 注意：如果 resetState 重置了模式，我们需要从 savedState 恢复，或者使用默认\n        // 之前的代码是在 resetState 后直接覆盖，但这里我们利用 loadState 已经恢复了一部分\n        // 我们需要确保 StrategyManager 同步\n        const mode = StateManager.getPlaybackMode();\n        StrategyManager.setMode(mode);\n        logProbe(`(探针) 策略模式已同步为: ${mode}`);\n        StrategyManager.notifyQueueChanged();\n        PlaybackEngine.initialize();\n        const volume = StateManager.getVolume();\n        if (PlaybackEngine.getActivePlayer())\n            PlaybackEngine.getActivePlayer().volume = volume;\n        if (PlaybackEngine.getStandbyPlayer())\n            PlaybackEngine.getStandbyPlayer().volume = 0;\n        const initialTopItem = StateManager.getTopQueueItem();\n        if (initialTopItem) {\n            const track = initialTopItem.playlistContent[initialTopItem.currentIndex];\n            if (track && PlaybackEngine.getActivePlayer()) {\n                PlaybackEngine.getActivePlayer().src = track.url;\n            }\n        }\n        else {\n            logProbe(`[Initializer] (探针) 最终队列为空（可能因基础歌单已完结），不执行音频预加载。`);\n        }\n        if (currentStatData) {\n            await MvuManager.persistCurrentState(currentStatData);\n            logProbe('[Initializer-Finalize]  已将本次创世的权威MVU状态持久化为历史基准。');\n        }\n        else {\n            await MvuManager.persistCurrentState({});\n            logProbe('[Initializer-Finalize] 当前无MVU状态，已将空状态持久化为历史基准。');\n        }\n        await writeState('initialization');\n        broadcastFullState();\n        if (options?.autoPlayIfWasPlaying) {\n            logProbe('[Initializer] (探针) 检测到来自开场白滑动的“自动播放”意图。', 'warn');\n            const currentItem = StateManager.getTopQueueItem();\n            if (currentItem) {\n                logProbe('[Initializer] 新的开场白已配置歌单，将执行“创世播放”...');\n                await _handleGenesisPlay();\n            }\n            else {\n                logProbe('[Initializer] 新的开场白未配置歌单，自动播放已取消。');\n            }\n        }\n    }\n    catch (error) {\n        logProbe(`[Initializer] 核心初始化过程中发生严重错误: ${error}`, 'error');\n        console.error(error);\n        throw error;\n    }\n    finally {\n        logProbe('=== 【核心·自愈式初始化】执行完毕 ===', 'groupEnd');\n    }\n}\n/**\n * @description 【V8.2 核心】播放执行器。\n *              它的单一职责是：接收一个目标索引，并尝试播放它。\n *              它会返回一个 Promise，成功时 resolve，失败时 reject，将错误冒泡给调用者处理。\n *              它自身不包含任何重试或自愈逻辑。\n */\nasync function _executeTransition(targetIndex) {\n    logProbe(`[Executor] 收到播放指令，目标索引: ${targetIndex}`, 'group');\n    const freshItem = StateManager.getTopQueueItem();\n    if (!freshItem) {\n        logProbe(`[Executor] 执行中止：无有效队列项`, 'warn');\n        logProbe('', 'groupEnd');\n        return Promise.resolve();\n    }\n    const targetTrack = freshItem.playlistContent[targetIndex];\n    if (!targetTrack?.url) {\n        logProbe(`[Executor] 执行失败：在索引 ${targetIndex} 处找不到音轨或音轨URL无效。`, 'error');\n        logProbe('', 'groupEnd');\n        throw new Error(`Invalid track at index ${targetIndex}`);\n    }\n    try {\n        await PlaybackEngine.transitionToTrack(targetTrack.url, StateManager.getVolume());\n        StateManager.setPlaybackState('PLAYING');\n        prepareNextTrack();\n        logProbe(`[Executor] 索引 ${targetIndex} 播放成功。`);\n    }\n    catch (error) {\n        logProbe(`[Executor] PlaybackEngine报告播放失败。原因: ${error}`, 'error');\n        throw error;\n    }\n    finally {\n        logProbe('', 'groupEnd');\n    }\n}\n/**\n * @description 【V8.2 核心】迭代式自愈循环。\n *              此最终版严格遵守 SRP 原则，将决策应用逻辑完全委托给 _applyNavigationDecision。\n */\nasync function _executeSelfHealingLoop() {\n    logProbe('[SelfHeal] 启动“迭代式自愈循环”... 播放器进入紧急自愈模式。', 'warn');\n    let consecutiveFailures = 1;\n    const currentItemForThreshold = StateManager.getTopQueueItem();\n    const threshold = currentItemForThreshold?.playlistContent.length ?? 0;\n    if (currentItemForThreshold) {\n        toastr.error(`歌曲《${currentItemForThreshold.playlistContent[currentItemForThreshold.currentIndex]?.歌名 ?? '未知歌曲'}》加载失败，正在尝试自动处理...`);\n    }\n    while (true) {\n        if (threshold > 0 && consecutiveFailures >= threshold) {\n            logProbe(`[SelfHeal] (熔断器) 连续失败 ${consecutiveFailures} 次，已达到或超过阈值 ${threshold}。自愈中止。`, 'error');\n            if (currentItemForThreshold) {\n                toastr.error(`歌单《${currentItemForThreshold.playlistId}》中所有歌曲均无法加载，播放已停止。`);\n            }\n            StateManager.setPlaybackState('STOPPED');\n            broadcastFullState();\n            return;\n        }\n        const currentItem = StateManager.getTopQueueItem();\n        if (!currentItem) {\n            logProbe('[SelfHeal] 自愈中止：中途队列变空。', 'warn');\n            StateManager.setPlaybackState('STOPPED');\n            broadcastFullState();\n            return;\n        }\n        const errorDecision = StrategyManager.getCurrentStrategy().onPlaybackError(currentItem);\n        logProbe(`[SelfHeal] 收到策略 (${StrategyManager.getCurrentStrategy().constructor.name}) 的错误决策: { action: '${errorDecision.action}' }`);\n        const directive = await _applyNavigationDecision(errorDecision);\n        if (!directive.needsAsyncEffect) {\n            logProbe('[SelfHeal] 决策应用后无需播放，自愈中止。');\n            // 注意：applyNavigationDecision 内部已经处理了 setPlaying(false) 和广播\n            return;\n        }\n        // 防御性编程：确保 targetIndex 存在\n        if (typeof directive.targetIndex !== 'number') {\n            logProbe('[SelfHeal] 决策应用后需要播放，但没有有效的 targetIndex。自愈中止。', 'error');\n            StateManager.setPlaybackState('STOPPED');\n            broadcastFullState();\n            return;\n        }\n        // 步骤 4: 再次尝试播放\n        try {\n            await _executeTransition(directive.targetIndex);\n            logProbe('[SelfHeal] 播放成功，自愈循环结束。', 'log');\n            broadcastFullState();\n            return;\n        }\n        catch (nextError) {\n            consecutiveFailures++;\n            const nextTopItem = StateManager.getTopQueueItem();\n            const nextTrackTitle = nextTopItem?.playlistContent[nextTopItem.currentIndex]?.歌名 ?? '未知歌曲';\n            logProbe(`[SelfHeal] 第 ${consecutiveFailures} 次播放失败:`, 'error');\n            console.error(nextError);\n            toastr.error(`下一首《${nextTrackTitle}》加载失败...`);\n        }\n    }\n}\nasync function _applyNavigationDecision(decision) {\n    logProbe(`[CentralCommand] 正在应用策略决策: { action: '${decision.action}', nextIndex: ${decision.nextIndex ?? 'N/A'} }`, 'group');\n    let needsAsyncEffect = false;\n    let targetIndex;\n    const currentItem = StateManager.getTopQueueItem();\n    switch (decision.action) {\n        case 'GoTo': {\n            if (typeof decision.nextIndex === 'number') {\n                logProbe('[CentralCommand] 指令: GoTo。提交导航步骤...');\n                StateManager.commitNavigationStep(decision.nextIndex);\n                needsAsyncEffect = true;\n                targetIndex = decision.nextIndex;\n            }\n            else {\n                logProbe('[CentralCommand] 致命逻辑错误: GoTo 指令缺少 nextIndex！这是一个策略模块的BUG。', 'error');\n                console.error('探针捕获：错误的决策对象:', decision);\n                console.error('探针捕获：发生错误时的播放器状态:', StateManager.getStateSnapshotForRuntime());\n                needsAsyncEffect = false;\n            }\n            break;\n        }\n        case 'Restart': {\n            logProbe('[CentralCommand] 指令: Restart。请求从头重播当前轨道。');\n            if (currentItem) {\n                logProbe('[CentralCommand] (探针) 此决策不改变状态索引，仅生成一个效果指令。');\n                needsAsyncEffect = true;\n                targetIndex = currentItem.currentIndex;\n            }\n            break;\n        }\n        case 'RemoveTopAndAdvance': {\n            logProbe('[CentralCommand] 指令: RemoveTopAndAdvance。正在执行【自洽式】队列修改与过渡...');\n            const itemToRemove = StateManager.getTopQueueItem();\n            if (itemToRemove && itemToRemove.triggeredBy === 'base' && itemToRemove.onFinishRule === 'pop') {\n                logProbe(`[CentralCommand] (死亡登记) 基础歌单 \"${itemToRemove.playlistId}\" 即将离场`, 'warn');\n                StateManager.addToFinishedBasePlaylists(itemToRemove.playlistId);\n            }\n            const currentQueue = StateManager.getQueue();\n            const poppedItem = currentQueue.shift();\n            logProbe(`(探针) 已从队列中移除: \"${poppedItem?.playlistId}\"`);\n            StateManager.updateQueue(currentQueue);\n            logProbe('[CentralCommand] (握手) 正在通知 StrategyManager 队列已变更...');\n            StrategyManager.notifyQueueChanged();\n            const newTopItem = StateManager.getTopQueueItem();\n            if (newTopItem) {\n                logProbe(`(决策) 新队首为 \"${newTopItem.playlistId}\"，准备过渡到其当前索引: ${newTopItem.currentIndex}`);\n                needsAsyncEffect = true;\n                targetIndex = newTopItem.currentIndex;\n            }\n            else {\n                logProbe('(决策) 队列已空，停止播放。');\n                logProbe('[CentralCommand] (修复) 检测到队列清空，正在下达物理静音指令...');\n                await PlaybackEngine.fadeOutAndPause();\n                StateManager.setPlaybackState('STOPPED');\n                needsAsyncEffect = false;\n            }\n            break;\n        }\n        case 'LoopReset': {\n            logProbe('[CentralCommand] 指令: LoopReset。执行“指挥家模型”...', 'warn');\n            StateManager.resetCurrentItemForLoop();\n            const currentMode = StateManager.getPlaybackMode();\n            if (currentMode === 'random') {\n                logProbe('(指挥) 检测到随机模式，向作曲家索要新乐谱...');\n                const genesisPlan = StrategyManager.getCurrentStrategy().prepareGenesis(StateManager.getTopQueueItem());\n                if (genesisPlan) {\n                    StateManager.commitGenesisState(genesisPlan.newCurrentIndex, genesisPlan.newPlaybackPlan, genesisPlan.newPlanIndex);\n                }\n            }\n            const finalStartIndex = StateManager.getTopQueueItem()?.currentIndex ?? 0;\n            logProbe(`(指挥) 流程完成。最终确定的新起始索引为: ${finalStartIndex}`);\n            needsAsyncEffect = true;\n            targetIndex = finalStartIndex;\n            break;\n        }\n        case 'Stop': {\n            logProbe('[CentralCommand] 指令: Stop。停止播放。');\n            StateManager.setPlaybackState('STOPPED');\n            break;\n        }\n        case 'DoNothing':\n        default:\n            logProbe(`[CentralCommand] 指令: DoNothing。无状态变更。`);\n            break;\n    }\n    if (decision.action !== 'RemoveTopAndAdvance') {\n        broadcastFullState();\n    }\n    const directive = { needsAsyncEffect, targetIndex };\n    logProbe(`[CentralCommand] 决策应用完成。返回指令: { needsAsyncEffect: ${directive.needsAsyncEffect}, targetIndex: ${directive.targetIndex ?? 'N/A'} }`);\n    logProbe('', 'groupEnd');\n    return directive;\n}\n/**\n * @description [V9.6 净化] 释放效果锁并广播最终状态。\n *              这是所有异步控制器 finally 块中的标准“谢幕”程序。\n */\nasync function _releaseEffectLock() {\n    // 探针: 记录锁释放的动作，这对于调试UI卡死问题至关重要\n    logProbe('[LockManager] 正在释放效果锁并广播最终状态...');\n    StateManager.setPerformingEffect(false);\n    broadcastFullState();\n}\nasync function _handleTrackEnded() {\n    logProbe('[Controller:TrackEnd] === 开始处理轨道自然结束事件 ===', 'group');\n    if (StateManager.isPerformingEffect()) {\n        logProbe('[Controller:TrackEnd] 请求被拒绝，因为效果正在执行。', 'warn');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    const currentItem = StateManager.getTopQueueItem();\n    if (!currentItem) {\n        logProbe('[Controller:TrackEnd] 请求中止：队列为空。');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    try {\n        StateManager.setPerformingEffect(true);\n        broadcastFullState();\n        const decision = StrategyManager.getCurrentStrategy().onTrackEnd(currentItem);\n        const directive = await _applyNavigationDecision(decision);\n        if (directive.needsAsyncEffect && typeof directive.targetIndex === 'number') {\n            await _executeTransition(directive.targetIndex);\n        }\n    }\n    catch (error) {\n        logProbe(`[Controller:TrackEnd] 在执行效果时捕获到错误，将启动自愈循环...`, 'error');\n        console.error(error);\n        await _executeSelfHealingLoop();\n    }\n    finally {\n        await _releaseEffectLock();\n        await writeState('trackEnded');\n        logProbe('[Controller:TrackEnd] === 轨道结束事件处理完毕 (锁已通过调度器释放) ===', 'groupEnd');\n    }\n}\n// =================================================================\n// 8. 全局API与事件系统 (Global API & Event System)\n// =================================================================\nasync function _handleNavigation(direction) {\n    logProbe(`[Controller:Nav] === 开始处理用户导航事件 (方向: ${direction}) ===`, 'group');\n    if (StateManager.isPerformingEffect()) {\n        logProbe(`[Controller:Nav] 请求被拒绝，因为效果正在执行。`, 'warn');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    const currentItem = StateManager.getTopQueueItem();\n    if (!currentItem) {\n        logProbe(`[Controller:Nav] 请求中止：队列为空。`);\n        logProbe('', 'groupEnd');\n        return;\n    }\n    try {\n        StateManager.setPerformingEffect(true);\n        broadcastFullState();\n        const decision = StrategyManager.getCurrentStrategy().advance(currentItem, direction);\n        const directive = await _applyNavigationDecision(decision);\n        logProbe(`[Controller:Nav] (探针) 原始决策: ${decision.action}, 处理指令: needsAsyncEffect=${directive.needsAsyncEffect}`);\n        if (decision.action === 'Restart') {\n            logProbe(`[Controller:Nav] 检测到 Restart 决策，执行 seek(0) 效果。`);\n            const activePlayer = PlaybackEngine.getActivePlayer();\n            if (activePlayer)\n                activePlayer.currentTime = 0;\n            if (StateManager.getPlaybackMode() !== 'single') {\n                toastr.info('已是第一首');\n            }\n        }\n        else if (directive.needsAsyncEffect && typeof directive.targetIndex === 'number') {\n            await _executeTransition(directive.targetIndex);\n        }\n        else if (decision.action === 'DoNothing') {\n            toastr.info(direction === 'next' ? '已是歌单最后一首。' : '已是歌单第一首。');\n        }\n    }\n    catch (error) {\n        logProbe(`[Controller:Nav] 在执行效果时捕获到错误，将启动自愈循环...`, 'error');\n        console.error(error);\n        await _executeSelfHealingLoop();\n    }\n    finally {\n        await _releaseEffectLock();\n        await writeState('navigation');\n        logProbe(`[Controller:Nav] === 用户导航事件处理完毕 (锁已通过调度器释放) ===`, 'groupEnd');\n    }\n}\n/**\n * [内部核心] 执行创世播放的实际逻辑。\n * 注意：此函数不检查也不设置效果锁，调用者必须确保已持有锁。\n */\nasync function _executeGenesisPlayInternal(targetIndex) {\n    logProbe(`[Internal:Genesis] (动作) 执行内部创世播放逻辑 (目标索引: ${targetIndex})...`);\n    StateManager.setPlaybackState('PLAYING');\n    broadcastFullState();\n    await _executeTransition(targetIndex);\n}\nasync function _handleGenesisPlay() {\n    if (StateManager.isPerformingEffect()) {\n        logProbe('[Controller:Genesis] 请求被拒绝，因为效果正在执行。', 'warn');\n        return;\n    }\n    const currentItem = StateManager.getTopQueueItem();\n    if (!currentItem) {\n        logProbe('[Controller:Genesis] 请求中止：播放列表为空。');\n        return;\n    }\n    try {\n        StateManager.setPerformingEffect(true);\n        logProbe(`[Controller:Genesis] === “创世播放”效果开始 (目标索引: ${currentItem.currentIndex}) ===`, 'group');\n        await _executeGenesisPlayInternal(currentItem.currentIndex);\n    }\n    catch (error) {\n        logProbe(`[Controller:Genesis] “创世播放”效果执行时发生意外顶层错误: ${error}`, 'error');\n        StateManager.setPlaybackState('STOPPED');\n        broadcastFullState();\n    }\n    finally {\n        await _releaseEffectLock();\n        await writeState('genesisPlay');\n        logProbe(`[Controller:Genesis] === “创世播放”效果结束 (锁已通过调度器释放) ===`, 'groupEnd');\n    }\n}\nasync function _handlePlayIndex(index) {\n    logProbe(`[Controller:PlayIndex] === 开始处理索引播放事件 (目标: ${index}) ===`, 'group');\n    if (StateManager.isPerformingEffect()) {\n        logProbe(`[Controller:PlayIndex] 请求被拒绝，因为效果正在执行。`, 'warn');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    try {\n        StateManager.setPerformingEffect(true);\n        broadcastFullState();\n        const currentItem = StateManager.getTopQueueItem();\n        const currentMode = StateManager.getPlaybackMode();\n        if (currentItem && index === currentItem.currentIndex) {\n            logProbe(`[Controller:PlayIndex] (决策) 用户点击了当前歌曲，将从头重播。`);\n            const activePlayer = PlaybackEngine.getActivePlayer();\n            if (activePlayer)\n                activePlayer.currentTime = 0;\n        }\n        else if (currentMode === 'list' || currentMode === 'single') {\n            logProbe(`[Controller:PlayIndex] (决策) ${currentMode} 模式，执行标准跳转...`);\n            StateManager.setCurrentIndex(index);\n            await _executeTransition(index);\n        }\n        else if (currentMode === 'random') {\n            logProbe(`[Controller:PlayIndex] (决策) random 模式，执行“用户跳转”高级逻辑...`);\n            StateManager.userInitiatedJump(index);\n            await _executeTransition(index);\n        }\n    }\n    catch (error) {\n        logProbe(`[Controller:PlayIndex] 在执行效果时捕获到错误，将启动自愈循环...`, 'error');\n        console.error(error);\n        await _executeSelfHealingLoop();\n    }\n    finally {\n        await _releaseEffectLock();\n        await writeState('playIndex');\n        logProbe(`[Controller:PlayIndex] === 索引播放事件处理完毕 (锁已通过调度器释放) ===`, 'groupEnd');\n    }\n}\nasync function togglePlayPause() {\n    logProbe('[Controller:Toggle] === 开始处理播放/暂停切换事件 (三态机版) ===', 'group');\n    // 1. 效果锁检查\n    if (StateManager.isPerformingEffect()) {\n        logProbe('[Controller:Toggle] 请求被拒绝，因为效果正在执行。', 'warn');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    // 2. 空队列检查\n    const currentItem = StateManager.getTopQueueItem();\n    if (!currentItem) {\n        logProbe('[Controller:Toggle] 请求中止：播放列表为空。');\n        toastr.info('播放列表为空');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    try {\n        // 3. 上锁并广播\n        StateManager.setPerformingEffect(true);\n        broadcastFullState();\n        const currentState = StateManager.getPlaybackState();\n        logProbe(`[Controller:Toggle] 当前状态: ${currentState}`);\n        switch (currentState) {\n            case 'STOPPED': {\n                // [核心] 这是首次播放意图的关键点\n                logProbe('[Controller:Toggle] 决策: STOPPED -> PLAYING (视为创世播放)');\n                StateManager.setPlaybackState('PLAYING');\n                broadcastFullState();\n                // 尝试播放当前队首\n                // 如果是刚加载的歌单，currentIndex 应该是 0，或者是记忆中的位置\n                await _executeTransition(currentItem.currentIndex);\n                break;\n            }\n            case 'PLAYING': {\n                logProbe('[Controller:Toggle] 决策: PLAYING -> PAUSED');\n                StateManager.setPlaybackState('PAUSED');\n                broadcastFullState();\n                await PlaybackEngine.fadeOutAndPause();\n                break;\n            }\n            case 'PAUSED': {\n                logProbe('[Controller:Toggle] 决策: PAUSED -> PLAYING (恢复)');\n                StateManager.setPlaybackState('PLAYING');\n                broadcastFullState();\n                await PlaybackEngine.resumeAndFadeIn(StateManager.getVolume());\n                break;\n            }\n        }\n    }\n    catch (error) {\n        logProbe(`[Controller:Toggle] 在执行效果时捕获到错误，将启动自愈循环...`, 'error');\n        console.error(error);\n        await _executeSelfHealingLoop();\n    }\n    finally {\n        await _releaseEffectLock();\n        await writeState('togglePlayPause');\n        logProbe('[Controller:Toggle] === 播放/暂停切换事件处理完毕 (锁已通过调度器释放) ===', 'groupEnd');\n    }\n}\nfunction playNext() {\n    void _handleNavigation('next');\n}\nfunction playPrev() {\n    void _handleNavigation('prev');\n}\nfunction setupGlobalAPI() {\n    window.musicPlayerAPI = {\n        requestInitialization: () => {\n            if (isInitializedForThisChat) {\n                logProbe('[API] requestInitialization (已完成): 一个迟到的界面发来请求，立即返回成功契约。');\n                broadcastFullState();\n                return Promise.resolve();\n            }\n            if (!_initializationPromise) {\n                logProbe('[API] requestInitialization (首次): 第一个界面请求到达，正在创建【共享的】Promise契约...');\n                _initializationPromise = new Promise((resolve, reject) => {\n                    _initializationPromiseControls = { resolve, reject };\n                });\n            }\n            else {\n                logProbe('[API] requestInitialization (后续): 又一个界面请求到达，返回【已存在的】共享契约。');\n            }\n            return _initializationPromise;\n        },\n        togglePlayPause: () => togglePlayPause(),\n        playNext: () => playNext(),\n        playPrev: () => playPrev(),\n        playIndex: (index) => {\n            const currentItem = StateManager.getTopQueueItem();\n            if (currentItem && index >= 0 && index < currentItem.playlistContent.length) {\n                void _handlePlayIndex(index);\n            }\n        },\n        persistVolumeAndBroadcast: (volume) => {\n            const finalVolume = Math.max(0, Math.min(1, volume));\n            const activePlayer = PlaybackEngine.getActivePlayer();\n            StateManager.setVolume(finalVolume);\n            if (activePlayer && !StateManager.isPerformingEffect())\n                activePlayer.volume = finalVolume;\n            void writeState('persistVolume');\n            broadcastFullState();\n        },\n        setLiveVolume: (volume) => {\n            const activePlayer = PlaybackEngine.getActivePlayer();\n            if (activePlayer && !StateManager.isPerformingEffect())\n                activePlayer.volume = Math.max(0, Math.min(1, volume));\n        },\n        setPlaybackMode: (mode) => {\n            logProbe(`=== 开始执行【模式切换】事务 (请求: ${mode}) ===`, 'group');\n            const oldMode = StateManager.getPlaybackMode();\n            if (mode === oldMode) {\n                logProbe(`[ModeSwitch] 模式未变更 (仍为 ${mode})，事务提前中止。`);\n                logProbe('', 'groupEnd');\n                return;\n            }\n            StateManager.setPlaybackMode(mode);\n            StrategyManager.setMode(mode);\n            logProbe(`[ModeSwitch] 策略已切换为: ${StrategyManager.getCurrentStrategy().constructor.name}`);\n            if (oldMode === 'random') {\n                logProbe('[ModeSwitch] 正在为旧模式 \"random\" 执行“离开”生命周期钩子...');\n                StateManager.clearRandomModePlan();\n            }\n            if (mode === 'random') {\n                logProbe('[ModeSwitch] 正在为新模式 \"random\" 执行“进入”生命周期钩子...');\n                StrategyManager.notifyQueueChanged();\n            }\n            void writeState('setPlaybackMode');\n            broadcastFullState();\n            logProbe('=== 【模式切换】事务执行完毕 ===', 'groupEnd');\n        },\n        seekTo: (percentage) => {\n            const activePlayer = PlaybackEngine.getActivePlayer();\n            if (activePlayer?.duration)\n                activePlayer.currentTime = activePlayer.duration * percentage;\n        },\n        getCurrentState: () => {\n            const i = StateManager.getTopQueueItem();\n            const c = i?.playlistContent ?? [];\n            const x = i?.currentIndex ?? 0;\n            const stateToReturn = {\n                currentItem: c[x] ? { title: c[x].歌名, artist: c[x].歌手, cover: c[x].封面 } : null,\n                isPlaying: StateManager.isPlaying(),\n                playbackState: StateManager.getPlaybackState(),\n                playbackMode: StateManager.getPlaybackMode(),\n                masterVolume: StateManager.getVolume(),\n                playlist: c.map(t => ({ title: t.歌名, artist: t.歌手, cover: t.封面 })),\n                isTransitioning: StateManager.isPerformingEffect(),\n            };\n            logProbe('[探针 B] 前端主动调用 getCurrentState 获取初始状态，后台返回的数据如下:', 'warn');\n            console.dir(stateToReturn);\n            return stateToReturn;\n        },\n        onFullStateUpdate: (c) => {\n            if (typeof c === 'function') {\n                fullStateUpdateCallbacks.push(c);\n                logProbe(`[API] 前端注册了 fullStateUpdate 监听器。当前监听数: ${fullStateUpdateCallbacks.length}`);\n                return () => {\n                    const index = fullStateUpdateCallbacks.indexOf(c);\n                    if (index > -1) {\n                        fullStateUpdateCallbacks.splice(index, 1);\n                        logProbe(`[API] 前端注销了 fullStateUpdate 监听器。剩余监听数: ${fullStateUpdateCallbacks.length}`);\n                    }\n                };\n            }\n            return () => { };\n        },\n        onTimeUpdate: (c) => {\n            if (typeof c === 'function') {\n                timeUpdateCallbacks.push(c);\n                return () => {\n                    const index = timeUpdateCallbacks.indexOf(c);\n                    if (index > -1) {\n                        timeUpdateCallbacks.splice(index, 1);\n                    }\n                };\n            }\n            return () => { };\n        },\n    };\n    initializeGlobal('musicPlayerAPI', window.musicPlayerAPI);\n}\n// =================================================================\n// 9. 酒馆集成与主执行区 (Tavern Integration & Main Execution)\n// =================================================================\nfunction executeHardReset() {\n    logProbe('[HardReset] “优雅停机”协议启动...', 'warn');\n    isScriptActive = false;\n    PlaybackEngine.getActivePlayer()?.pause();\n    logProbe('[HardReset] 音频已暂停。');\n    logProbe('[HardReset] 即将调用 reloadIframe()。');\n    reloadIframe();\n}\nasync function tryInitialize() {\n    if (isInitializedForThisChat)\n        return;\n    const currentChatId = SillyTavern.getCurrentChatId ? SillyTavern.getCurrentChatId() : null;\n    if (SillyTavern.chat.length > 0 && currentChatId !== null) {\n        // [原则: SRP] isInitializedForThisChat 标志现在是这个函数的“守卫”，确保初始化只执行一次。\n        isInitializedForThisChat = true;\n        _currentChatId = currentChatId;\n        logProbe(`【初始化指挥官 V9.8】锁定ID: ${_currentChatId}，开始执行“分流-等待-执行”协议...`, 'group');\n        try {\n            // --- 步骤一：检测 (Detect) ---\n            // [原则: SSoT] 初始化流程的第一个动作，就是获取“世界书”这个唯一事实来源。\n            const config = await parseWorldbookConfig();\n            if (!config) {\n                throw new Error('无法解析世界书配置，初始化中止。');\n            }\n            const isMvuCard = config.triggers && Array.isArray(config.triggers) && config.triggers.length > 0;\n            logProbe(`(探针-决策) 作者意图判断 -> 是MVU卡吗? ${isMvuCard}`);\n            // --- 步骤二：分流 (Branch) & 等待 (Wait) ---\n            if (isMvuCard) {\n                logProbe('【指挥官】(路径选择) 检测到MVU卡，进入“安全路径”，开始等待MVU就绪...');\n                // [原则: CQS] _waitForMvuGenesis 是一个“查询”，它询问外部环境状态，直到满足条件。\n                const mvuIsReady = await _waitForMvuGenesis();\n                if (!mvuIsReady) {\n                    throw new Error('MVU集成初始化失败或超时，部分功能将不可用。');\n                }\n                logProbe('【指挥官】MVU已完全就绪，可以安全继续。');\n            }\n            else {\n                logProbe('【指挥官】(路径选择) 检测到纯文字卡，进入“快速路径”。');\n            }\n            // --- 步骤三：执行 (Execute) ---\n            logProbe('【指挥官】所有前置条件满足，开始执行播放器核心初始化...');\n            let authoritativeState = null;\n            if (isMvuCard) {\n                logProbe('【指挥官】(查询) 正在为MVU卡查找权威状态...');\n                authoritativeState = await _findLatestAuthoritativeMvuState();\n            }\n            else {\n                logProbe('【指挥官】(跳过) 纯文字卡，无需查找MVU状态。');\n            }\n            await initializePlayerForChat(config, authoritativeState);\n            _registerContextualEventListeners();\n            if (_initializationPromiseControls) {\n                logProbe('【指挥官】(探针) 后台初始化成功，兑现 Promise 契约，唤醒前端。');\n                _initializationPromiseControls.resolve();\n            }\n        }\n        catch (error) {\n            logProbe(`【指挥官】在初始化主流程中发生严重错误: ${error}`, 'error');\n            // 如果发生任何错误，都要通知前端，让它显示错误信息\n            if (_initializationPromiseControls) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                _initializationPromiseControls.reject(errorMessage);\n            }\n        }\n        finally {\n            _initializationPromiseControls = null;\n            logProbe('【初始化指挥官 V9.8】协议执行完毕。', 'groupEnd');\n        }\n    }\n}\nfunction _registerMvuEventListeners() {\n    logProbe('[EventDispatcher] 正在注册【运行时】MVU 事件监听器...');\n    const createReconcileHandler = (eventName) => {\n        return (eventPayload) => {\n            if (!isMvuIntegrationActive || !isCorePlayerInitialized) {\n                logProbe(`[Gatekeeper] 捕获到MVU事件 (${eventName})，但系统未就绪，已忽略。`, 'warn');\n                return;\n            }\n            logProbe(`[Event] 捕获到MVU事件: ${eventName}，即将唤醒校准官...`);\n            // (SSoT原则) 将事件载荷这个“事实”直接传递给校准官\n            void _reconcilePlaylistQueue(eventPayload);\n        };\n    };\n    eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, createReconcileHandler('VARIABLE_UPDATE_ENDED'));\n    eventOn(tavern_events.MESSAGE_DELETED, createReconcileHandler('MESSAGE_DELETED'));\n    logProbe('[EventDispatcher] MVU监听器部署完毕。');\n}\n/**\n * [V9.1 核心处理器] 统一处理所有导致“运行时历史”变更的事件。\n * 职责：重新查找权威状态，然后调用校准官进行状态同步。\n * @param eventName - 触发此处理器的事件名，用于日志记录。\n */\nasync function _handleHistoryChangeEvent(eventName, options) {\n    logProbe(`[HistoryChange] 检测到历史变更事件: ${eventName}。`);\n    if (!isCorePlayerInitialized)\n        return;\n    if (triggers.length === 0) {\n        logProbe('[HistoryChange] (分流) 检测到纯文字模式 (无触发器)，跳过MVU状态查询与校准，直接执行 UI 检查。');\n        await _ensureUiVisibility();\n        return;\n    }\n    logProbe(`[HistoryChange-Probe] 正在查询最新的权威MVU状态...`);\n    const authoritativeState = await _findLatestAuthoritativeMvuState();\n    if (!authoritativeState?.mvuData) {\n        logProbe('[HistoryChange] (守门员) 未找到有效的权威状态。这在AI重新生成期间是正常现象。', 'warn');\n        logProbe('[HistoryChange] (守门员) 采取“静默等待”策略，本次校准已跳过。');\n        return;\n    }\n    console.log(`[HistoryChange-Probe] 查询完毕，这是找到的权威状态数据，请您审查：`);\n    console.dir(_.cloneDeep(authoritativeState?.mvuData));\n    await _reconcilePlaylistQueue(authoritativeState?.mvuData, options);\n    await _ensureUiVisibility();\n}\n/**\n * [V9.9 核心修正] 处理新AI消息渲染事件的专用处理器。\n * 它的职责是检查并立即注入 <playmusic/> 标签，以修复刷新竞态条件BUG。\n * (SRP: Single Responsibility Principle)\n * @param messageId - 由事件传来的消息ID。\n */\nasync function _handleNewAssistantMessage(messageId) {\n    logProbe(`[Injector] 捕获到 CHARACTER_MESSAGE_RENDERED 事件，message_id: ${messageId}`);\n    if (messageId === 0) {\n        logProbe(`[Injector] (探针) 操作中止：message_id 为 0 (开场白)，权限属于作者，无需注入。`);\n        return;\n    }\n    const topQueueItem = StateManager.getTopQueueItem();\n    if (!topQueueItem) {\n        logProbe(`[Injector] (守门员) 拒绝注入：当前播放队列为空。`);\n        return;\n    }\n    try {\n        const message = getChatMessages(messageId)?.[0];\n        if (message && message.role !== 'user' && !message.message.includes('<DarkBramblePlayer/>')) {\n            logProbe(`[Injector] (探针) 条件满足，立即为 message_id: ${messageId} 执行注入...`);\n            await setChatMessages([{ message_id: messageId, message: `${message.message}\\n<DarkBramblePlayer/>` }]);\n            logProbe(`[Injector] (探针) 注入成功。`);\n        }\n        else {\n            logProbe(`[Injector] (探针) 操作跳过：消息是用户发送的，或已包含标签。Role: ${message?.role}`);\n        }\n    }\n    catch (error) {\n        logProbe(`[Injector] 为 message_id: ${messageId} 注入标签时发生严重错误:`, 'error');\n        console.error(error);\n    }\n}\n/**\n * [V9.95 新增] UI 可见性卫士。\n * 职责：在 MVU 延迟加载或消息删除后，确保如果音乐在播放，界面一定存在。\n * 原则：SSoT (以队列状态为准), 鲁棒性 (补救缺失的 UI)\n */\nasync function _ensureUiVisibility() {\n    logProbe('[UiGuard] 正在检查界面一致性...', 'groupCollapsed');\n    const topQueueItem = StateManager.getTopQueueItem();\n    if (!topQueueItem) {\n        logProbe('[UiGuard] 队列为空，无需 UI。');\n        logProbe('', 'groupEnd');\n        return;\n    }\n    try {\n        const latestMessages = getChatMessages(-1);\n        if (!latestMessages || latestMessages.length === 0) {\n            logProbe('[UiGuard] 无法获取最新消息，检查中止。', 'warn');\n            logProbe('', 'groupEnd');\n            return;\n        }\n        const latestMsgObj = latestMessages[0];\n        if (latestMsgObj.message_id === 0) {\n            logProbe('[UiGuard] 最新消息是开场白 (message_id: 0)，拒绝执行补救注入。');\n            logProbe('', 'groupEnd');\n            return;\n        }\n        if (latestMsgObj.role === 'user') {\n            logProbe('[UiGuard] 最新消息是用户发言，拒绝执行补救注入。');\n            logProbe('', 'groupEnd');\n            return;\n        }\n        if (latestMsgObj.message && latestMsgObj.message.includes('<DarkBramblePlayer/>')) {\n            logProbe('[UiGuard] 最新消息已有播放器标签，无需操作。');\n            logProbe('', 'groupEnd');\n            return;\n        }\n        const messageId = latestMsgObj.message_id;\n        logProbe(`[UiGuard] 发现音乐正在播放但 UI 缺失，正在为 message_id: ${messageId} (${latestMsgObj.role}) 执行补救注入...`);\n        const newContent = `${latestMsgObj.message}\\n<DarkBramblePlayer/>`;\n        await setChatMessages([\n            {\n                message_id: messageId,\n                message: newContent,\n            },\n        ]);\n        logProbe('[UiGuard] 补救注入成功。');\n    }\n    catch (error) {\n        logProbe(`[UiGuard] 执行补救注入时发生错误: ${error}`, 'error');\n    }\n    finally {\n        logProbe('', 'groupEnd');\n    }\n}\n/**\n * [V9.0 核心] 执行一次“软重置”。\n * 这将在不刷新整个页面的情况下，重新执行完整的初始化流程。\n * 用于响应“开场白滑动”等根本性的上下文变更。\n */\nasync function _executeSoftReset(options) {\n    logProbe('[SoftReset] 检测到根本性上下文变更，启动“软重置”协议...', 'warn');\n    try {\n        const config = await parseWorldbookConfig();\n        logProbe('[SoftReset] 正在为新的开场白查找权威MVU状态...');\n        const authoritativeState = await _findLatestAuthoritativeMvuState();\n        await initializePlayerForChat(config, authoritativeState, options);\n    }\n    catch (error) {\n        logProbe('[SoftReset] 软重置过程中发生严重错误。', 'error');\n        console.error(error);\n    }\n}\nfunction _registerContextualEventListeners() {\n    logProbe('[EventDispatcher] 正在注册“上下文专属”事件监听器...');\n    eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, (id) => {\n        void _handleNewAssistantMessage(id);\n    });\n    eventOn(tavern_events.MESSAGE_SWIPED, (id) => {\n        logProbe(`[Event] 捕获到滑动事件 (message_id: ${id})。`);\n        if (!isCorePlayerInitialized)\n            return;\n        if (id === 0) {\n            logProbe('[Event-Swipe] 判断为开场白滑动，执行软重置...');\n            const wasPlaying = StateManager.isPlaying();\n            logProbe(`[Event-Swipe] (探针) 软重置前的播放状态: ${wasPlaying}`);\n            void _executeSoftReset({ autoPlayIfWasPlaying: wasPlaying });\n        }\n        else {\n            logProbe('[Event-Swipe] 判断为历史消息滑动，执行历史变更处理...');\n            void _handleHistoryChangeEvent('MESSAGE_SWIPED', { transitionEffect: 'hard' });\n        }\n    });\n    logProbe('[EventDispatcher] “上下文专属”事件监听器注册完毕。');\n}\n/**\n * [原则: SRP] 这个函数的单一职责是：作为一个返回 Promise 的“观察哨”，\n * 它只负责“等待MVU创世完成”这一件事。成功则 resolve(true)，失败或超时则 resolve(false)。\n * 所有后续操作（如注册事件）都作为成功后的“副作用”在内部执行。\n */\nasync function _waitForMvuGenesis() {\n    logProbe('【安全观察哨】已上岗，开始执行MVU就绪检查...', 'group');\n    try {\n        // [探针] 阶段一：等待 MVU 框架本身出现\n        await waitGlobalInitialized('Mvu');\n        logProbe('【观察哨】(探针) 阶段一成功：MVU 框架已加载。');\n    }\n    catch (e) {\n        logProbe(`【观察哨】(探针) 阶段一失败: ${e}。`, 'warn');\n        logProbe('【安全观察哨】任务失败。', 'groupEnd');\n        return false;\n    }\n    // [探针] 阶段二：轮询观察，等待 MVU 将初始数据写入消息楼层\n    const WATCHER_TIMEOUT = 10000;\n    const WATCHER_INTERVAL = 250;\n    const startTime = Date.now();\n    let isGenesisComplete = false;\n    logProbe('【观察哨】(探针) 阶段二开始：正在严密监视 message_id: 0 的创世数据...');\n    while (Date.now() - startTime < WATCHER_TIMEOUT) {\n        try {\n            const mvuData = await Mvu.getMvuData({ type: 'message', message_id: 0 });\n            if (mvuData && (mvuData.swipes_data || mvuData.stat_data)) {\n                logProbe('【观察哨】(探针) 阶段二成功：在消息楼层中确认到创世数据！');\n                isGenesisComplete = true;\n                break;\n            }\n        }\n        catch (error) {\n            /* 在MVU启动初期，查询失败是正常现象，静默处理 */\n        }\n        await new Promise(resolve => setTimeout(resolve, WATCHER_INTERVAL));\n    }\n    if (!isGenesisComplete) {\n        logProbe('【观察哨】(探针) 阶段二失败：观察超时！', 'error');\n        logProbe('【安全观察哨】任务失败。', 'groupEnd');\n        return false;\n    }\n    // [探针] 阶段三：所有条件满足，执行激活序列\n    logProbe('【观察哨】(探针) 阶段三开始：执行MVU集成激活序列...');\n    try {\n        _registerMvuEventListeners();\n        isMvuIntegrationActive = true;\n        logProbe('【观察哨】(探针) 阶段三成功：MVU集成已完全激活。');\n        logProbe('【安全观察哨】任务成功完成！', 'groupEnd');\n        return true;\n    }\n    catch (error) {\n        logProbe(`【观察哨】(探针) 阶段三失败：激活序列发生意外崩溃: ${error}`, 'error');\n        isMvuIntegrationActive = false;\n        logProbe('【安全观察哨】任务失败。', 'groupEnd');\n        return false;\n    }\n}\n$(() => {\n    logProbe('音乐播放器脚本 V8.4 “上下文感知” 启动');\n    PlaybackEngine.initialize();\n    setupGlobalAPI();\n    eventOn(tavern_events.CHAT_CHANGED, () => {\n        logProbe(`[硬重置] CHAT_CHANGED 事件触发，检测到聊天上下文变更。即将执行“优雅停机”协议。`, 'warn');\n        executeHardReset();\n    });\n    const observerInterval = setInterval(() => {\n        void tryInitialize();\n        if (isInitializedForThisChat) {\n            clearInterval(observerInterval);\n            logProbe('【观察者模型】初始化成功，观察者已销毁。');\n        }\n    }, 250);\n    setTimeout(() => {\n        if (!isInitializedForThisChat) {\n            clearInterval(observerInterval);\n            logProbe('【观察者模型】初始化超时！', 'error');\n            if (_initializationPromiseControls) {\n                _initializationPromiseControls.reject('Initialization timed out after 10 seconds.');\n                _initializationPromiseControls = null;\n            }\n        }\n    }, 10000);\n    $(window).on('pagehide', () => {\n        logProbe('PAGEHIDE 事件触发！', 'warn');\n        PlaybackEngine.getActivePlayer()?.pause();\n        logProbe('音频已暂停。');\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDO0lBRVYsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBQzVCLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUVuQyxjQUFjLENBQUMsZUFBZSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDMUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvc3JjL211c2ljcGxheWVyL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKCfpn7PkuZDmkq3mlL7lmajohJrmnKw4LjMuNOeJiOacrCcpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gMC4g6K+K5pat5bel5YW3IChEaWFnbm9zdGljIFRvb2xzKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmltcG9ydCB7IHosIFpvZEVycm9yIH0gZnJvbSAnem9kJztcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgbXVzaWNQbGF5ZXJBUEk6IGFueTtcbiAgfVxufVxuY29uc3QgU0NSSVBUX0xPQURfVElNRSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG5mdW5jdGlvbiBsb2dQcm9iZShtZXNzYWdlOiBzdHJpbmcsIHR5cGU6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdncm91cCcgfCAnZ3JvdXBDb2xsYXBzZWQnIHwgJ2dyb3VwRW5kJyA9ICdsb2cnKSB7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IGAoVCskeyhwZXJmb3JtYW5jZS5ub3coKSAtIFNDUklQVF9MT0FEX1RJTUUpLnRvRml4ZWQoMCl9bXMpYDtcbiAgY29uc3QgZmluYWxNZXNzYWdlID0gYCR7dGltZXN0YW1wfSAke21lc3NhZ2V9YDtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd3YXJuJzpcbiAgICAgIGNvbnNvbGUud2FybihmaW5hbE1lc3NhZ2UpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZXJyb3InOlxuICAgICAgY29uc29sZS5lcnJvcihmaW5hbE1lc3NhZ2UpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgY29uc29sZS5ncm91cChmaW5hbE1lc3NhZ2UpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZ3JvdXBDb2xsYXBzZWQnOlxuICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZChmaW5hbE1lc3NhZ2UpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZ3JvdXBFbmQnOlxuICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUubG9nKGZpbmFsTWVzc2FnZSk7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDEuIOexu+Wei+WumuS5iSAoVHlwZSBEZWZpbml0aW9ucylcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbnR5cGUgUGxheWxpc3RJdGVtID0ge1xuICB1cmw6IHN0cmluZztcbiAg5q2M5ZCNOiBzdHJpbmc7XG4gIOatjOaJiz86IHN0cmluZztcbiAg5bCB6Z2iPzogc3RyaW5nO1xufTtcblxudHlwZSBQbGF5bGlzdENvbmZpZyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdHJhY2tzOiBQbGF5bGlzdEl0ZW1bXTtcbiAgb25GaW5pc2hSdWxlOiAnbG9vcCcgfCAncG9wJztcbn07XG5cbnR5cGUgUXVldWVJdGVtID0ge1xuICAvLyAtLS0g5qC45b+D5qCH6K+G5LiO5o6S5bqP5L6d5o2uIC0tLVxuICBwbGF5bGlzdElkOiBzdHJpbmc7XG4gIHByaW9yaXR5OiBudW1iZXI7XG5cbiAgLy8gLS0tIOWGheWuueS4juinhOWImSAtLS1cbiAgcGxheWxpc3RDb250ZW50OiBQbGF5bGlzdEl0ZW1bXTtcbiAgb25GaW5pc2hSdWxlOiAnbG9vcCcgfCAncG9wJztcblxuICAvLyAtLS0g54q25oCB6K6w5b+GIC0tLVxuICBjdXJyZW50SW5kZXg6IG51bWJlcjtcbiAgcGxheWVkSW5kaWNlczogU2V0PG51bWJlcj47XG4gIHBsYXliYWNrUGxhbj86IG51bWJlcltdO1xuICBwbGFuSW5kZXg/OiBudW1iZXI7XG4gIHdhc0V2ZXJQbGF5ZWQ6IGJvb2xlYW47XG5cbiAgLy8gLS0tIOa6r+a6kOS/oeaBryAtLS1cbiAgdHJpZ2dlcmVkQnk6ICdiYXNlJyB8ICdtdnUnO1xuICB0cmlnZ2VyU291cmNlPzogei5pbmZlcjx0eXBlb2YgWm9kVHJpZ2dlckNvbmZpZz47XG59O1xuXG50eXBlIFBsYXliYWNrTW9kZSA9ICdsaXN0JyB8ICdzaW5nbGUnIHwgJ3JhbmRvbSc7XG5cbnR5cGUgRnVsbFN0YXRlUGF5bG9hZCA9IHtcbiAgY3VycmVudEl0ZW06IHsgdGl0bGU6IHN0cmluZzsgYXJ0aXN0Pzogc3RyaW5nOyBjb3Zlcj86IHN0cmluZyB9IHwgbnVsbDtcbiAgaXNQbGF5aW5nOiBib29sZWFuO1xuICBwbGF5YmFja1N0YXRlOiAnU1RPUFBFRCcgfCAnUExBWUlORycgfCAnUEFVU0VEJztcbiAgcGxheWJhY2tNb2RlOiBQbGF5YmFja01vZGU7XG4gIG1hc3RlclZvbHVtZTogbnVtYmVyO1xuICBwbGF5bGlzdDogeyB0aXRsZTogc3RyaW5nOyBhcnRpc3Q/OiBzdHJpbmc7IGNvdmVyPzogc3RyaW5nIH1bXTtcbiAgaXNUcmFuc2l0aW9uaW5nOiBib29sZWFuO1xufTtcblxudHlwZSBUaW1lVXBkYXRlUGF5bG9hZCA9IHtcbiAgY3VycmVudFRpbWU6IG51bWJlcjtcbiAgZHVyYXRpb246IG51bWJlcjtcbn07XG5cbnR5cGUgU3RyYXRlZ3lEZWNpc2lvbiA9IHtcbiAgYWN0aW9uOiAnR29UbycgfCAnUmVtb3ZlVG9wQW5kQWR2YW5jZScgfCAnUmVzdGFydCcgfCAnRG9Ob3RoaW5nJyB8ICdMb29wUmVzZXQnIHwgJ1N0b3AnO1xuICBuZXh0SW5kZXg/OiBudW1iZXI7XG59O1xuXG5pbnRlcmZhY2UgSVBsYXliYWNrU3RyYXRlZ3kge1xuICBvblF1ZXVlQ2hhbmdlZChjdXJyZW50SXRlbTogUXVldWVJdGVtIHwgdW5kZWZpbmVkKTogdm9pZDtcbiAgYWR2YW5jZShjdXJyZW50SXRlbTogUXVldWVJdGVtLCBkaXJlY3Rpb246ICduZXh0JyB8ICdwcmV2Jyk6IFN0cmF0ZWd5RGVjaXNpb247XG4gIG9uVHJhY2tFbmQoY3VycmVudEl0ZW06IFF1ZXVlSXRlbSk6IFN0cmF0ZWd5RGVjaXNpb247XG4gIG9uUGxheWJhY2tFcnJvcihjdXJyZW50SXRlbTogUXVldWVJdGVtKTogU3RyYXRlZ3lEZWNpc2lvbjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDEuMS4gWm9kIOi+ueeVjOmYsuW+oSBTY2hlbWFzIChab2QgQm9yZGVyIERlZmVuc2UgU2NoZW1hcylcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDmjqLpkog6IOi/meS6myBzY2hlbWFzIOS4jeS7heS7heaYr+exu+Wei++8jOWug+S7rOaYr+S4u+WKqOeahOmqjOivgeWZqO+8jOaYr+aIkeS7rOezu+e7n+eahOesrOS4gOmBk+mYsue6v+OAglxuLy8gICAgICAg5q+P5LiA5LiqIGByZXF1aXJlZF9lcnJvcmAg5ZKMIGBtZXNzYWdlYCDpg73mmK/kuIDkuKrlhoXnva7nmoTmjqLpkojvvIzlvZPlpJbpg6jmlbDmja5cbi8vICAgICAgIOS4jeespuWQiOaIkeS7rOeahOKAnOazleW+i+KAneaXtu+8jOWug+S7rOS8muiHquWKqOaKpeWRiumUmeivr+OAglxuLy8g5Y6f5YiZOiDljZXkuIDkuovlrp7mnaXmupAgKFNTb1QpIC0g5YWz5LqO5aSW6YOo5pWw5o2u5bqU6K+l6ZW/5LuA5LmI5qC355qE4oCc55yf55u44oCd77yM5Y+q55Sx6L+Z6YeM5a6a5LmJ44CCXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyDkuJbnlYzkuabpn7PovajphY3nva4gU2NoZW1hXG5leHBvcnQgY29uc3QgWm9kVHJhY2tDb25maWcgPSB6XG4gIC5vYmplY3Qoe1xuICAgIOatjOWQjTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIOatjOaJizogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIOWwgemdojogei5zdHJpbmcoKS51cmwoeyBtZXNzYWdlOiAn5bCB6Z2iVVJM5qC85byP5peg5pWIJyB9KS5vcHRpb25hbCgpLFxuICAgIHVybDogei5zdHJpbmcoKS51cmwoeyBtZXNzYWdlOiAn6Z+z6L2oVVJM5qC85byP5peg5pWIJyB9KSxcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG4vLyDlrprkuYnkuIDkuKrigJzljZXkuIDmnaHku7bigJ1cbmV4cG9ydCBjb25zdCBab2RTaW5nbGVDb25kaXRpb24gPSB6XG4gIC5vYmplY3Qoe1xuICAgIHZhcmlhYmxlX3BhdGg6IHouc3RyaW5nKCksXG4gICAgZ3JlYXRlcl90aGFuOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgZ3JlYXRlcl90aGFuX29yX2VxdWFsX3RvOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgbGVzc190aGFuOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgbGVzc190aGFuX29yX2VxdWFsX3RvOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgdmFsdWU6IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVtYmVyKCksIHouYm9vbGVhbigpXSkub3B0aW9uYWwoKSxcbiAgICB2YWx1ZV9jb250YWluczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHRpbWVfaW5fcmFuZ2U6IHpcbiAgICAgIC5zdHJpbmcoKVxuICAgICAgLnJlZ2V4KC9eXFxkezJ9OlxcZHsyfS1cXGR7Mn06XFxkezJ9JC8sIHtcbiAgICAgICAgbWVzc2FnZTogJ+aXtumXtOiMg+WbtOagvOW8j+W/hemhu+aYryBcIkhIOk1NLUhIOk1NXCInLFxuICAgICAgfSlcbiAgICAgIC5vcHRpb25hbCgpLFxuICB9KVxuICAuc3RyaWN0KCk7XG5cbi8vIOS4u+inpuWPkeWZqCBTY2hlbWEg5byV55So4oCc5Y2V5LiA5p2h5Lu24oCd55qE5pWw57uEXG5leHBvcnQgY29uc3QgWm9kVHJpZ2dlckNvbmZpZyA9IHpcbiAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtdnVfdmFyaWFibGUnKSxcbiAgICBwbGF5bGlzdF9pZDogei5zdHJpbmcoKSxcbiAgICBwcmlvcml0eTogei5udW1iZXIoKS5kZWZhdWx0KDApLFxuICAgIGNvbmRpdGlvbnM6IHouYXJyYXkoWm9kU2luZ2xlQ29uZGl0aW9uKS5ub25lbXB0eSh7IG1lc3NhZ2U6ICfop6blj5Hlmajlv4Xpobvoh7PlsJHljIXlkKvkuIDkuKrmnaHku7YnIH0pLFxuICB9KVxuICAuc3RyaWN0KCk7XG5cbi8vIOS4lueVjOS5puatjOWNlemFjee9riBTY2hlbWFcbmV4cG9ydCBjb25zdCBab2RQbGF5bGlzdENvbmZpZyA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIG9uRmluaXNoUnVsZTogei5lbnVtKFsnbG9vcCcsICdwb3AnXSwgeyBtZXNzYWdlOiBcIm9uRmluaXNoUnVsZSDlv4XpobvmmK8gJ2xvb3AnIOaIliAncG9wJ1wiIH0pLmRlZmF1bHQoJ2xvb3AnKSxcbiAgdHJhY2tzOiB6LmFycmF5KFpvZFRyYWNrQ29uZmlnKS5ub25lbXB0eSh7IG1lc3NhZ2U6IFwi5q2M5Y2V55qEICd0cmFja3MnIOWIl+ihqOS4jeiDveS4uuepulwiIH0pLFxufSk7XG5cbi8vIOS4lueVjOS5puaAu+mFjee9riBTY2hlbWEgKOi/meaYr+aIkeS7rOWwhuS9v+eUqOeahOmhtue6p+mqjOivgeWZqClcbmV4cG9ydCBjb25zdCBab2RXb3JsZGJvb2tDb25maWcgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGRlZmF1bHRfcGxheWxpc3RfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwbGF5bGlzdHM6IHouYXJyYXkoWm9kUGxheWxpc3RDb25maWcpLm9wdGlvbmFsKCksXG4gICAgdHJpZ2dlcnM6IHouYXJyYXkoWm9kVHJpZ2dlckNvbmZpZykub3B0aW9uYWwoKSxcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG4vLyDmjIHkuYXljJbnirbmgIEgLSDpmJ/liJfpobkgU2NoZW1hXG5leHBvcnQgY29uc3QgWm9kUXVldWVJdGVtU3RhdGUgPSB6Lm9iamVjdCh7XG4gIHBsYXlsaXN0SWQ6IHouc3RyaW5nKCksXG4gIGN1cnJlbnRJbmRleDogei5udW1iZXIoKS5kZWZhdWx0KDApLFxuICBwbGF5ZWRJbmRpY2VzOiB6LmFycmF5KHoubnVtYmVyKCkpLmRlZmF1bHQoW10pLFxuICB3YXNFdmVyUGxheWVkOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgdHJpZ2dlclNvdXJjZTogWm9kVHJpZ2dlckNvbmZpZy5vcHRpb25hbCgpLFxufSk7XG5cbi8vIOaMgeS5heWMlueKtuaAgSAtIOaAuyBTY2hlbWFcbmV4cG9ydCBjb25zdCBab2RQZXJzaXN0ZWRTdGF0ZSA9IHoub2JqZWN0KHtcbiAgYWN0aXZlX3F1ZXVlOiB6LmFycmF5KFpvZFF1ZXVlSXRlbVN0YXRlKSxcbiAgbW9kZTogei5lbnVtKFsnbGlzdCcsICdzaW5nbGUnLCAncmFuZG9tJ10pLmRlZmF1bHQoJ2xpc3QnKSxcbiAgdm9sdW1lOiB6Lm51bWJlcigpLm1pbigwKS5tYXgoMSkuZGVmYXVsdCgwLjUpLFxuICBsYXN0X2FjdGl2ZV9zd2lwZV9pZDogei5udW1iZXIoKS5udWxsYWJsZSgpLmRlZmF1bHQobnVsbCksXG4gIGZpbmlzaGVkX2Jhc2VfcGxheWxpc3RzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuICBwcmV2aW91c012dVN0YXRlOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG5cbmNvbnN0IFNUQVRFX0tFWV9NVlVfSElTVE9SWSA9ICfngbDng6zlj4zmmJ9fTVZV54q25oCB6K6w5b+GJztcblxuLyoqXG4gKiBb5bel5YW35Ye95pWwXSDlsIblpJrnp43moLzlvI/nmoTml7bpl7TlrZfnrKbkuLLop6PmnpDkuLrku47ljYjlpJzlvIDlp4vnmoTliIbpkp/mlbDjgIJcbiAqIOWug+eahOiBjOi0o+WNleS4gO+8jOS4lOWvuei+k+WFpeagvOW8j+acieW+iOW8uueahOWuuemUmeiDveWKm+OAglxuICogQHBhcmFtIHRpbWVTdHIgLSDkvovlpoIgXCIxNDozMFwiLCBcIjjml7Y15YiGXCIsIFwiMjIgOiAwMFwiXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgbnVsbH0g6L2s5o2i5ZCO55qE5YiG6ZKf5pWw77yM5oiW5Zyo5peg5rOV6Kej5p6Q5pe26L+U5ZueIG51bGzjgIJcbiAqL1xuZnVuY3Rpb24gX3BhcnNlVGltZVRvTWludXRlcyh0aW1lU3RyOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcbiAgLy8g5o6i6ZKIOiDorrDlvZXkvKDlhaXnmoTljp/lp4vlgLzvvIzkvr/kuo7osIPor5VcbiAgaWYgKCF0aW1lU3RyIHx8IHR5cGVvZiB0aW1lU3RyICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGw7XG5cbiAgLy8g5q2l6aqkMTog5b2S5LiA5YyW6L6T5YWl77yM5aSE55CG5bi46KeB5Y+Y5L2TICjlt7Lkv67mraMgbGV0IC0+IGNvbnN0IOWSjCByZXBsYWNlIOivreazlSlcbiAgY29uc3QgY2xlYW5TdHI6IHN0cmluZyA9IHRpbWVTdHIudHJpbSgpLnJlcGxhY2UoJ++8micsICc6Jyk7XG5cbiAgbGV0IG1hdGNoO1xuXG4gIC8vIOatpemqpDI6IOWwneivleWMuemFjSBcIkhIOk1NXCIg5qC85byPICjmnIDluLjop4EpXG4gIG1hdGNoID0gY2xlYW5TdHIubWF0Y2goL14oXFxkezEsMn0pXFxzKjpcXHMqKFxcZHsxLDJ9KSQvKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuICAgIC8vIOS4peagvOagoemqjOaVsOWAvOiMg+WbtFxuICAgIGlmIChob3VycyA+PSAwICYmIGhvdXJzIDwgMjQgJiYgbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPCA2MCkge1xuICAgICAgcmV0dXJuIGhvdXJzICogNjAgKyBtaW51dGVzO1xuICAgIH1cbiAgfVxuXG4gIC8vIOatpemqpDM6IOWwneivleWMuemFjSBcIkjml7ZN5YiGXCIg5qC85byPXG4gIG1hdGNoID0gY2xlYW5TdHIubWF0Y2goL14oXFxkezEsMn0pXFxzKuaXtlxccyooXFxkezEsMn0pXFxzKuWIhj8kLyk7XG4gIGlmIChtYXRjaCkge1xuICAgIGNvbnN0IGhvdXJzID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICBpZiAoaG91cnMgPj0gMCAmJiBob3VycyA8IDI0ICYmIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDwgNjApIHtcbiAgICAgIHJldHVybiBob3VycyAqIDYwICsgbWludXRlcztcbiAgICB9XG4gIH1cblxuICAvLyDmjqLpkog6IOWmguaenOaJgOacieagvOW8j+mDveWMuemFjeWksei0pe+8jOiusOW9leS4i+adpVxuICBsb2dQcm9iZShgW1RpbWVQYXJzZXJdIOaXoOazleino+aekOaXtumXtOWtl+espuS4sjogXCIke3RpbWVTdHJ9XCJgLCAnd2FybicpO1xuXG4gIC8vIFvmlrDlop5dIOS/ruWkjeKAnOe8uuWwkSByZXR1cm7igJ3nmoTpgLvovpHmvI/mtJ5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAyLiBNVlUg566h55CG5ZmoIChUaGUgTXZ1TWFuYWdlciAtIFwiVGhlIEFuYWx5c3RcIilcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBNdnVNYW5hZ2VyID0gKCgpID0+IHtcbiAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSDmqKHlnZfmraPlnKjliJ3lp4vljJYuLi4nKTtcblxuICBsZXQgX3ByZXZpb3VzTXZ1U3RhdGU6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAvKipcbiAgICogW+aguOW/g+eul+azlSBWMi4xXSDmo4Dmn6XkuIDkuKrnu5nlrprnmoQgc3RhdF9kYXRhIOaYr+WQpua7oei2s+S4gOS4quinpuWPkeWZqOeahOaJgOacieadoeS7tuOAglxuICAgKiDmlrDniYjlt7LliqDlm7rvvIzmlK/mjIHlpJrnp43ljLnphY3mqKHlvI/lkowgQU5EIOadoeS7tue7hOWQiO+8jOS4lOS7o+eggemjjuagvOW3suS8mOWMluOAglxuICAgKi9cbiAgZnVuY3Rpb24gX2NoZWNrVHJpZ2dlckNvbmRpdGlvbihcbiAgICB0cmlnZ2VyOiB6LmluZmVyPHR5cGVvZiBab2RUcmlnZ2VyQ29uZmlnPixcbiAgICBzdGF0RGF0YTogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwsXG4gICk6IGJvb2xlYW4ge1xuICAgIGlmICghc3RhdERhdGEpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIOmBjeWOhuaJgOaciSBBTkQg5p2h5Lu244CC5Y+q6KaB5pyJ5LiA5Liq5LiN5ruh6Laz77yM5pW05Liq6Kem5Y+R5Zmo5bCx5aSx6LSl44CCXG4gICAgZm9yIChjb25zdCBjb25kaXRpb24gb2YgdHJpZ2dlci5jb25kaXRpb25zKSB7XG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBfLmdldChzdGF0RGF0YSwgY29uZGl0aW9uLnZhcmlhYmxlX3BhdGgpO1xuXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7IC8vIOW9k+WJjeadoeS7tuaYr+WQpua7oei2s1xuICAgICAgbGV0IGlzSGFuZGxlZCA9IGZhbHNlOyAvLyDlvZPliY3mnaHku7bmmK/lkKbooqvku7vkvZXkuIDkuKrljLnphY3mqKHlvI/lpITnkIbov4dcblxuICAgICAgLy8g5L2/55SoIGlmIC8gZWxzZSBpZiDpk77mnaHvvIznoa7kv53mr4/kuKrmnaHku7bpobnlj6rph4fnlKjkuIDnp43ljLnphY3mqKHlvI9cbiAgICAgIGlmIChjb25kaXRpb24udmFsdWVfY29udGFpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpc0hhbmRsZWQgPSB0cnVlO1xuICAgICAgICAvLyBb5a6J5YWo5Yqg5Zu6XSDlv4Xpobvmo4Dmn6UgY3VycmVudFZhbHVlIOaYr+Wtl+espuS4su+8jOWQpuWImSAuaW5jbHVkZXMoKSDkvJrlr7zoh7TltKnmuoNcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdzdHJpbmcnICYmIGN1cnJlbnRWYWx1ZS5pbmNsdWRlcyhjb25kaXRpb24udmFsdWVfY29udGFpbnMpKSB7XG4gICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb25kaXRpb24udGltZV9pbl9yYW5nZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlzSGFuZGxlZCA9IHRydWU7XG4gICAgICAgIC8vIFvlronlhajliqDlm7pdIOWQjOagt+ajgOafpeexu+Wei1xuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VGltZUluTWludXRlcyA9IF9wYXJzZVRpbWVUb01pbnV0ZXMoY3VycmVudFZhbHVlKTtcblxuICAgICAgICAgIGlmIChjdXJyZW50VGltZUluTWludXRlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgW3N0YXJ0U3RyLCBlbmRTdHJdID0gY29uZGl0aW9uLnRpbWVfaW5fcmFuZ2Uuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0TWludXRlcyA9IF9wYXJzZVRpbWVUb01pbnV0ZXMoc3RhcnRTdHIpO1xuICAgICAgICAgICAgY29uc3QgZW5kTWludXRlcyA9IF9wYXJzZVRpbWVUb01pbnV0ZXMoZW5kU3RyKTtcblxuICAgICAgICAgICAgaWYgKHN0YXJ0TWludXRlcyAhPT0gbnVsbCAmJiBlbmRNaW51dGVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIFvku6PnoIHpo47moLzkv67mraNdIOenu+mZpOS4jeW/heimgeeahOW1jOWllyBpZu+8jOS9v+S7o+eggeabtOeugOa0gVxuICAgICAgICAgICAgICBpZiAoc3RhcnRNaW51dGVzIDw9IGVuZE1pbnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAvLyDmma7pgJrojIPlm7RcbiAgICAgICAgICAgICAgICBjb25kaXRpb25NZXQgPSBjdXJyZW50VGltZUluTWludXRlcyA+PSBzdGFydE1pbnV0ZXMgJiYgY3VycmVudFRpbWVJbk1pbnV0ZXMgPD0gZW5kTWludXRlcztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDot6jlpKnojIPlm7RcbiAgICAgICAgICAgICAgICBjb25kaXRpb25NZXQgPSBjdXJyZW50VGltZUluTWludXRlcyA+PSBzdGFydE1pbnV0ZXMgfHwgY3VycmVudFRpbWVJbk1pbnV0ZXMgPD0gZW5kTWludXRlcztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb25kaXRpb24udmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpc0hhbmRsZWQgPSB0cnVlO1xuICAgICAgICBpZiAoY3VycmVudFZhbHVlID09PSBjb25kaXRpb24udmFsdWUpIHtcbiAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbi5ncmVhdGVyX3RoYW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpc0hhbmRsZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ251bWJlcicgJiYgY3VycmVudFZhbHVlID4gY29uZGl0aW9uLmdyZWF0ZXJfdGhhbikge1xuICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29uZGl0aW9uLmdyZWF0ZXJfdGhhbl9vcl9lcXVhbF90byAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlzSGFuZGxlZCA9IHRydWU7XG4gICAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbHVlID09PSAnbnVtYmVyJyAmJiBjdXJyZW50VmFsdWUgPj0gY29uZGl0aW9uLmdyZWF0ZXJfdGhhbl9vcl9lcXVhbF90bykge1xuICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29uZGl0aW9uLmxlc3NfdGhhbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlzSGFuZGxlZCA9IHRydWU7XG4gICAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbHVlID09PSAnbnVtYmVyJyAmJiBjdXJyZW50VmFsdWUgPCBjb25kaXRpb24ubGVzc190aGFuKSB7XG4gICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb25kaXRpb24ubGVzc190aGFuX29yX2VxdWFsX3RvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaXNIYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdudW1iZXInICYmIGN1cnJlbnRWYWx1ZSA8PSBjb25kaXRpb24ubGVzc190aGFuX29yX2VxdWFsX3RvKSB7XG4gICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBb5pyA57uI6KOB5YazXSDlpoLmnpzov5nmmK/kuIDkuKrnqbrmnaHku7YgKGlzSGFuZGxlZD1mYWxzZSnvvIzmiJbmnaHku7bkuI3mu6HotrPvvIzliJnnq4vljbPlpLHotKVcbiAgICAgIGlmICghaXNIYW5kbGVkIHx8ICFjb25kaXRpb25NZXQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWmguaenOW+queOr+ato+W4uOe7k+adn++8jOivtOaYjuaJgOaciSBBTkQg5p2h5Lu26YO95ruh6LazXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAtLS0g5YWs5YWx5o6l5Y+jIC0tLVxuICBjb25zdCBwdWJsaWNBUEkgPSB7XG4gICAgY2hlY2tUcmlnZ2VyQ29uZGl0aW9uOiBfY2hlY2tUcmlnZ2VyQ29uZGl0aW9uLFxuXG4gICAgLyoqXG4gICAgICogW+eUn+WRveWRqOacn10g5LuO6YWS6aaG5Y+Y6YeP5Lit6K+75Y+W5bm25oGi5aSN5LiK5LiA5qyh55qEIE1WVSDnirbmgIHjgIJcbiAgICAgKi9cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSAoTGlmZWN5Y2xlKSDmiafooYwgaW5pdGlhbGl6ZS4uLicpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdjaGF0JyB9KVtTVEFURV9LRVlfTVZVX0hJU1RPUlldO1xuICAgICAgICBpZiAoc2F2ZWRTdGF0ZSAmJiB0eXBlb2Ygc2F2ZWRTdGF0ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBfcHJldmlvdXNNdnVTdGF0ZSA9IHNhdmVkU3RhdGU7XG4gICAgICAgICAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSDmiJDlip/ku47lrZjmoaPkuK3mgaLlpI3kuoYgTVZVIOWOhuWPsueKtuaAgeOAgicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9wcmV2aW91c012dVN0YXRlID0ge307XG4gICAgICAgICAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSDmnKrlj5HnjrDmnInmlYjnmoQgTVZVIOWOhuWPsuWtmOaho++8jOW3suWIneWni+WMluS4uuepuueKtuaAgeOAgicsICd3YXJuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ1Byb2JlKGBbTXZ1TWFuYWdlcl0g5Yid5aeL5YyW5pe26K+75Y+W5a2Y5qGj5aSx6LSlOiAke2Vycm9yfWAsICdlcnJvcicpO1xuICAgICAgICBfcHJldmlvdXNNdnVTdGF0ZSA9IHt9O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZXNldFN0YXRlKCkge1xuICAgICAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSAoTGlmZWN5Y2xlKSDmraPlnKjph43nva7mqKHlnZflhoXpg6jnirbmgIEuLi4nKTtcbiAgICAgIF9wcmV2aW91c012dVN0YXRlID0ge307XG4gICAgICBsb2dQcm9iZSgnW012dU1hbmFnZXJdIOaooeWdl+eKtuaAgeW3sumHjee9ruOAgicpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBb5ZG95LukXSDlsIblvZPliY3nmoQgTVZVIOeKtuaAgeaMgeS5heWMluWIsOmFkummhuWPmOmHj+S4reOAglxuICAgICAqIEBwYXJhbSBjdXJyZW50U3RhdGVEYXRhIC0g5pyA5paw55qEIHN0YXRfZGF0YSDlr7nosaHjgIJcbiAgICAgKi9cbiAgICBhc3luYyBwZXJzaXN0Q3VycmVudFN0YXRlKGN1cnJlbnRTdGF0ZURhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICAgIGlmICghaXNTY3JpcHRBY3RpdmUpIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSDmjIHkuYXljJbmk43kvZzooqvpmLvmraLvvIzlm6DkuLrohJrmnKzmraPlnKjlgZzmnLrjgIInLCAnd2FybicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsb2dQcm9iZSgnW012dU1hbmFnZXJdIChDb21tYW5kKSDmiafooYwgcGVyc2lzdEN1cnJlbnRTdGF0ZS4uLicpO1xuICAgICAgX3ByZXZpb3VzTXZ1U3RhdGUgPSBfLmNsb25lRGVlcChjdXJyZW50U3RhdGVEYXRhKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHVwZGF0ZVZhcmlhYmxlc1dpdGgoXG4gICAgICAgICAgdmFycyA9PiB7XG4gICAgICAgICAgICB2YXJzW1NUQVRFX0tFWV9NVlVfSElTVE9SWV0gPSBfcHJldmlvdXNNdnVTdGF0ZTtcbiAgICAgICAgICAgIHJldHVybiB2YXJzO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyB0eXBlOiAnY2hhdCcgfSxcbiAgICAgICAgKTtcbiAgICAgICAgbG9nUHJvYmUoJ1tNdnVNYW5hZ2VyXSDlt7LmiJDlip/lsIblvZPliY0gTVZVIOeKtuaAgeaMgeS5heWMluOAgicpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nUHJvYmUoYFtNdnVNYW5hZ2VyXSDmjIHkuYXljJYgTVZVIOeKtuaAgeaXtuWPkeeUn+S4pemHjemUmeivrzogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogW+afpeivol0g6I635Y+W5YaF5a2Y5Lit5a2Y5YKo55qE5LiK5LiA5qyh55qEIE1WVSDnirbmgIHjgIJcbiAgICAgKi9cbiAgICBnZXRQcmV2aW91c1N0YXRlOiAoKSA9PiBfLmNsb25lRGVlcChfcHJldmlvdXNNdnVTdGF0ZSksXG5cbiAgICAvKipcbiAgICAgKiBb5qC45b+D5p+l6K+iXSDorqHnrpfmlrDml6fnirbmgIHkuYvpl7TnmoTigJzovrnmsr/lj5jljJbigJ3jgIJcbiAgICAgKiBAcGFyYW0gcHJldmlvdXNTdGF0ZURhdGEgLSDkuIrkuIDmrKHnmoQgc3RhdF9kYXRh44CCXG4gICAgICogQHBhcmFtIGN1cnJlbnRTdGF0ZURhdGEgLSDmnIDmlrDnmoQgc3RhdF9kYXRh44CCXG4gICAgICogQHBhcmFtIGFsbFRyaWdnZXJzIC0g5LuO5LiW55WM5Lmm6Kej5p6Q5Ye655qE5omA5pyJ5pyJ5pWI6Kem5Y+R5Zmo44CCXG4gICAgICogQHJldHVybnMg5oql5ZGK5a+56LGh77yM5YyF5ZCr5paw5r+A5rS75ZKM5paw5aSx5pWI55qE6Kem5Y+R5Zmo5YiX6KGo44CCXG4gICAgICovXG4gICAgY2FsY3VsYXRlQ2hhbmdlUmVwb3J0KFxuICAgICAgcHJldmlvdXNTdGF0ZURhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICAgICBjdXJyZW50U3RhdGVEYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgICAgYWxsVHJpZ2dlcnM6IHouaW5mZXI8dHlwZW9mIFpvZFRyaWdnZXJDb25maWc+W10sXG4gICAgKToge1xuICAgICAgbmV3bHlBY3RpdmVUcmlnZ2Vyczogei5pbmZlcjx0eXBlb2YgWm9kVHJpZ2dlckNvbmZpZz5bXTtcbiAgICAgIG5ld2x5SW5hY3RpdmVUcmlnZ2Vyczogei5pbmZlcjx0eXBlb2YgWm9kVHJpZ2dlckNvbmZpZz5bXTtcbiAgICB9IHtcbiAgICAgIGNvbnN0IHJlcG9ydDoge1xuICAgICAgICBuZXdseUFjdGl2ZVRyaWdnZXJzOiB6LmluZmVyPHR5cGVvZiBab2RUcmlnZ2VyQ29uZmlnPltdO1xuICAgICAgICBuZXdseUluYWN0aXZlVHJpZ2dlcnM6IHouaW5mZXI8dHlwZW9mIFpvZFRyaWdnZXJDb25maWc+W107XG4gICAgICB9ID0geyBuZXdseUFjdGl2ZVRyaWdnZXJzOiBbXSwgbmV3bHlJbmFjdGl2ZVRyaWdnZXJzOiBbXSB9O1xuXG4gICAgICBsb2dQcm9iZSgnW012dU1hbmFnZXJdIChRdWVyeSkg5q2j5Zyo6K6h566X54q25oCB5Y+Y5YyW5oql5ZGKIChcIui+ueayv+ajgOa1i1wiKS4uLicsICdncm91cCcpO1xuXG4gICAgICBsb2dQcm9iZSgnW1Byb2JlXSDmraPlnKjlrqHmn6XnlKjkuo7lr7nmr5TnmoTmlrDml6fnirbmgIHmlbDmja46Jyk7XG4gICAgICBjb25zb2xlLmxvZygn5LiK5LiA5Lu95Y6G5Y+y6K6w5b+GIChwcmV2aW91c1N0YXRlRGF0YSk6Jyk7XG4gICAgICBjb25zb2xlLmRpcihfLmNsb25lRGVlcChwcmV2aW91c1N0YXRlRGF0YSkpO1xuICAgICAgY29uc29sZS5sb2coJ+W9k+WJjeadg+WogeeKtuaAgSAoY3VycmVudFN0YXRlRGF0YSk6Jyk7XG4gICAgICBjb25zb2xlLmRpcihfLmNsb25lRGVlcChjdXJyZW50U3RhdGVEYXRhKSk7XG4gICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgIGZvciAoY29uc3QgdHJpZ2dlciBvZiBhbGxUcmlnZ2Vycykge1xuICAgICAgICBjb25zdCB3YXNNZXQgPSBfY2hlY2tUcmlnZ2VyQ29uZGl0aW9uKHRyaWdnZXIsIHByZXZpb3VzU3RhdGVEYXRhKTtcbiAgICAgICAgY29uc3QgaXNNZXQgPSBfY2hlY2tUcmlnZ2VyQ29uZGl0aW9uKHRyaWdnZXIsIGN1cnJlbnRTdGF0ZURhdGEpO1xuXG4gICAgICAgIGlmICghd2FzTWV0ICYmIGlzTWV0KSB7XG4gICAgICAgICAgbG9nUHJvYmUoYCjmjqLph50pIOaWsOa/gOa0u+eahOinpuWPkeWZqCAtPiBwbGF5bGlzdDogXCIke3RyaWdnZXIucGxheWxpc3RfaWR9XCJgKTtcbiAgICAgICAgICByZXBvcnQubmV3bHlBY3RpdmVUcmlnZ2Vycy5wdXNoKHRyaWdnZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKHdhc01ldCAmJiAhaXNNZXQpIHtcbiAgICAgICAgICBsb2dQcm9iZShgKOaOoumHnSkg5paw5aSx5pWI55qE6Kem5Y+R5ZmoIC0+IHBsYXlsaXN0OiBcIiR7dHJpZ2dlci5wbGF5bGlzdF9pZH1cImApO1xuICAgICAgICAgIHJlcG9ydC5uZXdseUluYWN0aXZlVHJpZ2dlcnMucHVzaCh0cmlnZ2VyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbG9nUHJvYmUoXG4gICAgICAgIGDmiqXlkYrnlJ/miJDlrozmr5U6ICR7cmVwb3J0Lm5ld2x5QWN0aXZlVHJpZ2dlcnMubGVuZ3RofSDkuKrmlrDmv4DmtLssICR7cmVwb3J0Lm5ld2x5SW5hY3RpdmVUcmlnZ2Vycy5sZW5ndGh9IOS4quaWsOWkseaViOOAgmAsXG4gICAgICApO1xuICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICB9LFxuICB9O1xuXG4gIGxvZ1Byb2JlKCdbTXZ1TWFuYWdlcl0g5qih5Z2X5Yid5aeL5YyW5a6M5oiQ44CCJyk7XG4gIHJldHVybiBwdWJsaWNBUEk7XG59KSgpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gMi4g54q25oCB566h55CG5ZmoIChUaGUgU3RhdGUgTWFuYWdlcikgLSBbVjIuMCDph43mnoTniYhdXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3QgU3RhdGVNYW5hZ2VyID0gKCgpID0+IHtcbiAgbG9nUHJvYmUoJ1tTdGF0ZU1hbmFnZXJdIOaooeWdl+ato+WcqOWIneWni+WMliAo5LyY5YWI57qn6Zif5YiX5YaF5qC4KS4uLicpO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gMi4xLiDnp4HmnInnirbmgIEgKFByaXZhdGUgU3RhdGUpXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gW+mHjeaehF0g5qC45b+D5pWw5o2u57uT5p6E5Y+Y5pu05Li65LyY5YWI57qn6Zif5YiXXG4gIGxldCBfYWN0aXZlUGxheWxpc3RRdWV1ZTogUXVldWVJdGVtW10gPSBbXTtcbiAgbGV0IF9sYXN0QWN0aXZlU3dpcGVJZDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIGxldCBfZmluaXNoZWRCYXNlUGxheWxpc3RzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgbGV0IF9wbGF5YmFja01vZGU6IFBsYXliYWNrTW9kZSA9ICdsaXN0JztcbiAgbGV0IF9tYXN0ZXJWb2x1bWU6IG51bWJlciA9IDAuNTtcbiAgbGV0IF9wbGF5YmFja1N0YXRlOiAnU1RPUFBFRCcgfCAnUExBWUlORycgfCAnUEFVU0VEJyA9ICdTVE9QUEVEJztcbiAgbGV0IF9pc1BlcmZvcm1pbmdFZmZlY3Q6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDIuMi4g56eB5pyJ5qC45b+D566X5rOVIChQcml2YXRlIENvcmUgQWxnb3JpdGhtcylcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBmdW5jdGlvbiBfYXBwbHlEZXBhcnR1cmVJc0hpc3RvcnlQcmluY2lwbGUoaXRlbTogUXVldWVJdGVtLCBkZXBhcnRpbmdJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHR5cGVvZiBkZXBhcnRpbmdJbmRleCAhPT0gJ251bWJlcicgfHwgZGVwYXJ0aW5nSW5kZXggPCAwKSByZXR1cm47XG4gICAgaXRlbS5wbGF5ZWRJbmRpY2VzLmFkZChkZXBhcnRpbmdJbmRleCk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDIuMy4g5YWs5YWx5o6l5Y+jIChQdWJsaWMgQVBJKVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0IHB1YmxpY0FQSSA9IHtcbiAgICAvLyAtLS0g5Z+656GA54q25oCB5p+l6K+iIC0tLVxuICAgIGdldFBsYXliYWNrTW9kZTogKCkgPT4gX3BsYXliYWNrTW9kZSxcbiAgICBnZXRWb2x1bWU6ICgpID0+IF9tYXN0ZXJWb2x1bWUsXG4gICAgLy8gW+WFvOWuueaAp10g5pen5o6l5Y+j77yM5LuF5b2T54q25oCB5piO56Gu5Li6IFBMQVlJTkcg5pe26L+U5ZueIHRydWVcbiAgICBpc1BsYXlpbmc6ICgpID0+IF9wbGF5YmFja1N0YXRlID09PSAnUExBWUlORycsXG4gICAgZ2V0UGxheWJhY2tTdGF0ZTogKCkgPT4gX3BsYXliYWNrU3RhdGUsXG4gICAgaXNQZXJmb3JtaW5nRWZmZWN0OiAoKSA9PiBfaXNQZXJmb3JtaW5nRWZmZWN0LFxuXG4gICAgLy8gLS0tIFvph43mnoRdIOmYn+WIl+aguOW/g+afpeivoiAtLS1cbiAgICAvKipcbiAgICAgKiDojrflj5blvZPliY3kvJjlhYjnuqfmnIDpq5jnmoTmrYzljZXpobnvvIjpmJ/pppbvvInjgIJcbiAgICAgKiDov5nmmK/ns7vnu5/llK/kuIDnmoTkuovlrp7mnaXmupDvvJrlvZPliY3lupTor6Xmkq3mlL7ku4DkuYjjgIJcbiAgICAgKi9cbiAgICBnZXRUb3BRdWV1ZUl0ZW06ICgpOiBRdWV1ZUl0ZW0gfCB1bmRlZmluZWQgPT4gXy5jbG9uZURlZXAoX2FjdGl2ZVBsYXlsaXN0UXVldWVbMF0pLFxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5pW05Liq6Zif5YiX55qE5Ymv5pys77yI55So5LqO6LCD6K+V5oiW5Yaz562W5YiG5p6Q77yJ44CCXG4gICAgICovXG4gICAgZ2V0UXVldWU6ICgpOiBRdWV1ZUl0ZW1bXSA9PiBfLmNsb25lRGVlcChfYWN0aXZlUGxheWxpc3RRdWV1ZSksXG5cbiAgICAvLyAtLS0g54q25oCB5b+r54WnIC0tLVxuICAgIGdldFN0YXRlU25hcHNob3RGb3JSdW50aW1lOiAoKSA9PiB7XG4gICAgICByZXR1cm4gXy5jbG9uZURlZXAoe1xuICAgICAgICBhY3RpdmVfcXVldWU6IF9hY3RpdmVQbGF5bGlzdFF1ZXVlLFxuICAgICAgICBtb2RlOiBfcGxheWJhY2tNb2RlLFxuICAgICAgICB2b2x1bWU6IF9tYXN0ZXJWb2x1bWUsXG4gICAgICAgIC8vIFvlhbzlrrnmgKddIOWQjOaXtuaPkOS+m+W4g+WwlOWAvOWSjOaemuS4vuWAvFxuICAgICAgICBpc1BsYXlpbmc6IF9wbGF5YmFja1N0YXRlID09PSAnUExBWUlORycsXG4gICAgICAgIHBsYXliYWNrU3RhdGU6IF9wbGF5YmFja1N0YXRlLFxuICAgICAgICBpc1BlcmZvcm1pbmdFZmZlY3Q6IF9pc1BlcmZvcm1pbmdFZmZlY3QsXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0U3RhdGVTbmFwc2hvdEZvclBlcnNpc3RlbmNlKCkge1xuICAgICAgY29uc3QgcnVudGltZVF1ZXVlID0gXy5jbG9uZURlZXAoX2FjdGl2ZVBsYXlsaXN0UXVldWUpO1xuXG4gICAgICBjb25zdCBwZXJzaXN0ZW50UXVldWUgPSBydW50aW1lUXVldWUubWFwKGl0ZW0gPT4ge1xuICAgICAgICBjb25zdCBwZXJzaXN0ZWRJdGVtID0gXy5vbWl0KGl0ZW0sIFsncGxheWJhY2tQbGFuJywgJ3BsYW5JbmRleCcsICdwbGF5bGlzdENvbnRlbnQnXSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wZXJzaXN0ZWRJdGVtLFxuICAgICAgICAgIC8vIOWwhiBTZXQg6L2s5o2i5Li6IEFycmF5IOS7peS+vyBKU09OIOW6j+WIl+WMllxuICAgICAgICAgIHBsYXllZEluZGljZXM6IEFycmF5LmZyb20oaXRlbS5wbGF5ZWRJbmRpY2VzKSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3RpdmVfcXVldWU6IHBlcnNpc3RlbnRRdWV1ZSxcbiAgICAgICAgbW9kZTogX3BsYXliYWNrTW9kZSxcbiAgICAgICAgdm9sdW1lOiBfbWFzdGVyVm9sdW1lLFxuICAgICAgICBsYXN0X2FjdGl2ZV9zd2lwZV9pZDogX2xhc3RBY3RpdmVTd2lwZUlkLFxuICAgICAgICBmaW5pc2hlZF9iYXNlX3BsYXlsaXN0czogQXJyYXkuZnJvbShfZmluaXNoZWRCYXNlUGxheWxpc3RzKSxcbiAgICAgIH07XG4gICAgfSxcblxuICAgIC8vIC0tLSDnlJ/lkb3lkajmnJ/nrqHnkIYgLS0tXG4gICAgcmVzZXRTdGF0ZSgpIHtcbiAgICAgIGxvZ1Byb2JlKCdbU3RhdGVNYW5hZ2VyXSDmraPlnKjnoazmgKfph43nva7miYDmnInnirbmgIEuLi4nLCAnd2FybicpO1xuICAgICAgX2FjdGl2ZVBsYXlsaXN0UXVldWUgPSBbXTtcbiAgICAgIF9wbGF5YmFja01vZGUgPSAnbGlzdCc7XG4gICAgICBfbWFzdGVyVm9sdW1lID0gMC41O1xuICAgICAgX3BsYXliYWNrU3RhdGUgPSAnU1RPUFBFRCc7XG4gICAgICBfaXNQZXJmb3JtaW5nRWZmZWN0ID0gZmFsc2U7XG4gICAgICBfbGFzdEFjdGl2ZVN3aXBlSWQgPSBudWxsO1xuICAgICAgX2ZpbmlzaGVkQmFzZVBsYXlsaXN0cy5jbGVhcigpO1xuICAgIH0sXG5cbiAgICBsb2FkU3RhdGUoc3RhdGVUb0xvYWQ6IGFueSkge1xuICAgICAgbG9nUHJvYmUoJ1tTdGF0ZU1hbmFnZXJdIOato+WcqOWKoOi9veeKtuaAgS4uLicsICdncm91cCcpO1xuICAgICAgX3BsYXliYWNrTW9kZSA9IHN0YXRlVG9Mb2FkLm1vZGU7XG4gICAgICBfbWFzdGVyVm9sdW1lID0gc3RhdGVUb0xvYWQudm9sdW1lO1xuICAgICAgX2FjdGl2ZVBsYXlsaXN0UXVldWUgPSBzdGF0ZVRvTG9hZC5hY3RpdmVfcXVldWUgfHwgW107XG4gICAgICBfbGFzdEFjdGl2ZVN3aXBlSWQgPSBzdGF0ZVRvTG9hZC5sYXN0X2FjdGl2ZV9zd2lwZV9pZCA/PyBudWxsO1xuICAgICAgX2ZpbmlzaGVkQmFzZVBsYXlsaXN0cyA9IG5ldyBTZXQoc3RhdGVUb0xvYWQuZmluaXNoZWRfYmFzZV9wbGF5bGlzdHMgfHwgW10pO1xuICAgICAgbG9nUHJvYmUoXG4gICAgICAgIGAo5o6i6ZKIKSDorrDlv4bliqDovb3lrozmiJA6IOS4iuasoVN3aXBlSUQ9JHtfbGFzdEFjdGl2ZVN3aXBlSWR9LCDlt7Llroznu5Pln7rnoYDmrYzljZXmlbA9JHtfZmluaXNoZWRCYXNlUGxheWxpc3RzLnNpemV9YCxcbiAgICAgICk7XG4gICAgICBsb2dQcm9iZShcbiAgICAgICAgYOeKtuaAgeWKoOi9veWujOaIkC4g6Zif5YiX5rex5bqmOiAke19hY3RpdmVQbGF5bGlzdFF1ZXVlLmxlbmd0aH0sIOaooeW8jzogJHtfcGxheWJhY2tNb2RlfSwg6Z+z6YePOiAke19tYXN0ZXJWb2x1bWV9YCxcbiAgICAgICk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgfSxcblxuICAgIC8vIC0tLSDln7rnoYDnirbmgIHorr7nva4gLS0tXG4gICAgc2V0UGxheWJhY2tNb2RlOiAobW9kZTogUGxheWJhY2tNb2RlKSA9PiB7XG4gICAgICBfcGxheWJhY2tNb2RlID0gbW9kZTtcbiAgICB9LFxuICAgIHNldFZvbHVtZTogKHZvbHVtZTogbnVtYmVyKSA9PiB7XG4gICAgICBfbWFzdGVyVm9sdW1lID0gdm9sdW1lO1xuICAgIH0sXG4gICAgc2V0UGxheWJhY2tTdGF0ZTogKG5ld1N0YXRlOiAnU1RPUFBFRCcgfCAnUExBWUlORycgfCAnUEFVU0VEJykgPT4ge1xuICAgICAgLy8gW+aOoumSiF0g54q25oCB5Y+Y5pu05pel5b+X77yM5biu5Yqp5oiR5Lus6L+96Liq5q+P5LiA5qyh54q25oCB6Lez5Y+YXG4gICAgICBpZiAoX3BsYXliYWNrU3RhdGUgIT09IG5ld1N0YXRlKSB7XG4gICAgICAgIGxvZ1Byb2JlKGBbU3RhdGVNYW5hZ2VyXSDnirbmgIHmtYHovaw6ICR7X3BsYXliYWNrU3RhdGV9IC0+ICR7bmV3U3RhdGV9YCk7XG4gICAgICB9XG4gICAgICBfcGxheWJhY2tTdGF0ZSA9IG5ld1N0YXRlO1xuICAgIH0sXG4gICAgc2V0UGVyZm9ybWluZ0VmZmVjdDogKGlzUGVyZm9ybWluZzogYm9vbGVhbikgPT4ge1xuICAgICAgX2lzUGVyZm9ybWluZ0VmZmVjdCA9IGlzUGVyZm9ybWluZztcbiAgICB9LFxuXG4gICAgZ2V0TGFzdEFjdGl2ZVN3aXBlSWQ6ICgpID0+IF9sYXN0QWN0aXZlU3dpcGVJZCxcbiAgICBzZXRMYXN0QWN0aXZlU3dpcGVJZDogKGlkOiBudW1iZXIgfCBudWxsKSA9PiB7XG4gICAgICBfbGFzdEFjdGl2ZVN3aXBlSWQgPSBpZDtcbiAgICB9LFxuXG4gICAgZ2V0RmluaXNoZWRCYXNlUGxheWxpc3RzOiAoKSA9PiBuZXcgU2V0KF9maW5pc2hlZEJhc2VQbGF5bGlzdHMpLFxuXG4gICAgYWRkVG9GaW5pc2hlZEJhc2VQbGF5bGlzdHM6IChwbGF5bGlzdElkOiBzdHJpbmcpID0+IHtcbiAgICAgIGxvZ1Byb2JlKGBbU3RhdGVNYW5hZ2VyXeWwhuWfuuehgOatjOWNlSBcIiR7cGxheWxpc3RJZH1cIiDliLvlhaXlt7LlrozmiJDliJfooajjgIJgKTtcbiAgICAgIF9maW5pc2hlZEJhc2VQbGF5bGlzdHMuYWRkKHBsYXlsaXN0SWQpO1xuICAgIH0sXG5cbiAgICBjbGVhckZpbmlzaGVkQmFzZVBsYXlsaXN0czogKCkgPT4ge1xuICAgICAgbG9nUHJvYmUoYFtTdGF0ZU1hbmFnZXJd5riF56m66K6w5b2V44CCYCk7XG4gICAgICBfZmluaXNoZWRCYXNlUGxheWxpc3RzLmNsZWFyKCk7XG4gICAgfSxcblxuICAgIC8vIC0tLSBb6YeN5p6EXSDpmJ/liJfmoLjlv4Pmk43kvZwgLS0tXG4gICAgLyoqXG4gICAgICogW+aguOW/g10g5pu05paw5pW05Liq6Zif5YiX44CCXG4gICAgICog5q2k5pa55rOV5Lya6Ieq5Yqo5oyJ5LyY5YWI57qn6ZmN5bqP5o6S5YiX6Zif5YiX77yM56Gu5L+dIF9hY3RpdmVQbGF5bGlzdFF1ZXVlWzBdIOawuOi/nOaYr+S8mOWFiOe6p+acgOmrmOeahOOAglxuICAgICAqL1xuICAgIHVwZGF0ZVF1ZXVlKG5ld1F1ZXVlOiBRdWV1ZUl0ZW1bXSkge1xuICAgICAgbG9nUHJvYmUoYFtTdGF0ZU1hbmFnZXJdIChDb21tYW5kKSB1cGRhdGVRdWV1ZTog5q2j5Zyo5pu05paw5bm26YeN5o6S5bqP6Zif5YiXICjlhbEgJHtuZXdRdWV1ZS5sZW5ndGh9IOmhuSkuLi5gKTtcblxuICAgICAgX2FjdGl2ZVBsYXlsaXN0UXVldWUgPSBfLmNsb25lRGVlcChuZXdRdWV1ZSkuc29ydCgoYSwgYikgPT4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHkpO1xuXG4gICAgICBpZiAoX2FjdGl2ZVBsYXlsaXN0UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2dQcm9iZShcbiAgICAgICAgICBgKOaOoumSiCkg5paw6Zif6aaWOiBcIiR7X2FjdGl2ZVBsYXlsaXN0UXVldWVbMF0ucGxheWxpc3RJZH1cIiAo5LyY5YWI57qnOiAke19hY3RpdmVQbGF5bGlzdFF1ZXVlWzBdLnByaW9yaXR5fSlgLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoYCjmjqLpkogpIOmYn+WIl+eOsOW3suS4uuepuuOAgmApO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyAtLS0g5b2T5YmN6aG55pON5L2cICjkvZznlKjkuo7pmJ/pppYpIC0tLVxuICAgIHNldEN1cnJlbnRJbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgICBjb25zdCBjdXJyZW50SXRlbSA9IF9hY3RpdmVQbGF5bGlzdFF1ZXVlWzBdO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtKSB7XG4gICAgICAgIF9hcHBseURlcGFydHVyZUlzSGlzdG9yeVByaW5jaXBsZShjdXJyZW50SXRlbSwgY3VycmVudEl0ZW0uY3VycmVudEluZGV4KTtcbiAgICAgICAgY3VycmVudEl0ZW0uY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNvbW1pdE5hdmlnYXRpb25TdGVwKG5ld1RyYWNrSW5kZXg6IG51bWJlcikge1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBfYWN0aXZlUGxheWxpc3RRdWV1ZVswXTtcbiAgICAgIGlmICghY3VycmVudEl0ZW0pIHJldHVybjtcblxuICAgICAgX2FwcGx5RGVwYXJ0dXJlSXNIaXN0b3J5UHJpbmNpcGxlKGN1cnJlbnRJdGVtLCBjdXJyZW50SXRlbS5jdXJyZW50SW5kZXgpO1xuXG4gICAgICBpZiAoX3BsYXliYWNrTW9kZSA9PT0gJ3JhbmRvbScgJiYgY3VycmVudEl0ZW0ucGxheWJhY2tQbGFuKSB7XG4gICAgICAgIGNvbnN0IG5ld1BsYW5JbmRleCA9IGN1cnJlbnRJdGVtLnBsYXliYWNrUGxhbi5pbmRleE9mKG5ld1RyYWNrSW5kZXgpO1xuICAgICAgICBpZiAobmV3UGxhbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGN1cnJlbnRJdGVtLnBsYW5JbmRleCA9IG5ld1BsYW5JbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY3VycmVudEl0ZW0uY3VycmVudEluZGV4ID0gbmV3VHJhY2tJbmRleDtcbiAgICB9LFxuXG4gICAgY2xlYXJIaXN0b3J5Rm9yQ3VycmVudEl0ZW0oKSB7XG4gICAgICBjb25zdCBjdXJyZW50SXRlbSA9IF9hY3RpdmVQbGF5bGlzdFF1ZXVlWzBdO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtKSBjdXJyZW50SXRlbS5wbGF5ZWRJbmRpY2VzLmNsZWFyKCk7XG4gICAgfSxcblxuICAgIHJlc2V0Q3VycmVudEl0ZW1Gb3JMb29wKCkge1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBfYWN0aXZlUGxheWxpc3RRdWV1ZVswXTtcbiAgICAgIGlmIChjdXJyZW50SXRlbSkge1xuICAgICAgICBjdXJyZW50SXRlbS5wbGF5ZWRJbmRpY2VzLmNsZWFyKCk7XG4gICAgICAgIGN1cnJlbnRJdGVtLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNvbW1pdEdlbmVzaXNTdGF0ZShuZXdDdXJyZW50SW5kZXg6IG51bWJlciwgbmV3UGxheWJhY2tQbGFuOiBudW1iZXJbXSwgbmV3UGxhbkluZGV4OiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gX2FjdGl2ZVBsYXlsaXN0UXVldWVbMF07XG4gICAgICBpZiAoY3VycmVudEl0ZW0pIHtcbiAgICAgICAgY3VycmVudEl0ZW0uY3VycmVudEluZGV4ID0gbmV3Q3VycmVudEluZGV4O1xuICAgICAgICBjdXJyZW50SXRlbS5wbGF5YmFja1BsYW4gPSBuZXdQbGF5YmFja1BsYW47XG4gICAgICAgIGN1cnJlbnRJdGVtLnBsYW5JbmRleCA9IG5ld1BsYW5JbmRleDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdXNlckluaXRpYXRlZEp1bXAodHJhY2tJbmRleDogbnVtYmVyKSB7XG4gICAgICBjb25zdCBjdXJyZW50SXRlbSA9IF9hY3RpdmVQbGF5bGlzdFF1ZXVlWzBdO1xuICAgICAgaWYgKCFjdXJyZW50SXRlbSB8fCB0cmFja0luZGV4ID09PSBjdXJyZW50SXRlbS5jdXJyZW50SW5kZXgpIHJldHVybjtcblxuICAgICAgX2FwcGx5RGVwYXJ0dXJlSXNIaXN0b3J5UHJpbmNpcGxlKGN1cnJlbnRJdGVtLCBjdXJyZW50SXRlbS5jdXJyZW50SW5kZXgpO1xuICAgICAgY3VycmVudEl0ZW0uY3VycmVudEluZGV4ID0gdHJhY2tJbmRleDtcblxuICAgICAgaWYgKHRoaXMuZ2V0UGxheWJhY2tNb2RlKCkgPT09ICdyYW5kb20nICYmIGN1cnJlbnRJdGVtLnBsYXliYWNrUGxhbikge1xuICAgICAgICBjb25zdCBuZXdQbGFuSW5kZXggPSBjdXJyZW50SXRlbS5wbGF5YmFja1BsYW4uaW5kZXhPZih0cmFja0luZGV4KTtcbiAgICAgICAgaWYgKG5ld1BsYW5JbmRleCAhPT0gLTEpIGN1cnJlbnRJdGVtLnBsYW5JbmRleCA9IG5ld1BsYW5JbmRleDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xlYXJSYW5kb21Nb2RlUGxhbigpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gX2FjdGl2ZVBsYXlsaXN0UXVldWVbMF07XG4gICAgICBpZiAoY3VycmVudEl0ZW0pIHtcbiAgICAgICAgY3VycmVudEl0ZW0ucGxheWJhY2tQbGFuID0gdW5kZWZpbmVkO1xuICAgICAgICBjdXJyZW50SXRlbS5wbGFuSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFwcGx5TmV3UGxheWJhY2tQbGFuKHBsYW46IG51bWJlcltdLCBwbGFuSW5kZXg6IG51bWJlcikge1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBfYWN0aXZlUGxheWxpc3RRdWV1ZVswXTtcbiAgICAgIGlmIChjdXJyZW50SXRlbSkge1xuICAgICAgICBjdXJyZW50SXRlbS5wbGF5YmFja1BsYW4gPSBwbGFuO1xuICAgICAgICBjdXJyZW50SXRlbS5wbGFuSW5kZXggPSBwbGFuSW5kZXg7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcblxuICBsb2dQcm9iZSgnW1N0YXRlTWFuYWdlcl0g5qih5Z2X5Yid5aeL5YyW5a6M5oiQIChWMi4wIOWGheaguCnjgIInKTtcbiAgcmV0dXJuIHB1YmxpY0FQSTtcbn0pKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAyLjEuIOaSreaUvuW8leaTjiAoVGhlIFBsYXliYWNrIEVuZ2luZSlcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBQbGF5YmFja0VuZ2luZSA9ICgoKSA9PiB7XG4gIGxvZ1Byb2JlKCdbUGxheWJhY2tFbmdpbmVdIOaooeWdl+ato+WcqOWIneWni+WMli4uLicpO1xuICBsZXQgX3BsYXllckE6IEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgbGV0IF9wbGF5ZXJCOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIGxldCBfYWN0aXZlUGxheWVyOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIGxldCBfc3RhbmRieVBsYXllcjogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBsZXQgX2ZhZGVJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIGNvbnN0IEZBREVfRFVSQVRJT04gPSA0MDA7XG5cbiAgLy8gLS0tIOengeacieWHveaVsCAtLS1cbiAgZnVuY3Rpb24gX3N3YXBQbGF5ZXJzKCkge1xuICAgIFtfYWN0aXZlUGxheWVyLCBfc3RhbmRieVBsYXllcl0gPSBbX3N0YW5kYnlQbGF5ZXIsIF9hY3RpdmVQbGF5ZXJdO1xuICB9XG5cbiAgZnVuY3Rpb24gX2ZhZGVWb2x1bWVBc3luYyhwbGF5ZXI6IEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsLCB0YXJnZXRWb2x1bWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGlmIChfZmFkZUludGVydmFsKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoX2ZhZGVJbnRlcnZhbCk7XG4gICAgICAgIF9mYWRlSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBsYXllcikgcmV0dXJuIHJlc29sdmUoKTtcblxuICAgICAgY29uc3Qgc3RhcnRWb2x1bWUgPSBwbGF5ZXIudm9sdW1lO1xuICAgICAgY29uc3Qgc3RlcFRpbWUgPSA1MDtcbiAgICAgIGNvbnN0IHN0ZXBzID0gZHVyYXRpb24gLyBzdGVwVGltZTtcbiAgICAgIGlmIChzdGVwcyA8PSAwKSB7XG4gICAgICAgIHBsYXllci52b2x1bWUgPSB0YXJnZXRWb2x1bWU7XG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgICBjb25zdCB2b2x1bWVTdGVwID0gKHRhcmdldFZvbHVtZSAtIHN0YXJ0Vm9sdW1lKSAvIHN0ZXBzO1xuICAgICAgbGV0IGN1cnJlbnRTdGVwID0gMDtcblxuICAgICAgX2ZhZGVJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGN1cnJlbnRTdGVwKys7XG4gICAgICAgIGlmIChjdXJyZW50U3RlcCA+PSBzdGVwcykge1xuICAgICAgICAgIGlmIChfZmFkZUludGVydmFsKSBjbGVhckludGVydmFsKF9mYWRlSW50ZXJ2YWwpO1xuICAgICAgICAgIF9mYWRlSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgIHBsYXllci52b2x1bWUgPSB0YXJnZXRWb2x1bWU7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBsYXllci52b2x1bWUgKz0gdm9sdW1lU3RlcDtcbiAgICAgICAgfVxuICAgICAgfSwgc3RlcFRpbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gLS0tIOWFrOWFseaOpeWPoyAtLS1cbiAgY29uc3QgcHVibGljQVBJID0ge1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICBpZiAoX3BsYXllckEgJiYgX3BsYXllckIpIHJldHVybjtcbiAgICAgIGxvZ1Byb2JlKCdbRW5naW5lXSDmraPlnKjliJvlu7rlkozphY3nva4gSFRNTDUgQXVkaW8g5YWD57SgLi4uJyk7XG4gICAgICBjb25zdCBjcmVhdGVQbGF5ZXIgPSAoKTogSFRNTEF1ZGlvRWxlbWVudCA9PiB7XG4gICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgIGF1ZGlvLnByZWxvYWQgPSAnYXV0byc7XG4gICAgICAgIGF1ZGlvLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG4gICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgICAgIGlmIChhdWRpbyA9PT0gX2FjdGl2ZVBsYXllcikgdm9pZCBfaGFuZGxlVHJhY2tFbmRlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgLyog6ZSZ6K+v55SxIFByb21pc2UgcmVqZWN0IOWkhOeQhiAqL1xuICAgICAgICB9KTtcbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGJyb2FkY2FzdFRpbWVVcGRhdGUpO1xuICAgICAgICByZXR1cm4gYXVkaW87XG4gICAgICB9O1xuICAgICAgX3BsYXllckEgPSBjcmVhdGVQbGF5ZXIoKTtcbiAgICAgIF9wbGF5ZXJCID0gY3JlYXRlUGxheWVyKCk7XG4gICAgICBfYWN0aXZlUGxheWVyID0gX3BsYXllckE7XG4gICAgICBfc3RhbmRieVBsYXllciA9IF9wbGF5ZXJCO1xuICAgICAgbG9nUHJvYmUoJ1tFbmdpbmVdIEF1ZGlvIOWFg+e0oOW3suWwsee7quOAgicpO1xuICAgIH0sXG5cbiAgICBnZXRBY3RpdmVQbGF5ZXI6ICgpID0+IF9hY3RpdmVQbGF5ZXIsXG4gICAgZ2V0U3RhbmRieVBsYXllcjogKCkgPT4gX3N0YW5kYnlQbGF5ZXIsXG5cbiAgICBhc3luYyB0cmFuc2l0aW9uVG9UcmFjayh0YXJnZXRUcmFja1VybDogc3RyaW5nLCB0YXJnZXRWb2x1bWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgbG9nUHJvYmUoYFtFbmdpbmVdIOaUtuWIsOi/h+a4oeivt+axgjogVVJMPSR7dGFyZ2V0VHJhY2tVcmwuc2xpY2UoMCwgNTApfS4uLmAsICdncm91cCcpO1xuXG4gICAgICBpZiAoIV9zdGFuZGJ5UGxheWVyIHx8ICFfYWN0aXZlUGxheWVyKSB7XG4gICAgICAgIGxvZ1Byb2JlKCdbRW5naW5lXSDov4fmuKHkuK3mraLvvJrmkq3mlL7lmajlrp7kvovlsJrmnKrliJ3lp4vljJbjgIInLCAnZXJyb3InKTtcbiAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aSreaUvuWZqOWunuS+i+WwmuacquWIneWni+WMlicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFuZGJ5UGxheWVyID0gX3N0YW5kYnlQbGF5ZXI7XG4gICAgICBjb25zdCBhY3RpdmVQbGF5ZXIgPSBfYWN0aXZlUGxheWVyO1xuXG4gICAgICBzdGFuZGJ5UGxheWVyLnNyYyA9IHRhcmdldFRyYWNrVXJsO1xuICAgICAgc3RhbmRieVBsYXllci5sb2FkKCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25zdCBvbkNhblBsYXkgPSAoKSA9PiB7XG4gICAgICAgICAgICBzdGFuZGJ5UGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgb25DYW5QbGF5KTtcbiAgICAgICAgICAgIHN0YW5kYnlQbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTtcbiAgICAgICAgICAgIGxvZ1Byb2JlKCdbRW5naW5lXSDlpIfnlKjmkq3mlL7lmajliqDovb3miJDlip8gKGNhbnBsYXl0aHJvdWdoKeOAgicsICdsb2cnKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3Qgb25FcnJvciA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgc3RhbmRieVBsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIG9uQ2FuUGxheSk7XG4gICAgICAgICAgICBzdGFuZGJ5UGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgb25FcnJvcik7XG4gICAgICAgICAgICBsb2dQcm9iZShgW0VuZ2luZV0g5aSH55So5pKt5pS+5Zmo5Yqg6L295aSx6LSlIWAsICdlcnJvcicpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEF1ZGlvRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gdGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihg6Z+z6aKR5Yqg6L295aSx6LSlOiAke2Vycm9yPy5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nfWApKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHN0YW5kYnlQbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBvbkNhblBsYXkpO1xuICAgICAgICAgIHN0YW5kYnlQbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dQcm9iZSgnW0VuZ2luZV0g6L+H5rih5Zug5Yqg6L295aSx6LSl6ICM5Lit5q2i44CCJywgJ2dyb3VwRW5kJyk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBfZmFkZVZvbHVtZUFzeW5jKGFjdGl2ZVBsYXllciwgMCwgNTAwKTtcbiAgICAgIGFjdGl2ZVBsYXllci5wYXVzZSgpO1xuXG4gICAgICBfc3dhcFBsYXllcnMoKTtcblxuICAgICAgY29uc3QgbmV3QWN0aXZlUGxheWVyID0gdGhpcy5nZXRBY3RpdmVQbGF5ZXIoKTtcbiAgICAgIGlmICghbmV3QWN0aXZlUGxheWVyKSB0aHJvdyBuZXcgRXJyb3IoJ+aSreaUvuWZqOWunuS+i+WcqOS6pOaNouWQjuS4ouWksScpO1xuXG4gICAgICBjb25zdCBwbGF5UHJvbWlzZSA9IG5ld0FjdGl2ZVBsYXllci5wbGF5KCk7XG4gICAgICBpZiAocGxheVByb21pc2UpIHtcbiAgICAgICAgYXdhaXQgcGxheVByb21pc2U7XG4gICAgICB9XG4gICAgICBhd2FpdCBfZmFkZVZvbHVtZUFzeW5jKG5ld0FjdGl2ZVBsYXllciwgdGFyZ2V0Vm9sdW1lLCA1MDApO1xuXG4gICAgICBsb2dQcm9iZSgnW0VuZ2luZV0g6L+H5rih5oiQ5Yqf5a6M5oiQ44CCJywgJ2dyb3VwRW5kJyk7XG4gICAgfSxcblxuICAgIGFzeW5jIGZhZGVPdXRBbmRQYXVzZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIGxvZ1Byb2JlKCdbRW5naW5lXSDlkb3ku6Q6IEZhZGVPdXRBbmRQYXVzZScpO1xuICAgICAgYXdhaXQgX2ZhZGVWb2x1bWVBc3luYyhfYWN0aXZlUGxheWVyLCAwLCBGQURFX0RVUkFUSU9OKTtcbiAgICAgIF9hY3RpdmVQbGF5ZXI/LnBhdXNlKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIGV4ZWN1dGVIYXJkQ3V0KHRhcmdldFRyYWNrVXJsOiBzdHJpbmcsIHRhcmdldFZvbHVtZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICBsb2dQcm9iZShgW0VuZ2luZTpIYXJkQ3V0XSDmlLbliLDigJznnqzlh7vigJ3or7fmsYI6IFVSTD0ke3RhcmdldFRyYWNrVXJsLnNsaWNlKDAsIDUwKX0uLi5gLCAnZ3JvdXAnKTtcbiAgICAgIGNvbnN0IGFjdGl2ZVBsYXllciA9IHRoaXMuZ2V0QWN0aXZlUGxheWVyKCk7XG4gICAgICBpZiAoIWFjdGl2ZVBsYXllcikge1xuICAgICAgICBsb2dQcm9iZSgnW0VuZ2luZTpIYXJkQ3V0XSDoh7Tlkb3plJnor6/vvJrml6Dlj6/nlKjmkq3mlL7lmajlrp7kvovjgIInLCAnZXJyb3InKTtcbiAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjdGl2ZSBwbGF5ZXIgYXZhaWxhYmxlIGZvciBoYXJkIGN1dC4nKTtcbiAgICAgIH1cblxuICAgICAgbG9nUHJvYmUoYCjmjqLpkogpIOWIh+aNouWJjSBzcmM6ICR7YWN0aXZlUGxheWVyLnNyYy5zbGljZSgtNTApfWApO1xuXG4gICAgICBhY3RpdmVQbGF5ZXIucGF1c2UoKTtcbiAgICAgIGFjdGl2ZVBsYXllci5zcmMgPSB0YXJnZXRUcmFja1VybDtcbiAgICAgIGFjdGl2ZVBsYXllci52b2x1bWUgPSB0YXJnZXRWb2x1bWU7XG5cbiAgICAgIGxvZ1Byb2JlKGAo5o6i6ZKIKSDliIfmjaLlkI4gc3JjOiAke2FjdGl2ZVBsYXllci5zcmMuc2xpY2UoLTUwKX1gKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGxheVByb21pc2UgPSBhY3RpdmVQbGF5ZXIucGxheSgpO1xuICAgICAgICBpZiAocGxheVByb21pc2UpIHtcbiAgICAgICAgICBhd2FpdCBwbGF5UHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0YXRlTWFuYWdlci5zZXRQbGF5YmFja1N0YXRlKCdQTEFZSU5HJyk7XG4gICAgICAgIGxvZ1Byb2JlKCdbRW5naW5lOkhhcmRDdXRdIOKAnOeerOWHu+KAneaSreaUvuaIkOWKn+OAgicpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nUHJvYmUoYFtFbmdpbmU6SGFyZEN1dF0g4oCc556s5Ye74oCd5pKt5pS+5aSx6LSlISDov5npgJrluLjmmK/lm6DkuLrnlKjmiLfmnKrkuI7pobXpnaLkuqTkupLjgIJgLCAnZXJyb3InKTtcblxuICAgICAgICBTdGF0ZU1hbmFnZXIuc2V0UGxheWJhY2tTdGF0ZSgnU1RPUFBFRCcpO1xuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyByZXN1bWVBbmRGYWRlSW4odGFyZ2V0Vm9sdW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIGxvZ1Byb2JlKCdbRW5naW5lXSDlkb3ku6Q6IFJlc3VtZUFuZEZhZGVJbicpO1xuICAgICAgY29uc3QgcGxheVByb21pc2UgPSBfYWN0aXZlUGxheWVyPy5wbGF5KCk7XG4gICAgICBpZiAocGxheVByb21pc2UpIGF3YWl0IHBsYXlQcm9taXNlO1xuICAgICAgYXdhaXQgX2ZhZGVWb2x1bWVBc3luYyhfYWN0aXZlUGxheWVyLCB0YXJnZXRWb2x1bWUsIEZBREVfRFVSQVRJT04pO1xuICAgIH0sXG4gIH07XG5cbiAgbG9nUHJvYmUoJ1tQbGF5YmFja0VuZ2luZV0g5qih5Z2X5Yid5aeL5YyW5a6M5oiQ44CCJyk7XG4gIHJldHVybiBwdWJsaWNBUEk7XG59KSgpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gMi4yLiDmkq3mlL7nrZbnlaXlrp7njrAgKFBsYXliYWNrIFN0cmF0ZWdpZXMpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbGFzcyBMaXN0U3RyYXRlZ3kgaW1wbGVtZW50cyBJUGxheWJhY2tTdHJhdGVneSB7XG4gIHB1YmxpYyBvblF1ZXVlQ2hhbmdlZChfY3VycmVudEl0ZW06IFF1ZXVlSXRlbSB8IHVuZGVmaW5lZCk6IHZvaWQge31cblxuICBwdWJsaWMgYWR2YW5jZShjdXJyZW50SXRlbTogUXVldWVJdGVtLCBkaXJlY3Rpb246ICduZXh0JyB8ICdwcmV2Jyk6IFN0cmF0ZWd5RGVjaXNpb24ge1xuICAgIGxvZ1Byb2JlKFxuICAgICAgYFtTdHJhdGVneTpMaXN0XSDmlLbliLAgYWR2YW5jZSDor7fmsYIuIOaWueWQkTogJHtkaXJlY3Rpb259LCDlvZPliY06IHsgcGxheWxpc3RJZDogXCIke2N1cnJlbnRJdGVtLnBsYXlsaXN0SWR9XCIsIGluZGV4OiAke2N1cnJlbnRJdGVtLmN1cnJlbnRJbmRleH0sIHJ1bGU6IFwiJHtjdXJyZW50SXRlbS5vbkZpbmlzaFJ1bGV9XCIgfWAsXG4gICAgKTtcblxuICAgIGlmIChkaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgbG9nUHJvYmUoJ1tTdHJhdGVneTpMaXN0XSDlhrPnrZY6IGFkdmFuY2UobmV4dCkgLT4g5aeU5omY57uZIG9uVHJhY2tFbmQnKTtcbiAgICAgIHJldHVybiB0aGlzLm9uVHJhY2tFbmQoY3VycmVudEl0ZW0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY3VycmVudEluZGV4LCBvbkZpbmlzaFJ1bGUsIHBsYXlsaXN0Q29udGVudCB9ID0gY3VycmVudEl0ZW07XG4gICAgY29uc3QgdG90YWxUcmFja3MgPSBwbGF5bGlzdENvbnRlbnQubGVuZ3RoO1xuXG4gICAgaWYgKGN1cnJlbnRJbmRleCA+IDApIHtcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7XG4gICAgICBsb2dQcm9iZShgW1N0cmF0ZWd5Okxpc3RdIOWGs+etljogYWR2YW5jZShwcmV2KSAtPiBHb1RvIChpbmRleDogJHtuZXh0SW5kZXh9KWApO1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnR29UbycsIG5leHRJbmRleCB9O1xuICAgIH0gZWxzZSBpZiAob25GaW5pc2hSdWxlID09PSAnbG9vcCcpIHtcbiAgICAgIGNvbnN0IGxhc3RJbmRleCA9IHRvdGFsVHJhY2tzID4gMCA/IHRvdGFsVHJhY2tzIC0gMSA6IDA7XG4gICAgICBsb2dQcm9iZShgW1N0cmF0ZWd5Okxpc3RdIOWGs+etljogYWR2YW5jZShwcmV2KSBhdCBzdGFydCAtPiBMb29wIHRvIGVuZCAoaW5kZXg6ICR7bGFzdEluZGV4fSlgKTtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ0dvVG8nLCBuZXh0SW5kZXg6IGxhc3RJbmRleCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dQcm9iZSgnW1N0cmF0ZWd5Okxpc3RdIOWGs+etljogYWR2YW5jZShwcmV2KSBhdCBzdGFydCAtPiBSZXN0YXJ0Jyk7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdSZXN0YXJ0JyB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblRyYWNrRW5kKGN1cnJlbnRJdGVtOiBRdWV1ZUl0ZW0pOiBTdHJhdGVneURlY2lzaW9uIHtcbiAgICBsb2dQcm9iZShcbiAgICAgIGBbU3RyYXRlZ3k6TGlzdF0g5pS25YiwIG9uVHJhY2tFbmQg6K+35rGCLiDlvZPliY06IHsgcGxheWxpc3RJZDogXCIke2N1cnJlbnRJdGVtLnBsYXlsaXN0SWR9XCIsIGluZGV4OiAke2N1cnJlbnRJdGVtLmN1cnJlbnRJbmRleH0sIHJ1bGU6IFwiJHtjdXJyZW50SXRlbS5vbkZpbmlzaFJ1bGV9XCIgfWAsXG4gICAgKTtcblxuICAgIGNvbnN0IHsgY3VycmVudEluZGV4LCBvbkZpbmlzaFJ1bGUsIHBsYXlsaXN0Q29udGVudCwgcGxheWVkSW5kaWNlcyB9ID0gY3VycmVudEl0ZW07XG4gICAgY29uc3QgdG90YWxUcmFja3MgPSBwbGF5bGlzdENvbnRlbnQubGVuZ3RoO1xuICAgIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCArIDE7XG5cbiAgICBpZiAobmV4dEluZGV4IDwgdG90YWxUcmFja3MpIHtcbiAgICAgIGxvZ1Byb2JlKGBbU3RyYXRlZ3k6TGlzdF0g5Yaz562WOiBvblRyYWNrRW5kIC0+IEdvVG8gKGluZGV4OiAke25leHRJbmRleH0pYCk7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdHb1RvJywgbmV4dEluZGV4IH07XG4gICAgfSBlbHNlIGlmIChvbkZpbmlzaFJ1bGUgPT09ICdwb3AnKSB7XG4gICAgICBsb2dQcm9iZSgnW1N0cmF0ZWd5Okxpc3RdIOWGs+etljogb25UcmFja0VuZCBhdCBlbmQgLT4gUG9wU3RhY2snKTtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ1JlbW92ZVRvcEFuZEFkdmFuY2UnIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRvdGFsVmFsaWRUcmFja3MgPSBwbGF5bGlzdENvbnRlbnQubGVuZ3RoO1xuICAgICAgY29uc3QgaGlzdG9yeVNpemVBZnRlclRoaXNUcmFjayA9IHBsYXllZEluZGljZXMuc2l6ZSArIDE7XG5cbiAgICAgIGlmIChoaXN0b3J5U2l6ZUFmdGVyVGhpc1RyYWNrID49IHRvdGFsVmFsaWRUcmFja3MpIHtcbiAgICAgICAgbG9nUHJvYmUoYFtTdHJhdGVneTpMaXN0XSDlhrPnrZY6IG9uVHJhY2tFbmQgYXQgZW5kIC0+IExvb3BSZXNldCAo5LiA5Liq5a6M5pW055qE5b6q546v5bey57uT5p2fKWAsICd3YXJuJyk7XG4gICAgICAgIHJldHVybiB7IGFjdGlvbjogJ0xvb3BSZXNldCcgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ1Byb2JlKGBbU3RyYXRlZ3k6TGlzdF0g5Yaz562WOiBvblRyYWNrRW5kIGF0IGVuZCAtPiBHb1RvICjmma7pgJrlvqrnjq/vvIznu6fnu63mkq3mlL7mnKrlkKzov4fnmoTmrYzmm7IpYCk7XG4gICAgICAgIHJldHVybiB7IGFjdGlvbjogJ0dvVG8nLCBuZXh0SW5kZXg6IDAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25QbGF5YmFja0Vycm9yKGN1cnJlbnRJdGVtOiBRdWV1ZUl0ZW0pOiBTdHJhdGVneURlY2lzaW9uIHtcbiAgICBsb2dQcm9iZShgW1N0cmF0ZWd5Okxpc3RdIOaUtuWIsCBvblBsYXliYWNrRXJyb3Ig6K+35rGC44CC5Yaz562WOiDlp5TmiZjnu5kgYWR2YW5jZSgnbmV4dCcpYCk7XG4gICAgcmV0dXJuIHRoaXMuYWR2YW5jZShjdXJyZW50SXRlbSwgJ25leHQnKTtcbiAgfVxufVxuXG5jbGFzcyBTaW5nbGVTdHJhdGVneSBpbXBsZW1lbnRzIElQbGF5YmFja1N0cmF0ZWd5IHtcbiAgcHVibGljIG9uUXVldWVDaGFuZ2VkKF9jdXJyZW50SXRlbTogUXVldWVJdGVtIHwgdW5kZWZpbmVkKTogdm9pZCB7fVxuXG4gIHB1YmxpYyBhZHZhbmNlKF9jdXJyZW50SXRlbTogUXVldWVJdGVtLCBkaXJlY3Rpb246ICduZXh0JyB8ICdwcmV2Jyk6IFN0cmF0ZWd5RGVjaXNpb24ge1xuICAgIGxvZ1Byb2JlKGBbU3RyYXRlZ3k6U2luZ2xlXSDmlLbliLAgYWR2YW5jZSDor7fmsYIuIOaWueWQkTogJHtkaXJlY3Rpb259LiDlhrPnrZY6IFJlc3RhcnRgKTtcbiAgICByZXR1cm4geyBhY3Rpb246ICdSZXN0YXJ0JyB9O1xuICB9XG5cbiAgcHVibGljIG9uVHJhY2tFbmQoX2N1cnJlbnRJdGVtOiBRdWV1ZUl0ZW0pOiBTdHJhdGVneURlY2lzaW9uIHtcbiAgICBsb2dQcm9iZShgW1N0cmF0ZWd5OlNpbmdsZV0g5pS25YiwIG9uVHJhY2tFbmQg6K+35rGCLiDlhrPnrZY6IFJlc3RhcnRgKTtcbiAgICByZXR1cm4geyBhY3Rpb246ICdSZXN0YXJ0JyB9O1xuICB9XG5cbiAgcHVibGljIG9uUGxheWJhY2tFcnJvcihfY3VycmVudEl0ZW06IFF1ZXVlSXRlbSk6IFN0cmF0ZWd5RGVjaXNpb24ge1xuICAgIGxvZ1Byb2JlKGBbU3RyYXRlZ3k6U2luZ2xlXSDmlLbliLAgb25QbGF5YmFja0Vycm9yIOivt+axguOAguWGs+etljogU3RvcCAo5Y2V5puy5b6q546v5LiL5peg5rOV6Ieq5Yqo5YmN6L+bKWApO1xuICAgIHJldHVybiB7IGFjdGlvbjogJ1N0b3AnIH07XG4gIH1cbn1cblxuY2xhc3MgUmFuZG9tU3RyYXRlZ3kgaW1wbGVtZW50cyBJUGxheWJhY2tTdHJhdGVneSB7XG4gIHByaXZhdGUgX2dlbmVyYXRlSW50ZWxsaWdlbnRTaHVmZmxlKFxuICAgIGFsbFRyYWNrSW5kaWNlczogbnVtYmVyW10sXG4gICAgcGxheWVkSW5kaWNlczogU2V0PG51bWJlcj4sXG4gICAgY3VycmVudEluZGV4OiBudW1iZXIsXG4gICk6IG51bWJlcltdIHtcbiAgICBsb2dQcm9iZShgW1N0cmF0ZWd5OlJhbmRvbV0gKEFsZ28pIF9nZW5lcmF0ZUludGVsbGlnZW50U2h1ZmZsZSDmiafooYwuLi5gLCAnZ3JvdXBDb2xsYXBzZWQnKTtcbiAgICBsb2dQcm9iZShcbiAgICAgIGDovpPlhaU6IGFsbEluZGljZXMubGVuZ3RoPSR7YWxsVHJhY2tJbmRpY2VzLmxlbmd0aH0sIHBsYXllZEluZGljZXMuc2l6ZT0ke3BsYXllZEluZGljZXMuc2l6ZX0sIGN1cnJlbnRJbmRleD0ke2N1cnJlbnRJbmRleH1gLFxuICAgICk7XG5cbiAgICBjb25zdCBzb3VyY2VGb3JTaHVmZmxlID0gYWxsVHJhY2tJbmRpY2VzLmZpbHRlcihpID0+ICFwbGF5ZWRJbmRpY2VzLmhhcyhpKSAmJiBpICE9PSBjdXJyZW50SW5kZXgpO1xuICAgIGxvZ1Byb2JlKGDorqHnrpflvoXpgInmsaAgKHNvdXJjZUZvclNodWZmbGUpIOWkp+WwjzogJHtzb3VyY2VGb3JTaHVmZmxlLmxlbmd0aH1gKTtcblxuICAgIGZvciAobGV0IGkgPSBzb3VyY2VGb3JTaHVmZmxlLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgIFtzb3VyY2VGb3JTaHVmZmxlW2ldLCBzb3VyY2VGb3JTaHVmZmxlW2pdXSA9IFtzb3VyY2VGb3JTaHVmZmxlW2pdLCBzb3VyY2VGb3JTaHVmZmxlW2ldXTtcbiAgICB9XG5cbiAgICBsb2dQcm9iZShg5rSX54mM5a6M5oiQLiDovpPlh7ogc2h1ZmZsZWRJbmRpY2VzICjnuq/nsrnnmoTmnKrmnaXpmJ/liJcpOiBbJHtzb3VyY2VGb3JTaHVmZmxlLmpvaW4oJywgJyl9XWApO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm4gc291cmNlRm9yU2h1ZmZsZTtcbiAgfVxuXG4gIHByaXZhdGUgX2dlbmVyYXRlUGxheWJhY2tQbGFuKFxuICAgIHBsYXllZEluZGljZXM6IFNldDxudW1iZXI+LFxuICAgIGN1cnJlbnRJbmRleDogbnVtYmVyLFxuICAgIHNodWZmbGVkSW5kaWNlczogbnVtYmVyW10sXG4gICk6IHsgcGxheWJhY2tQbGFuOiBudW1iZXJbXTsgcGxhbkluZGV4OiBudW1iZXIgfSB7XG4gICAgbG9nUHJvYmUoYFtTdHJhdGVneTpSYW5kb21dIChBbGdvKSBfZ2VuZXJhdGVQbGF5YmFja1BsYW4g5omn6KGMLi4uYCwgJ2dyb3VwQ29sbGFwc2VkJyk7XG4gICAgbG9nUHJvYmUoXG4gICAgICBg6L6T5YWlOiBwbGF5ZWRJbmRpY2VzLnNpemU9JHtwbGF5ZWRJbmRpY2VzLnNpemV9LCBjdXJyZW50SW5kZXg9JHtjdXJyZW50SW5kZXh9LCBzaHVmZmxlZEluZGljZXMubGVuZ3RoPSR7c2h1ZmZsZWRJbmRpY2VzLmxlbmd0aH1gLFxuICAgICk7XG5cbiAgICBjb25zdCBrbm93blNlcXVlbmNlID0gQXJyYXkuZnJvbShuZXcgU2V0KFsuLi5wbGF5ZWRJbmRpY2VzLCBjdXJyZW50SW5kZXhdKSk7XG4gICAgY29uc3QgcGxhbkluZGV4ID0ga25vd25TZXF1ZW5jZS5pbmRleE9mKGN1cnJlbnRJbmRleCk7XG4gICAgY29uc3QgcGxheWJhY2tQbGFuID0gWy4uLmtub3duU2VxdWVuY2UsIC4uLnNodWZmbGVkSW5kaWNlc107XG5cbiAgICBsb2dQcm9iZShgKOWuiOaKpOiAheaOoumSiCkgXCLlt7Lnn6Xluo/liJdcIiAodW5pcXVlIGhpc3RvcnkgKyBjdXJyZW50KTogWyR7a25vd25TZXF1ZW5jZS5qb2luKCcsICcpfV1gKTtcbiAgICBsb2dQcm9iZShg55Sf5oiQ5a+86Iiq5Zyw5Zu+IChwbGF5YmFja1BsYW4pOiBbJHtwbGF5YmFja1BsYW4uam9pbignLCAnKX1dYCk7XG4gICAgbG9nUHJvYmUoYOWumuS9jeWvvOiIquaMh+mSiCAocGxhbkluZGV4KTogJHtwbGFuSW5kZXh9YCk7XG4gICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuXG4gICAgcmV0dXJuIHsgcGxheWJhY2tQbGFuLCBwbGFuSW5kZXggfTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVBsYW5FbmQoY3VycmVudEl0ZW06IFF1ZXVlSXRlbSk6IFN0cmF0ZWd5RGVjaXNpb24ge1xuICAgIGxvZ1Byb2JlKGBbU3RyYXRlZ3k6UmFuZG9tXSAoSGVscGVyKSBfaGFuZGxlUGxhbkVuZDog5bey5Yiw6L6+6K6h5YiS57uI54K577yM5byA5aeL6L+b6KGM6L6555WM5Yaz562WLi4uYCwgJ2dyb3VwQ29sbGFwc2VkJyk7XG4gICAgbG9nUHJvYmUoYCjmjqLpkogpIOW+heWGs+etluatjOWNlTogXCIke2N1cnJlbnRJdGVtLnBsYXlsaXN0SWR9XCIsIOe7k+adn+inhOWImTogXCIke2N1cnJlbnRJdGVtLm9uRmluaXNoUnVsZX1cImApO1xuXG4gICAgaWYgKGN1cnJlbnRJdGVtLm9uRmluaXNoUnVsZSA9PT0gJ3BvcCcpIHtcbiAgICAgIGxvZ1Byb2JlKGAo6L6555WM5Yaz562WKSBvbkZpbmlzaFJ1bGUg5Li6ICdwb3An77yM5Yaz562WIC0+IFBvcFN0YWNrYCk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdSZW1vdmVUb3BBbmRBZHZhbmNlJyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dQcm9iZShgKOi+ueeVjOWGs+etlikgb25GaW5pc2hSdWxlIOS4uiAnbG9vcCfvvIzlhrPnrZYgLT4gTG9vcFJlc2V0YCk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdMb29wUmVzZXQnIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uUXVldWVDaGFuZ2VkKGN1cnJlbnRJdGVtOiBRdWV1ZUl0ZW0gfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICBpZiAoIWN1cnJlbnRJdGVtKSB7XG4gICAgICBsb2dQcm9iZSgnW1N0cmF0ZWd5OlJhbmRvbV0gb25RdWV1ZUNoYW5nZWQg5Lit5q2i77ya5peg5pyJ5pWI55qE5b2T5YmN6aG544CCJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbG9nUHJvYmUoXG4gICAgICBgW1N0cmF0ZWd5OlJhbmRvbV0gb25RdWV1ZUNoYW5nZWQg5bey6Kem5Y+RICjov57nu63mgKfmgaLlpI0p77yM5bCG5Li65q2M5Y2VIFwiJHtjdXJyZW50SXRlbS5wbGF5bGlzdElkfVwiIOeUn+aIkOaSreaUvuiuoeWIki4uLmAsXG4gICAgKTtcblxuICAgIGNvbnN0IGFsbEluZGljZXMgPSBjdXJyZW50SXRlbS5wbGF5bGlzdENvbnRlbnQubWFwKChfLCBpKSA9PiBpKTtcbiAgICBjb25zdCBzaHVmZmxlZCA9IHRoaXMuX2dlbmVyYXRlSW50ZWxsaWdlbnRTaHVmZmxlKGFsbEluZGljZXMsIGN1cnJlbnRJdGVtLnBsYXllZEluZGljZXMsIGN1cnJlbnRJdGVtLmN1cnJlbnRJbmRleCk7XG4gICAgY29uc3QgeyBwbGF5YmFja1BsYW4sIHBsYW5JbmRleCB9ID0gdGhpcy5fZ2VuZXJhdGVQbGF5YmFja1BsYW4oXG4gICAgICBjdXJyZW50SXRlbS5wbGF5ZWRJbmRpY2VzLFxuICAgICAgY3VycmVudEl0ZW0uY3VycmVudEluZGV4LFxuICAgICAgc2h1ZmZsZWQsXG4gICAgKTtcblxuICAgIFN0YXRlTWFuYWdlci5hcHBseU5ld1BsYXliYWNrUGxhbihwbGF5YmFja1BsYW4sIHBsYW5JbmRleCk7XG4gIH1cblxuICBwdWJsaWMgcHJlcGFyZUdlbmVzaXMoY3VycmVudEl0ZW06IFF1ZXVlSXRlbSB8IHVuZGVmaW5lZCk6IHtcbiAgICBuZXdDdXJyZW50SW5kZXg6IG51bWJlcjtcbiAgICBuZXdQbGF5YmFja1BsYW46IG51bWJlcltdO1xuICAgIG5ld1BsYW5JbmRleDogbnVtYmVyO1xuICB9IHwgbnVsbCB7XG4gICAgaWYgKCFjdXJyZW50SXRlbSB8fCAhY3VycmVudEl0ZW0ucGxheWxpc3RDb250ZW50KSB7XG4gICAgICBsb2dQcm9iZSgnW1N0cmF0ZWd5OlJhbmRvbV0gcHJlcGFyZUdlbmVzaXMg5Lit5q2i77ya5Lyg5YWl55qE6Zif5YiX6aG55peg5pWI44CCJywgJ2Vycm9yJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsb2dQcm9iZSgnW1N0cmF0ZWd5OlJhbmRvbV0gKFF1ZXJ5KSBwcmVwYXJlR2VuZXNpczog5pS25Yiw4oCc5Yib5LiW5LmQ6LCx4oCd6LCx5YaZ6K+35rGCLi4uJywgJ2dyb3VwJyk7XG5cbiAgICBjb25zdCBhbGxJbmRpY2VzID0gY3VycmVudEl0ZW0ucGxheWxpc3RDb250ZW50Lm1hcCgoXywgaSkgPT4gaSk7XG4gICAgZm9yIChsZXQgaSA9IGFsbEluZGljZXMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgW2FsbEluZGljZXNbaV0sIGFsbEluZGljZXNbal1dID0gW2FsbEluZGljZXNbal0sIGFsbEluZGljZXNbaV1dO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld1BsYXliYWNrUGxhbiA9IGFsbEluZGljZXM7XG4gICAgY29uc3QgbmV3UGxhbkluZGV4ID0gMDtcbiAgICBjb25zdCBuZXdDdXJyZW50SW5kZXggPSBuZXdQbGF5YmFja1BsYW5bbmV3UGxhbkluZGV4XTtcblxuICAgIGxvZ1Byb2JlKGAo5LmQ6LCxKSDosLHlhpnlrozmiJDjgIJOZXcgQ3VycmVudEluZGV4OiAke25ld0N1cnJlbnRJbmRleH0sIE5ldyBQbGFuSW5kZXg6ICR7bmV3UGxhbkluZGV4fWApO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcblxuICAgIHJldHVybiB7IG5ld0N1cnJlbnRJbmRleCwgbmV3UGxheWJhY2tQbGFuLCBuZXdQbGFuSW5kZXggfTtcbiAgfVxuXG4gIHB1YmxpYyBhZHZhbmNlKGN1cnJlbnRJdGVtOiBRdWV1ZUl0ZW0sIGRpcmVjdGlvbjogJ25leHQnIHwgJ3ByZXYnKTogU3RyYXRlZ3lEZWNpc2lvbiB7XG4gICAgbG9nUHJvYmUoYFtTdHJhdGVneTpSYW5kb21dIOaUtuWIsCBhZHZhbmNlIOivt+axgi4g5pa55ZCROiAke2RpcmVjdGlvbn1gLCAnZ3JvdXBDb2xsYXBzZWQnKTtcblxuICAgIGNvbnN0IHsgcGxheWJhY2tQbGFuLCBwbGFuSW5kZXggfSA9IGN1cnJlbnRJdGVtO1xuXG4gICAgaWYgKCFwbGF5YmFja1BsYW4gfHwgcGxhbkluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxvZ1Byb2JlKCdbU3RyYXRlZ3k6UmFuZG9tXSDlhrPnrZbkuK3mraLvvJrlr7zoiKrorqHliJIgKHBsYXliYWNrUGxhbikg5bCa5pyq5Yid5aeL5YyW44CCJywgJ2Vycm9yJyk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdEb05vdGhpbmcnIH07XG4gICAgfVxuXG4gICAgbG9nUHJvYmUoYCjmjqLpkogpIOW9k+WJjeWvvOiIquaMh+mSiCAocGxhbkluZGV4KTogJHtwbGFuSW5kZXh9YCk7XG4gICAgbG9nUHJvYmUoYCjmjqLpkogpIOWvvOiIquWcsOWbviAocGxheWJhY2tQbGFuKTogWyR7cGxheWJhY2tQbGFuLmpvaW4oJywgJyl9XWApO1xuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICBjb25zdCBuZXh0UGxhbkluZGV4ID0gcGxhbkluZGV4ICsgMTtcblxuICAgICAgaWYgKG5leHRQbGFuSW5kZXggPCBwbGF5YmFja1BsYW4ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFRyYWNrSW5kZXggPSBwbGF5YmFja1BsYW5bbmV4dFBsYW5JbmRleF07XG4gICAgICAgIGxvZ1Byb2JlKFxuICAgICAgICAgIGBbU3RyYXRlZ3k6UmFuZG9tXSDlhrPnrZY6IGFkdmFuY2UobmV4dCkgLT4gR29UbyAo5pawIHBsYW5JbmRleDogJHtuZXh0UGxhbkluZGV4fSwg55uu5qCHIHRyYWNrSW5kZXg6ICR7dGFyZ2V0VHJhY2tJbmRleH0pYCxcbiAgICAgICAgKTtcbiAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgICByZXR1cm4geyBhY3Rpb246ICdHb1RvJywgbmV4dEluZGV4OiB0YXJnZXRUcmFja0luZGV4IH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dQcm9iZSgnW1N0cmF0ZWd5OlJhbmRvbV0gYWR2YW5jZShuZXh0KSDlt7LliLDovr7orqHliJLnu4jngrnvvIzlp5TmiZjnu5kgX2hhbmRsZVBsYW5FbmQuLi4nKTtcbiAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlUGxhbkVuZChjdXJyZW50SXRlbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRpcmVjdGlvbiA9PT0gJ3ByZXYnXG4gICAgICBjb25zdCBwcmV2UGxhbkluZGV4ID0gcGxhbkluZGV4IC0gMTtcblxuICAgICAgaWYgKHByZXZQbGFuSW5kZXggPj0gMCkge1xuICAgICAgICBjb25zdCB0YXJnZXRUcmFja0luZGV4ID0gcGxheWJhY2tQbGFuW3ByZXZQbGFuSW5kZXhdO1xuICAgICAgICBsb2dQcm9iZShcbiAgICAgICAgICBgW1N0cmF0ZWd5OlJhbmRvbV0g5Yaz562WOiBhZHZhbmNlKHByZXYpIC0+IEdvVG8gKOaWsCBwbGFuSW5kZXg6ICR7cHJldlBsYW5JbmRleH0sIOebruaghyB0cmFja0luZGV4OiAke3RhcmdldFRyYWNrSW5kZXh9KWAsXG4gICAgICAgICk7XG4gICAgICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnR29UbycsIG5leHRJbmRleDogdGFyZ2V0VHJhY2tJbmRleCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoYFtTdHJhdGVneTpSYW5kb21dIOWGs+etljogYWR2YW5jZShwcmV2KSDlt7LlnKjorqHliJLotbfngrnjgILov5Tlm54gRG9Ob3RoaW5n44CCYCk7XG4gICAgICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnRG9Ob3RoaW5nJyB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblRyYWNrRW5kKGN1cnJlbnRJdGVtOiBRdWV1ZUl0ZW0pOiBTdHJhdGVneURlY2lzaW9uIHtcbiAgICBsb2dQcm9iZShgW1N0cmF0ZWd5OlJhbmRvbV0g5pS25YiwIG9uVHJhY2tFbmQg6K+35rGCLmAsICdncm91cENvbGxhcHNlZCcpO1xuXG4gICAgY29uc3QgeyBwbGF5YmFja1BsYW4sIHBsYW5JbmRleCB9ID0gY3VycmVudEl0ZW07XG5cbiAgICBpZiAoIXBsYXliYWNrUGxhbiB8fCBwbGFuSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgbG9nUHJvYmUoJ1tTdHJhdGVneTpSYW5kb21dIOWGs+etluS4reatou+8muWvvOiIquiuoeWIkiAocGxheWJhY2tQbGFuKSDlsJrmnKrliJ3lp4vljJbjgILov5Tlm54gU3RvcCDku6XnrZblronlhajjgIInLCAnZXJyb3InKTtcbiAgICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ1N0b3AnIH07XG4gICAgfVxuXG4gICAgbG9nUHJvYmUoYCjmjqLpkogpIOW9k+WJjeWvvOiIquaMh+mSiCAocGxhbkluZGV4KTogJHtwbGFuSW5kZXh9YCk7XG4gICAgbG9nUHJvYmUoYCjmjqLpkogpIOWvvOiIquWcsOWbviAocGxheWJhY2tQbGFuKTogWyR7cGxheWJhY2tQbGFuLmpvaW4oJywgJyl9XWApO1xuXG4gICAgY29uc3QgbmV4dFBsYW5JbmRleCA9IHBsYW5JbmRleCArIDE7XG5cbiAgICBpZiAobmV4dFBsYW5JbmRleCA8IHBsYXliYWNrUGxhbi5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHRhcmdldFRyYWNrSW5kZXggPSBwbGF5YmFja1BsYW5bbmV4dFBsYW5JbmRleF07XG4gICAgICBsb2dQcm9iZShcbiAgICAgICAgYFtTdHJhdGVneTpSYW5kb21dIOWGs+etljogb25UcmFja0VuZCAtPiBHb1RvICjmlrAgcGxhbkluZGV4OiAke25leHRQbGFuSW5kZXh9LCDnm67moIcgdHJhY2tJbmRleDogJHt0YXJnZXRUcmFja0luZGV4fSlgLFxuICAgICAgKTtcbiAgICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ0dvVG8nLCBuZXh0SW5kZXg6IHRhcmdldFRyYWNrSW5kZXggfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nUHJvYmUoJ1tTdHJhdGVneTpSYW5kb21dIG9uVHJhY2tFbmQg5bey5Yiw6L6+6K6h5YiS57uI54K577yM5aeU5omY57uZIF9oYW5kbGVQbGFuRW5kLi4uJyk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUGxhbkVuZChjdXJyZW50SXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uUGxheWJhY2tFcnJvcihjdXJyZW50SXRlbTogUXVldWVJdGVtKTogU3RyYXRlZ3lEZWNpc2lvbiB7XG4gICAgbG9nUHJvYmUoYFtTdHJhdGVneTpSYW5kb21dIOaUtuWIsCBvblBsYXliYWNrRXJyb3Ig6K+35rGC44CC5Yaz562WOiDlp5TmiZjnu5kgYWR2YW5jZSgnbmV4dCcpYCk7XG4gICAgcmV0dXJuIHRoaXMuYWR2YW5jZShjdXJyZW50SXRlbSwgJ25leHQnKTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gMi4zLiDnrZbnlaXnrqHnkIblmaggKFRoZSBTdHJhdGVneU1hbmFnZXIgLSBcIlRoZSBDb25kdWN0b3JcIilcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBTdHJhdGVneU1hbmFnZXIgPSAoKCkgPT4ge1xuICBsb2dQcm9iZSgnW1N0cmF0ZWd5TWFuYWdlcl0g5qih5Z2X5q2j5Zyo5Yid5aeL5YyWLi4uJyk7XG5cbiAgY29uc3QgX3N0cmF0ZWdpZXM6IFJlY29yZDxQbGF5YmFja01vZGUsIElQbGF5YmFja1N0cmF0ZWd5PiA9IHtcbiAgICBsaXN0OiBuZXcgTGlzdFN0cmF0ZWd5KCksXG4gICAgc2luZ2xlOiBuZXcgU2luZ2xlU3RyYXRlZ3koKSxcbiAgICByYW5kb206IG5ldyBSYW5kb21TdHJhdGVneSgpLFxuICB9O1xuICBsZXQgX2N1cnJlbnRTdHJhdGVneTogSVBsYXliYWNrU3RyYXRlZ3kgPSBfc3RyYXRlZ2llcy5saXN0O1xuXG4gIGNvbnN0IHB1YmxpY0FQSSA9IHtcbiAgICAvKipcbiAgICAgKiBb5ZG95LukXSDorr7nva7mlrDnmoTmkq3mlL7mqKHlvI/vvIzlubboh6rliqjliIfmjaLliLDlr7nlupTnmoTnrZbnlaXlrp7kvovjgIJcbiAgICAgKi9cbiAgICBzZXRNb2RlKG1vZGU6IFBsYXliYWNrTW9kZSkge1xuICAgICAgbG9nUHJvYmUoYFtTdHJhdGVneU1hbmFnZXJdIChDb21tYW5kKSBzZXRNb2RlOiDliIfmjaLnrZbnlaXmqKHlvI/kuLogLT4gJHttb2RlfWApO1xuICAgICAgX2N1cnJlbnRTdHJhdGVneSA9IF9zdHJhdGVnaWVzW21vZGVdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBb5p+l6K+iXSDojrflj5blvZPliY3mv4DmtLvnmoTnrZbnlaXlrp7kvovjgILov5nmmK/miJHku6zpgbXlvqpDUVPljp/liJnnmoTkvZPnjrDjgIJcbiAgICAgKi9cbiAgICBnZXRDdXJyZW50U3RyYXRlZ3k6ICgpID0+IF9jdXJyZW50U3RyYXRlZ3ksXG5cbiAgICAvKipcbiAgICAgKiBb5ZG95LukXSDpgJrnn6XlvZPliY3nrZbnlaXvvJrmoLjlv4PnirbmgIHvvIjlpoLpmJ/liJfvvInlt7Llj5HnlJ/ph43lpKflj5jljJbjgIJcbiAgICAgKiDov5nmmK/kv67lpI1CVUfnmoTmoLjlv4PvvIzlroPkuLrnrZbnlaXmj5DkvpvkuobkuIDkuKrnu5/kuIDnmoTnlJ/lkb3lkajmnJ/pkqnlrZDjgIJcbiAgICAgKi9cblxuICAgIG5vdGlmeVF1ZXVlQ2hhbmdlZCgpIHtcbiAgICAgIGxvZ1Byb2JlKFxuICAgICAgICBgW1N0cmF0ZWd5TWFuYWdlcl0gKENvbW1hbmQpIG5vdGlmeVF1ZXVlQ2hhbmdlZDog5q2j5Zyo6YCa55+l5b2T5YmN562W55WlICgke19jdXJyZW50U3RyYXRlZ3kuY29uc3RydWN0b3IubmFtZX0pIOmYn+WIl+W3suWPmOabtC4uLmAsXG4gICAgICAgICdncm91cENvbGxhcHNlZCcsXG4gICAgICApO1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gICAgICBfY3VycmVudFN0cmF0ZWd5Lm9uUXVldWVDaGFuZ2VkKGN1cnJlbnRJdGVtKTtcbiAgICAgIGxvZ1Byb2JlKCdbU3RyYXRlZ3lNYW5hZ2VyXSDpgJrnn6XlrozmiJDjgIInLCAnZ3JvdXBFbmQnKTtcbiAgICB9LFxuICB9O1xuXG4gIGxvZ1Byb2JlKCdbU3RyYXRlZ3lNYW5hZ2VyXSDmqKHlnZfliJ3lp4vljJblrozmiJDjgIInKTtcbiAgcmV0dXJuIHB1YmxpY0FQSTtcbn0pKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAzLiDlhajlsYDlj5jph4/kuI7luLjph48gKEdsb2JhbCBWYXJpYWJsZXMgJiBDb25zdGFudHMpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBTVEFURV9LRVkgPSAn5L2Z54Os5Y+M5pifX+aSreaUvuWZqOeKtuaAgSc7XG5cbmxldCBpc0luaXRpYWxpemVkRm9yVGhpc0NoYXQgPSBmYWxzZTtcbmxldCBpc1JlY29uY2lsaW5nID0gZmFsc2U7XG5sZXQgX2luaXRpYWxpemF0aW9uUHJvbWlzZUNvbnRyb2xzOiB7IHJlc29sdmU6ICgpID0+IHZvaWQ7IHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZCB9IHwgbnVsbCA9IG51bGw7XG5cbmxldCBfaW5pdGlhbGl6YXRpb25Qcm9taXNlOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XG5sZXQgaXNTY3JpcHRBY3RpdmUgPSB0cnVlO1xubGV0IGFsbFBsYXlsaXN0czogUmVjb3JkPHN0cmluZywgUGxheWxpc3RDb25maWc+ID0ge307XG5sZXQgdHJpZ2dlcnM6IHouaW5mZXI8dHlwZW9mIFpvZFRyaWdnZXJDb25maWc+W10gPSBbXTtcbmxldCBkZWZhdWx0UGxheWxpc3RJZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gJyc7XG5cbmxldCBpc012dUludGVncmF0aW9uQWN0aXZlID0gZmFsc2U7XG5sZXQgaXNDb3JlUGxheWVySW5pdGlhbGl6ZWQgPSBmYWxzZTtcbmxldCBfY3VycmVudENoYXRJZDogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbmNvbnN0IGZ1bGxTdGF0ZVVwZGF0ZUNhbGxiYWNrczogKChwYXlsb2FkOiBGdWxsU3RhdGVQYXlsb2FkKSA9PiB2b2lkKVtdID0gW107XG5jb25zdCB0aW1lVXBkYXRlQ2FsbGJhY2tzOiAoKHBheWxvYWQ6IFRpbWVVcGRhdGVQYXlsb2FkKSA9PiB2b2lkKVtdID0gW107XG5cbi8qKlxuICogW1Y5LjAg57uf5LiA5qCh5YeG5a6YXSDmlrDmnrbmnoTnmoTigJzov5DooYzml7blpKfohJHigJ3jgIJcbiAqIOWug+eahOWNleS4gOiBjOi0o+aYr++8muWTjeW6lOKAnOi/kOihjOaXtuKAneeahOWinumHj+S6i+S7tu+8jOmAmui/h+KAnOi+ueayv+ajgOa1i+KAneaooeWei++8jFxuICog57K+56Gu5Zyw44CB5pyA5bCP5YyW5Zyw5L+u5pS55b2T5YmN6Zif5YiX77yM5bm25Yaz562W5piv5ZCm6ZyA6KaB5Y+Y5pu05pKt5pS+44CCXG4gKiBAcGFyYW0gZXZlbnRQYXlsb2FkIC0g5Y+v6YCJ55qE44CB5p2l6IeqIE1WVSDkuovku7bnmoTmnIDmlrDnirbmgIHmlbDmja7jgIJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gX3JlY29uY2lsZVBsYXlsaXN0UXVldWUoZXZlbnRQYXlsb2FkPzogYW55LCBvcHRpb25zPzogeyB0cmFuc2l0aW9uRWZmZWN0PzogJ2hhcmQnIHwgJ3Ntb290aCcgfSkge1xuICAvLyAtLS0gMS4g44CQ5YmN572u5qOA5p+l44CROiDpmLLmraLlubblj5HnmoTkuovku7bpo47mmrQgLS0tXG4gIGlmIChpc1JlY29uY2lsaW5nKSB7XG4gICAgbG9nUHJvYmUoJ1tSZWNvbmNpbGVyXSDor7fmsYLooqvlkIjlubbvvJrliY3kuIDkuKrmoKHlh4bku7vliqHku43lnKjov5vooYzkuK3jgIInLCAnd2FybicpO1xuICAgIHJldHVybjtcbiAgfVxuICBpc1JlY29uY2lsaW5nID0gdHJ1ZTtcbiAgbG9nUHJvYmUoJz09PSBbUmVjb25jaWxlcl0g4oCc57uf5LiA5qCh5YeG5a6Y4oCd5bey5o6l566h6L+Q6KGM5pe25LqL5Lu2ID09PScsICdncm91cCcpO1xuXG4gIHRyeSB7XG4gICAgU3RhdGVNYW5hZ2VyLnNldFBlcmZvcm1pbmdFZmZlY3QodHJ1ZSk7XG4gICAgbG9nUHJvYmUoJ1tSZWNvbmNpbGVyXSAo5LqL5YqhKSDlt7LkuIrmlYjmnpzplIHlubblub/mkq3igJzov4fmuKHkuK3igJ3nirbmgIHvvIxVSeW6lOi/m+WFpeetieW+heOAgicpO1xuICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuXG4gICAgLy8gLS0tIOaguOW/g+mAu+i+kSAo5Y6f5pyJ55qEIHRyeS4uLmZpbmFsbHkg5Z2XKSAtLS1cbiAgICB0cnkge1xuICAgICAgY29uc3Qgb2xkVG9wSXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcblxuICAgICAgLy8gLS0tIDIuIOOAkOiOt+WPluS6i+WunuOAkTog6YG15b6q4oCc5pe25bqP5oKW6K664oCd5a6a5b6LIC0tLVxuICAgICAgY29uc3QgY3VycmVudFN0YXRlRGF0YSA9IGV2ZW50UGF5bG9hZD8uc3RhdF9kYXRhXG4gICAgICAgID8gZXZlbnRQYXlsb2FkLnN0YXRfZGF0YVxuICAgICAgICA6ICgoYXdhaXQgX2ZpbmRMYXRlc3RBdXRob3JpdGF0aXZlTXZ1U3RhdGUoKSk/Lm12dURhdGE/LnN0YXRfZGF0YSA/PyB7fSk7XG5cbiAgICAgIGxvZ1Byb2JlKGBbUmVjb25jaWxlcl0gKOaOoumSiCkg5bey56Gu5a6a5pys5qyh5qCh5YeG55qE5p2D5aiBIE1WVSDnirbmgIEgKOadpea6kDogJHtldmVudFBheWxvYWQgPyAn5LqL5Lu26L296I23JyA6ICfkuLvliqjmn6Xor6InfSnjgIJgKTtcblxuICAgICAgLy8gLS0tIDMuIOOAkOeUn+aIkOaKpeWRiuOAkTog5aeU5omYIE12dU1hbmFnZXIg6L+b6KGM6L655rK/5qOA5rWLIC0tLVxuICAgICAgY29uc3QgcHJldmlvdXNTdGF0ZURhdGEgPSBNdnVNYW5hZ2VyLmdldFByZXZpb3VzU3RhdGUoKTtcbiAgICAgIGNvbnN0IGNoYW5nZVJlcG9ydCA9IE12dU1hbmFnZXIuY2FsY3VsYXRlQ2hhbmdlUmVwb3J0KHByZXZpb3VzU3RhdGVEYXRhLCBjdXJyZW50U3RhdGVEYXRhLCB0cmlnZ2Vycyk7XG5cbiAgICAgIC8vIC0tLSA0LiDjgJDmiafooYzpmJ/liJfnmoTlop7ph4/kv67mlLnjgJE6IOWFiOWHj+WQjuWKoCAtLS1cbiAgICAgIGNvbnN0IG5ld1F1ZXVlID0gU3RhdGVNYW5hZ2VyLmdldFF1ZXVlKCk7XG5cbiAgICAgIGlmIChjaGFuZ2VSZXBvcnQubmV3bHlJbmFjdGl2ZVRyaWdnZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgXy5yZW1vdmUobmV3UXVldWUsIGl0ZW0gPT5cbiAgICAgICAgICBjaGFuZ2VSZXBvcnQubmV3bHlJbmFjdGl2ZVRyaWdnZXJzLnNvbWUoaW5hY3RpdmVUcmlnZ2VyID0+XG4gICAgICAgICAgICBhcmVUcmlnZ2Vyc0Z1bmN0aW9uYWxseUVxdWFsKGl0ZW0udHJpZ2dlclNvdXJjZSwgaW5hY3RpdmVUcmlnZ2VyKSxcbiAgICAgICAgICApLFxuICAgICAgICApO1xuICAgICAgICBsb2dQcm9iZShgW1JlY29uY2lsZXJdICjkv67mlLkpIOagueaNruaKpeWRiuenu+mZpOS6hiAke2NoYW5nZVJlcG9ydC5uZXdseUluYWN0aXZlVHJpZ2dlcnMubGVuZ3RofSDkuKrlpLHmlYjpobnjgIJgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZVJlcG9ydC5uZXdseUFjdGl2ZVRyaWdnZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhY3RpdmVUcmlnZ2VyIG9mIGNoYW5nZVJlcG9ydC5uZXdseUFjdGl2ZVRyaWdnZXJzKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbmV3UXVldWUuc29tZShpdGVtID0+IGl0ZW0udHJpZ2dlclNvdXJjZSAmJiBhcmVUcmlnZ2Vyc0Z1bmN0aW9uYWxseUVxdWFsKGl0ZW0udHJpZ2dlclNvdXJjZSwgYWN0aXZlVHJpZ2dlcikpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsb2dQcm9iZShgW1JlY29uY2lsZXJdICjpmLLlvqEpIOaLkue7nea3u+WKoOmHjeWkjeeahOa/gOa0u+mhuTogXCIke2FjdGl2ZVRyaWdnZXIucGxheWxpc3RfaWR9XCJgLCAnd2FybicpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSBjcmVhdGVRdWV1ZUl0ZW0oe1xuICAgICAgICAgICAgdHlwZTogJ212dScsXG4gICAgICAgICAgICBwbGF5bGlzdElkOiBhY3RpdmVUcmlnZ2VyLnBsYXlsaXN0X2lkLFxuICAgICAgICAgICAgdHJpZ2dlcjogYWN0aXZlVHJpZ2dlcixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAobmV3SXRlbSkge1xuICAgICAgICAgICAgbmV3UXVldWUucHVzaChuZXdJdGVtKTtcbiAgICAgICAgICAgIGxvZ1Byb2JlKGBbUmVjb25jaWxlcl0gKOS/ruaUuSkg5qC55o2u5oql5ZGK5re75Yqg5LqG5paw5r+A5rS76aG5OiBcIiR7bmV3SXRlbS5wbGF5bGlzdElkfVwiYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIFN0YXRlTWFuYWdlci51cGRhdGVRdWV1ZShuZXdRdWV1ZSk7XG5cbiAgICAgIC8vIC0tLSA1LiDjgJDlhrPnrZbkuI7miafooYzjgJE6IOWvueavlOaWsOaXp+mYn+mmliAtLS1cbiAgICAgIGNvbnN0IG5ld1RvcEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG5cbiAgICAgIGlmIChuZXdUb3BJdGVtPy5wbGF5bGlzdElkICE9PSBvbGRUb3BJdGVtPy5wbGF5bGlzdElkKSB7XG4gICAgICAgIGxvZ1Byb2JlKFxuICAgICAgICAgIGBbUmVjb25jaWxlcl0gKOWGs+etlikg6Zif6aaW5Y+R55Sf5Y+Y5pu077yBIOS7jiBcIiR7b2xkVG9wSXRlbT8ucGxheWxpc3RJZCA/PyAn5pegJ31cIiDlj5jkuLogXCIke25ld1RvcEl0ZW0/LnBsYXlsaXN0SWQgPz8gJ+aXoCd9XCLjgIJgLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChuZXdUb3BJdGVtKSB7XG4gICAgICAgICAgbG9nUHJvYmUoJ1tSZWNvbmNpbGVyXSAo5o+h5omLKSDmraPlnKjpgJrnn6UgU3RyYXRlZ3lNYW5hZ2VyIOmYn+WIl+W3suWPmOabtC4uLicpO1xuICAgICAgICAgIFN0cmF0ZWd5TWFuYWdlci5ub3RpZnlRdWV1ZUNoYW5nZWQoKTtcblxuICAgICAgICAgIG5ld1RvcEl0ZW0ud2FzRXZlclBsYXllZCA9IHRydWU7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0SW5kZXggPSBuZXdUb3BJdGVtLndhc0V2ZXJQbGF5ZWQgPyBuZXdUb3BJdGVtLmN1cnJlbnRJbmRleCA6IDA7XG5cbiAgICAgICAgICBpZiAoU3RhdGVNYW5hZ2VyLmlzUGxheWluZygpKSB7XG4gICAgICAgICAgICBsb2dQcm9iZSgnW1JlY29uY2lsZXJdICjmlYjmnpwpIOeUqOaIt+ato+WcqOaSreaUvu+8jOWwhuaJp+ihjOi/h+a4oeaViOaenC4uLicpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnRyYW5zaXRpb25FZmZlY3QgPT09ICdoYXJkJykge1xuICAgICAgICAgICAgICBhd2FpdCBQbGF5YmFja0VuZ2luZS5leGVjdXRlSGFyZEN1dChcbiAgICAgICAgICAgICAgICBuZXdUb3BJdGVtLnBsYXlsaXN0Q29udGVudFt0YXJnZXRJbmRleF0udXJsLFxuICAgICAgICAgICAgICAgIFN0YXRlTWFuYWdlci5nZXRWb2x1bWUoKSxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF3YWl0IF9leGVjdXRlVHJhbnNpdGlvbih0YXJnZXRJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIG9sZFRvcEl0ZW0gPT09IHVuZGVmaW5lZCAmJiAvLyAxLiDpmJ/liJflj5HnlJ/igJzku47ml6DliLDmnInigJ3nmoTot4Pov4FcbiAgICAgICAgICAgIFN0YXRlTWFuYWdlci5nZXRQbGF5YmFja1N0YXRlKCkgPT09ICdTVE9QUEVEJyAvLyAyLiDlhbPplK7vvJrlj6ropoHkuI3mmK8gUEFVU0VEICjnlKjmiLfkuLvliqjmmoLlgZwp77yM5bCx5YWB6K645Zy65pmv6Kem5Y+R5pKt5pS+XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsb2dQcm9iZShcbiAgICAgICAgICAgICAgJ1tSZWNvbmNpbGVyXSDoh6rliqjmkq3mlL7lpZHnuqbmu6HotrMgKFF1ZXVlIDAtPjEgKyBOb3QgUGF1c2VkKe+8jOWwhuiwg+eUqCBfZXhlY3V0ZUdlbmVzaXNQbGF5SW50ZXJuYWzjgIInLFxuICAgICAgICAgICAgICAnd2FybicsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYXdhaXQgX2V4ZWN1dGVHZW5lc2lzUGxheUludGVybmFsKHRhcmdldEluZGV4KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nUHJvYmUoJ1tSZWNvbmNpbGVyXSAo5pWI5p6cKSDnlKjmiLflt7LmmoLlgZzmiJbmnKrmjojmnYPvvIzku4XlnKjlkI7lj7DpnZnpu5jmm7TmlrDovajpgZPvvIzkuI3mkq3mlL7jgIInKTtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrID0gbmV3VG9wSXRlbS5wbGF5bGlzdENvbnRlbnRbdGFyZ2V0SW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlUGxheWVyID0gUGxheWJhY2tFbmdpbmUuZ2V0QWN0aXZlUGxheWVyKCk7XG4gICAgICAgICAgICBpZiAodHJhY2sgJiYgYWN0aXZlUGxheWVyKSB7XG4gICAgICAgICAgICAgIGFjdGl2ZVBsYXllci5zcmMgPSB0cmFjay51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgbG9nUHJvYmUoJ1tSZWNvbmNpbGVyXSAo5Yaz562WKSDnm5HmtYvliLDpmJ/liJflt7LlrozlhajmuIXnqbrjgILmraPlnKjmiafooYzigJzniannkIbpnZnpn7PigJ3ljY/orq4uLi4nLCAnd2FybicpO1xuXG4gICAgICAgICAgYXdhaXQgUGxheWJhY2tFbmdpbmUuZmFkZU91dEFuZFBhdXNlKCk7XG5cbiAgICAgICAgICBTdGF0ZU1hbmFnZXIuc2V0UGxheWJhY2tTdGF0ZSgnU1RPUFBFRCcpO1xuXG4gICAgICAgICAgU3RyYXRlZ3lNYW5hZ2VyLm5vdGlmeVF1ZXVlQ2hhbmdlZCgpO1xuXG4gICAgICAgICAgbG9nUHJvYmUoJ1tSZWNvbmNpbGVyXSAo5omn6KGMKSDigJzniannkIbpnZnpn7PigJ3lrozmiJDvvIzmkq3mlL7nirbmgIHlt7Lnva7kuLogU1RPUFBFROOAgicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dQcm9iZSgnW1JlY29uY2lsZXJdICjlhrPnrZYpIOmYn+mmluacquWPkeeUn+WPmOabtO+8jOS/neaMgeW9k+WJjeaSreaUvueos+WumuOAgicpO1xuICAgICAgfVxuXG4gICAgICAvLyAtLS0gNi4g44CQ5pu05paw6K6w5b+G44CROiDkuLrkuIvkuIDmrKHovrnmsr/mo4DmtYvlgZrlh4blpIcgLS0tXG4gICAgICBhd2FpdCBNdnVNYW5hZ2VyLnBlcnNpc3RDdXJyZW50U3RhdGUoY3VycmVudFN0YXRlRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ1Byb2JlKGBbUmVjb25jaWxlcl0g5qC45b+D6YC76L6R5omn6KGM5pyf6Ze05Y+R55Sf5Lil6YeN6ZSZ6K+vOiAke2Vycm9yfWAsICdlcnJvcicpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IHdyaXRlU3RhdGUoJ3JlY29uY2lsaWF0aW9uJyk7XG4gICAgfVxuICB9IGZpbmFsbHkge1xuICAgIGlzUmVjb25jaWxpbmcgPSBmYWxzZTtcbiAgICBhd2FpdCBfcmVsZWFzZUVmZmVjdExvY2soKTtcbiAgICBsb2dQcm9iZSgnPT09IFtSZWNvbmNpbGVyXSDigJznu5/kuIDmoKHlh4blrpjigJ3ku7vliqHlrozmiJAgKOmUgeW3sumAmui/h+iwg+W6puWZqOmHiuaUvikgPT09JywgJ2dyb3VwRW5kJyk7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDQuIOaguOW/g+W3peWFt+S4juW5v+aSreezu+e7nyAoQ29yZSBVdGlsaXRpZXMgJiBCcm9hZGNhc3QgU3lzdGVtKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZnVuY3Rpb24gYnJvYWRjYXN0RnVsbFN0YXRlKCkge1xuICBjb25zdCBjdXJyZW50SXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgY29uc3QgY3VycmVudFBsYXlsaXN0ID0gY3VycmVudEl0ZW0/LnBsYXlsaXN0Q29udGVudCA/PyBbXTtcbiAgY29uc3QgY3VycmVudEluZGV4ID0gY3VycmVudEl0ZW0/LmN1cnJlbnRJbmRleCA/PyAwO1xuXG4gIGNvbnN0IHBheWxvYWQ6IEZ1bGxTdGF0ZVBheWxvYWQgPSB7XG4gICAgY3VycmVudEl0ZW06IGN1cnJlbnRQbGF5bGlzdFtjdXJyZW50SW5kZXhdXG4gICAgICA/IHtcbiAgICAgICAgICB0aXRsZTogY3VycmVudFBsYXlsaXN0W2N1cnJlbnRJbmRleF0u5q2M5ZCNLFxuICAgICAgICAgIGFydGlzdDogY3VycmVudFBsYXlsaXN0W2N1cnJlbnRJbmRleF0u5q2M5omLLFxuICAgICAgICAgIGNvdmVyOiBjdXJyZW50UGxheWxpc3RbY3VycmVudEluZGV4XS7lsIHpnaIsXG4gICAgICAgIH1cbiAgICAgIDogbnVsbCxcbiAgICBpc1BsYXlpbmc6IFN0YXRlTWFuYWdlci5pc1BsYXlpbmcoKSxcbiAgICBwbGF5YmFja1N0YXRlOiBTdGF0ZU1hbmFnZXIuZ2V0UGxheWJhY2tTdGF0ZSgpLFxuICAgIHBsYXliYWNrTW9kZTogU3RhdGVNYW5hZ2VyLmdldFBsYXliYWNrTW9kZSgpLFxuICAgIG1hc3RlclZvbHVtZTogU3RhdGVNYW5hZ2VyLmdldFZvbHVtZSgpLFxuICAgIHBsYXlsaXN0OiBjdXJyZW50UGxheWxpc3QubWFwKGl0ZW0gPT4gKHsgdGl0bGU6IGl0ZW0u5q2M5ZCNLCBhcnRpc3Q6IGl0ZW0u5q2M5omLLCBjb3ZlcjogaXRlbS7lsIHpnaIgfSkpLFxuICAgIGlzVHJhbnNpdGlvbmluZzogU3RhdGVNYW5hZ2VyLmlzUGVyZm9ybWluZ0VmZmVjdCgpLFxuICB9O1xuICBsb2dQcm9iZShcbiAgICBgW0Jyb2FkY2FzdF0g5q2j5Zyo5bm/5pKt5a6M5pW054q25oCBLi4uIFvml6flhbzlrrk6IGlzUGxheWluZz0ke3BheWxvYWQuaXNQbGF5aW5nfV0gW+aWsOWGheaguDogc3RhdGU9JHtwYXlsb2FkLnBsYXliYWNrU3RhdGV9XSBtb2RlOiAke3BheWxvYWQucGxheWJhY2tNb2RlfSwgY3VycmVudEl0ZW06ICR7cGF5bG9hZC5jdXJyZW50SXRlbT8udGl0bGUgPz8gJ+aXoCd9YCxcbiAgICAnZ3JvdXBDb2xsYXBzZWQnLFxuICApO1xuICBsb2dQcm9iZShg6K+m57uGOiBpc1RyYW5zaXRpb25pbmc9JHtwYXlsb2FkLmlzVHJhbnNpdGlvbmluZ31gKTtcbiAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuXG4gIGZ1bGxTdGF0ZVVwZGF0ZUNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICB0cnkge1xuICAgICAgY2FsbGJhY2socGF5bG9hZCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignW+mfs+S5kOiEmuacrF0g5a6M5pW054q25oCB5Zue6LCD5omn6KGM5Ye66ZSZOicsIGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGJyb2FkY2FzdFRpbWVVcGRhdGUoKSB7XG4gIGNvbnN0IGFjdGl2ZVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldEFjdGl2ZVBsYXllcigpO1xuICBpZiAoIVN0YXRlTWFuYWdlci5pc1BsYXlpbmcoKSB8fCAhYWN0aXZlUGxheWVyKSByZXR1cm47XG4gIGNvbnN0IHBheWxvYWQ6IFRpbWVVcGRhdGVQYXlsb2FkID0ge1xuICAgIGN1cnJlbnRUaW1lOiBhY3RpdmVQbGF5ZXIuY3VycmVudFRpbWUsXG4gICAgZHVyYXRpb246IGFjdGl2ZVBsYXllci5kdXJhdGlvbiB8fCAwLFxuICB9O1xuICB0aW1lVXBkYXRlQ2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2socGF5bG9hZCkpO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlTmV4dFRyYWNrKCkge1xuICBjb25zdCBjdXJyZW50SXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgY29uc3Qgc3RhbmRieVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldFN0YW5kYnlQbGF5ZXIoKTtcbiAgaWYgKCFzdGFuZGJ5UGxheWVyIHx8ICFjdXJyZW50SXRlbSkgcmV0dXJuO1xuICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SXRlbS5jdXJyZW50SW5kZXggKyAxO1xuICBpZiAobmV4dEluZGV4IDwgY3VycmVudEl0ZW0ucGxheWxpc3RDb250ZW50Lmxlbmd0aCkge1xuICAgIGNvbnN0IG5leHRUcmFjayA9IGN1cnJlbnRJdGVtLnBsYXlsaXN0Q29udGVudFtuZXh0SW5kZXhdO1xuICAgIGlmIChuZXh0VHJhY2sgJiYgc3RhbmRieVBsYXllci5zcmMgIT09IG5leHRUcmFjay51cmwpIHtcbiAgICAgIHN0YW5kYnlQbGF5ZXIuc3JjID0gbmV4dFRyYWNrLnVybDtcbiAgICAgIHN0YW5kYnlQbGF5ZXIubG9hZCgpO1xuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gNS4g54q25oCB566h55CGIChTdGF0ZSBNYW5hZ2VtZW50KVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZnVuY3Rpb24gcmVhZFN0YXRlKCkge1xuICBsb2dQcm9iZSgnW1N0YXRlUmVhZGVyXSDmraPlnKjlsJ3or5Xku47phZLppoblj5jph4/or7vlj5bmjIHkuYXljJbnirbmgIEuLi4nKTtcbiAgY29uc3Qgc2F2ZWREYXRhID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ2NoYXQnIH0pW1NUQVRFX0tFWV07XG5cbiAgaWYgKCFzYXZlZERhdGEgfHwgdHlwZW9mIHNhdmVkRGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICBsb2dQcm9iZSgnW1N0YXRlUmVhZGVyXSDmnKrlj5HnjrDmnInmlYjlrZjmoaPjgIInKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxvZ1Byb2JlKCdbU3RhdGVSZWFkZXJdIOWPkeeOsOWOn+Wni+eKtuaAgeaVsOaNru+8jOato+WcqOaPkOS6pOe7mSBab2Qg6L+b6KGM5a6J5YWo6aqM6K+BLi4uJyk7XG4gIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBab2RQZXJzaXN0ZWRTdGF0ZS5zYWZlUGFyc2Uoc2F2ZWREYXRhKTtcblxuICBpZiAodmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgbG9nUHJvYmUoJ1tTdGF0ZVJlYWRlcl0gWm9kIOmqjOivgeaIkOWKn++8jOeKtuaAgeaVsOaNruWuieWFqOOAgicpO1xuICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0LmRhdGE7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKCdbU3RhdGVSZWFkZXJdIOaMgeS5heWMlueKtuaAgemqjOivgeWksei0pTonLCB2YWxpZGF0aW9uUmVzdWx0LmVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB3cml0ZVN0YXRlKHNvdXJjZTogc3RyaW5nKSB7XG4gIGlmICghaXNTY3JpcHRBY3RpdmUpIHtcbiAgICBsb2dQcm9iZShgW1N0YXRlXSDlhpnlhaXmk43kvZzooqvpmLvmraLvvIzlm6DkuLrohJrmnKzmraPlnKjlgZzmnLrjgIIo5p2l5rqQOiAke3NvdXJjZX0pYCwgJ3dhcm4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBsb2dQcm9iZShgW1N0YXRlXSDnlLEgXCIke3NvdXJjZX1cIiDop6blj5HnirbmgIHlhpnlhaUuLi5gKTtcbiAgICBjb25zdCBkYXRhVG9TYXZlID0gU3RhdGVNYW5hZ2VyLmdldFN0YXRlU25hcHNob3RGb3JQZXJzaXN0ZW5jZSgpO1xuXG4gICAgYXdhaXQgdXBkYXRlVmFyaWFibGVzV2l0aChcbiAgICAgIHZhcnMgPT4ge1xuICAgICAgICB2YXJzW1NUQVRFX0tFWV0gPSBkYXRhVG9TYXZlO1xuICAgICAgICByZXR1cm4gdmFycztcbiAgICAgIH0sXG4gICAgICB7IHR5cGU6ICdjaGF0JyB9LFxuICAgICk7XG5cbiAgICBsb2dQcm9iZShgW1N0YXRlXSDnirbmgIHlt7LmiJDlip/lhpnlhaXphZLppoblj5jph49gKTtcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgbG9nUHJvYmUoYFtTdGF0ZV0g5YaZ5YWl54q25oCB5pe25Y+R55Sf5Lil6YeN6ZSZ6K+vOiAke2V9YCwgJ2Vycm9yJyk7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDYuIOS4lueVjOS5pumFjee9ruino+aekOS4jumYn+WIl+aTjeS9nCAoV29ybGRib29rIFBhcnNpbmcgJiBTdGFjayBPcGVyYXRpb25zKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24g5qC85byP5YyWIFpvZCDpqozor4HplJnor6/vvIzku6Xkvr/lnKggdG9hc3RyIOS4reS4uuinkuiJsuWNoeS9nOiAheaYvuekuua4heaZsOOAgeWPr+aTjeS9nOeahOWPjemmiOOAglxuICovXG5mdW5jdGlvbiBfZm9ybWF0Wm9kRXJyb3JGb3JUb2FzdHIoZXJyb3I6IFpvZEVycm9yKTogdm9pZCB7XG4gIGNvbnN0IGlzc3VlID0gZXJyb3IuaXNzdWVzWzBdO1xuICBjb25zdCBwYXRoID0gaXNzdWUucGF0aC5qb2luKCcgLT4gJyk7XG4gIGNvbnN0IG1lc3NhZ2UgPSBpc3N1ZS5tZXNzYWdlO1xuXG4gIGNvbnN0IHRvYXN0clRpdGxlID0gYFtNdXNpY0NvbmZpZ10g5YaF5a656ZSZ6K+vYDtcbiAgY29uc3QgdG9hc3RyTWVzc2FnZSA9IGDot6/lvoQ6ICR7cGF0aH0gfCDpl67popg6ICR7bWVzc2FnZX1gO1xuXG4gIGNvbnN0IGZ1bGxMb2dNZXNzYWdlID0gYFtNdXNpY0NvbmZpZ10g5YaF5a656ZSZ6K+vOlxcbui3r+W+hDogJHtwYXRofVxcbumXrumimDogJHttZXNzYWdlfWA7XG4gIGxvZ1Byb2JlKGBbWm9kVmFsaWRhdG9yXSDkuJbnlYzkuabphY3nva7pqozor4HlpLHotKU6ICR7ZnVsbExvZ01lc3NhZ2V9YCwgJ2Vycm9yJyk7XG5cbiAgdG9hc3RyLmVycm9yKHRvYXN0ck1lc3NhZ2UsIHRvYXN0clRpdGxlLCB7IHRpbWVPdXQ6IDE1MDAwIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5qC45b+D566X5rOVIFY5LjUgKENvcmUgQWxnb3JpdGhtcyBmb3IgXCJDb25jZXJ0b1wiKVxuLy8g5Y6f5YiZOiDov5nkupvlh73mlbDpg73lv4XpobvmmK/nuq/nsrnnmoTmn6Xor6IgKENRUynvvIzkuKXnpoHkuqfnlJ/ku7vkvZXlia/kvZznlKjjgIJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogW+aguOW/g+eul+azlV0g5Yik5pat5Lik5Liq6Kem5Y+R5Zmo5a+56LGh5piv5ZCm5Luj6KGo5ZCM5LiA5Liq4oCc5Yqf6IO96Lqr5Lu94oCd44CCXG4gKiBAcGFyYW0gYSAtIOesrOS4gOS4quinpuWPkeWZqOWvueixoeOAglxuICogQHBhcmFtIGIgLSDnrKzkuozkuKrop6blj5Hlmajlr7nosaHjgIJcbiAqIEByZXR1cm5zIHtib29sZWFufSDlpoLmnpzlip/og73kuIrnm7jnrYnvvIzliJnov5Tlm54gdHJ1ZeOAglxuICovXG5mdW5jdGlvbiBhcmVUcmlnZ2Vyc0Z1bmN0aW9uYWxseUVxdWFsKFxuICBhOiB6LmluZmVyPHR5cGVvZiBab2RUcmlnZ2VyQ29uZmlnPiB8IHVuZGVmaW5lZCxcbiAgYjogei5pbmZlcjx0eXBlb2YgWm9kVHJpZ2dlckNvbmZpZz4gfCB1bmRlZmluZWQsXG4pOiBib29sZWFuIHtcbiAgaWYgKCFhIHx8ICFiKSByZXR1cm4gYSA9PT0gYjtcblxuICBpZiAoYS5wbGF5bGlzdF9pZCAhPT0gYi5wbGF5bGlzdF9pZCkgcmV0dXJuIGZhbHNlO1xuXG4gIHR5cGUgQ29uZGl0aW9uS2V5ID0ga2V5b2Ygei5pbmZlcjx0eXBlb2YgWm9kU2luZ2xlQ29uZGl0aW9uPjtcblxuICBjb25zdCBnZXRDYW5vbmljYWxTdHJpbmcgPSAoY29uZGl0aW9uOiB6LmluZmVyPHR5cGVvZiBab2RTaW5nbGVDb25kaXRpb24+KTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gKE9iamVjdC5rZXlzKGNvbmRpdGlvbikgYXMgQ29uZGl0aW9uS2V5W10pXG4gICAgICAuc29ydCgpXG4gICAgICAubWFwKGtleSA9PiBgJHtrZXl9OiR7U3RyaW5nKGNvbmRpdGlvbltrZXldKX1gKSAvLyDkvb/nlKggU3RyaW5nKCkg5p2l56Gu5L+d5omA5pyJ5YC86YO96IO96KKr5q2j56Gu5aSE55CGXG4gICAgICAuam9pbignLCcpO1xuICB9O1xuXG4gIGNvbnN0IGNvbmRpdGlvbnNBID0gYS5jb25kaXRpb25zLm1hcChnZXRDYW5vbmljYWxTdHJpbmcpLnNvcnQoKTtcbiAgY29uc3QgY29uZGl0aW9uc0IgPSBiLmNvbmRpdGlvbnMubWFwKGdldENhbm9uaWNhbFN0cmluZykuc29ydCgpO1xuXG4gIHJldHVybiBjb25kaXRpb25zQS5sZW5ndGggPT09IGNvbmRpdGlvbnNCLmxlbmd0aCAmJiBjb25kaXRpb25zQS5ldmVyeSgodmFsLCBpbmRleCkgPT4gdmFsID09PSBjb25kaXRpb25zQltpbmRleF0pO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBbVjkuNyDmoLjlv4PlvLrljJZdIOafpeaJvuadg+WogU1WVeeKtuaAgeOAgueOsOWcqOiDveWkn+ivhuWIq+KAnOWIm+S4luKAneWSjOKAnOi/kOihjOaXtuKAneS4pOenjeaVsOaNrue7k+aehOOAglxuICogQHBhcmFtIGNvbnRleHQgLSDlj6/pgInnmoTkuIrkuIvmlofvvIznlKjkuo7mjIflr7zmn6Xmib7mlrnlvI/jgIJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHsgbXZ1RGF0YTogYW55LCBtZXNzYWdlSWQ6IG51bWJlciB9IHwgbnVsbD59IOadg+WogeeKtuaAgeaIliBudWxs44CCXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9maW5kTGF0ZXN0QXV0aG9yaXRhdGl2ZU12dVN0YXRlKGNvbnRleHQ/OiB7XG4gIG1lc3NhZ2VJZDogbnVtYmVyO1xuICBzd2lwZUlkOiBudW1iZXI7XG59KTogUHJvbWlzZTx7IG12dURhdGE6IGFueTsgbWVzc2FnZUlkOiBudW1iZXIgfSB8IG51bGw+IHtcbiAgLy8gLS0tIOaooeW8j+S4gDog57K+56Gu5Yi25a+8ICjpgJrluLjnlKjkuo7lvIDlnLrnmb0pIC0tLVxuICBpZiAoY29udGV4dCAmJiBjb250ZXh0Lm1lc3NhZ2VJZCA9PT0gMCAmJiB0eXBlb2YgY29udGV4dC5zd2lwZUlkID09PSAnbnVtYmVyJykge1xuICAgIGxvZ1Byb2JlKFxuICAgICAgYFtTdGF0ZUZpbmRlcl0gKOeyvuehruWItuWvvOaooeW8jykg55uu5qCHOiBtZXNzYWdlX2lkPSR7Y29udGV4dC5tZXNzYWdlSWR9LCBzd2lwZV9pZD0ke2NvbnRleHQuc3dpcGVJZH1gLFxuICAgICAgJ2dyb3VwQ29sbGFwc2VkJyxcbiAgICApO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtdnVEYXRhQ29udGFpbmVyOiBhbnkgPSBhd2FpdCBNdnUuZ2V0TXZ1RGF0YSh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogMCB9KTtcblxuICAgICAgY29uc3Qgc3dpcGVTcGVjaWZpY0RhdGEgPSBtdnVEYXRhQ29udGFpbmVyPy5zd2lwZXNfZGF0YT8uW2NvbnRleHQuc3dpcGVJZF07XG5cbiAgICAgIGlmIChzd2lwZVNwZWNpZmljRGF0YT8uc3RhdF9kYXRhKSB7XG4gICAgICAgIC8vIOaIkOWKn+WcqCBcIuWIm+S4llwiIOe7k+aehOS4reaJvuWIsOeJueWumiBzd2lwZSDnmoTmlbDmja5cbiAgICAgICAgbG9nUHJvYmUoJ1tTdGF0ZUZpbmRlcl0gKOaOoumSiCkg5qOA5rWL5Yiw4oCc5Yib5LiW4oCd57uT5p6EIChzd2lwZXNfZGF0YSnvvIzmiJDlip/lkb3kuK3vvIEnKTtcbiAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgICByZXR1cm4geyBtdnVEYXRhOiBzd2lwZVNwZWNpZmljRGF0YSwgbWVzc2FnZUlkOiAwIH07XG4gICAgICB9IGVsc2UgaWYgKG12dURhdGFDb250YWluZXI/LnN0YXRfZGF0YSkge1xuICAgICAgICAvLyDlnKjpobblsYLmib7liLDkuoYgXCLov5DooYzml7ZcIiDnu5PmnoTnmoTmlbDmja4gKOWPr+iDveWPquacieS4gOS4quW8gOWcuueZvSlcbiAgICAgICAgbG9nUHJvYmUoJ1tTdGF0ZUZpbmRlcl0gKOaOoumSiCkg5qOA5rWL5Yiw4oCc6L+Q6KGM5pe24oCd57uT5p6EICjpobblsYIgc3RhdF9kYXRhKe+8jOebtOaOpemHh+eUqOOAgicpO1xuICAgICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICAgIHJldHVybiB7IG12dURhdGE6IG12dURhdGFDb250YWluZXIsIG1lc3NhZ2VJZDogMCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tTdGF0ZUZpbmRlcl0gKOeyvuehruWItuWvvOaooeW8jykg5p+l5om+5aSx6LSl77ya5Zyo5Lik56eN5bey55+l57uT5p6E5Lit5Z2H5pyq5om+5YiwIHN0YXRfZGF0YeOAgicsICd3YXJuJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ1Byb2JlKGBbU3RhdGVGaW5kZXJdICjnsr7noa7liLblr7zmqKHlvI8pIOafpeivouaXtuWHuumUmTogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSDmqKHlvI/kuow6IOWbnua6r+aJq+aPjyAo5om+5LiN5Yiw57K+56Gu55uu5qCH5pe255qE5qCH5YeG5rWB56iLKSAtLS1cbiAgbG9nUHJvYmUoJ1tTdGF0ZUZpbmRlcl0gKOWbnua6r+aJq+aPj+aooeW8jykg5byA5aeL5omn6KGMLi4uJywgJ2dyb3VwQ29sbGFwc2VkJyk7XG4gIHRyeSB7XG4gICAgY29uc3QgYWxsTWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoLTEsIHsgaW5jbHVkZV9zd2lwZXM6IHRydWUgfSk7XG4gICAgZm9yIChsZXQgaSA9IGFsbE1lc3NhZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYWxsTWVzc2FnZXNbaV07XG4gICAgICAvLyBbVjkuNyDmoLjlv4Pkv67mraNdIOS/ruWkjeiHtOWRveaLvOWGmemUmeivr++8mm1lc3NhZ2UuaWQgLT4gbWVzc2FnZS5tZXNzYWdlX2lkXG4gICAgICBjb25zdCBjdXJyZW50TWVzc2FnZUlkID0gbWVzc2FnZS5tZXNzYWdlX2lkO1xuXG4gICAgICAvLyDpmLLlvqHmgKfnvJbnqIvvvJrlpoLmnpwgbWVzc2FnZV9pZCDml6DmlYjvvIznm7TmjqXot7Pov4fvvIzpmLLmraLmhI/lpJZcbiAgICAgIGlmICh0eXBlb2YgY3VycmVudE1lc3NhZ2VJZCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgbG9nUHJvYmUoYCjmjqLpkogpIOi3s+i/h+aXoOaViOalvOWxgiAo57Si5byVICR7aX0p77yM5Zug5YW2IG1lc3NhZ2VfaWQg5Li6ICR7Y3VycmVudE1lc3NhZ2VJZH3jgIJgLCAnd2FybicpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nUHJvYmUoYCjmjqLpkogpIOato+WcqOafpeivoiBtZXNzYWdlX2lkOiAke2N1cnJlbnRNZXNzYWdlSWR9Li4uYCk7XG4gICAgICAgIGNvbnN0IG12dURhdGEgPSBhd2FpdCBNdnUuZ2V0TXZ1RGF0YSh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogY3VycmVudE1lc3NhZ2VJZCB9KTtcblxuICAgICAgICBpZiAobXZ1RGF0YT8uc3RhdF9kYXRhKSB7XG4gICAgICAgICAgbG9nUHJvYmUoYFtTdGF0ZUZpbmRlcl0g5p+l5om+5oiQ5Yqf77yB5ZyoIG1lc3NhZ2VfaWQ6ICR7Y3VycmVudE1lc3NhZ2VJZH0g5aSE5om+5Yiw5p2D5aiB54q25oCB44CCYCk7XG4gICAgICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgICAgIHJldHVybiB7IG12dURhdGEsIG1lc3NhZ2VJZDogY3VycmVudE1lc3NhZ2VJZCB9O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dQcm9iZShgKOaOoumSiCkg5p+l6K+iIG1lc3NhZ2VfaWQ6ICR7Y3VycmVudE1lc3NhZ2VJZH0g5pe25o6l5Y+j5aSx6LSl77yM5bCG57un57ut5ZCR5YmN5p+l5om+44CC6ZSZ6K+vOiAke2Vycm9yfWAsICd3YXJuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGxvZ1Byb2JlKCdbU3RhdGVGaW5kZXJdIOafpeaJvuWksei0pe+8mumBjeWOhuWujOaJgOaciea2iOaBr+alvOWxgu+8jOWdh+acquaJvuWIsOacieaViOeahCBzdGF0X2RhdGHjgIInLCAnd2FybicpO1xuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbU3RhdGVGaW5kZXJdIOWcqOiOt+WPluiBiuWkqeiusOW9leaXtuWPkeeUn+S4pemHjemUmeivrzogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBmaW5hbGx5IHtcbiAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gW+iBjOi0o+WNleS4gF0g5om+5Yiw44CB6Kej5p6Q44CB6aqM6K+B5bm25YeG5aSH5aW944CQ5Y+v5L6b6L+Q6KGM5pe255u05o6l5L2/55So44CR55qE6Z+z5LmQ6YWN572u44CCXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx7IHBsYXlsaXN0czogUmVjb3JkPHN0cmluZywgUGxheWxpc3RDb25maWc+LCBkZWZhdWx0SWQ6IHN0cmluZywgdHJpZ2dlcnM6IFRyaWdnZXJbXSB9IHwgbnVsbD59XG4gKiAgICAgICAgICDkuIDkuKrljIXlkKvkuobjgJAgcGxheWxpc3RzIOaYoOWwhCDjgJHnmoTjgIHlrozlhajlh4blpIflsLHnu6rnmoTphY3nva7lr7nosaHvvIzmiJblnKjlpLHotKXml7bov5Tlm54gbnVsbOOAglxuICovXG5cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlV29ybGRib29rQ29uZmlnKCkge1xuICBsb2dQcm9iZSgnW1dvcmxkYm9va1BhcnNlciBWNC3lgaXlo67mqKHlvI9dIOW8gOWni+ino+aekC4uLicsICdncm91cCcpO1xuXG4gIC8vIFvkv67mlLnngrldIOiHquWumuS5iemUmeivr+exu++8jOeUqOS6jua4heaZsOWcsOWMuuWIhuKAnOmFjee9rue8uuWkseKAneWSjOKAnOacquefpemUmeivr+KAnVxuICAvLyDov5norqnmiJHku6znmoTplJnor6/lpITnkIbpgLvovpHmm7TnrKblkIggU1JQIOWOn+WImVxuICBjbGFzcyBDb25maWdNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgIHRoaXMubmFtZSA9ICdDb25maWdNaXNzaW5nRXJyb3InO1xuICAgIH1cbiAgfVxuXG4gIHR5cGUgQWdncmVnYXRlZFBsYXlsaXN0ID0gei5pbmZlcjx0eXBlb2YgWm9kUGxheWxpc3RDb25maWc+ICYgeyBfc291cmNlRmlsZTogc3RyaW5nIH07XG4gIHR5cGUgQWdncmVnYXRlZFRyaWdnZXIgPSB6LmluZmVyPHR5cGVvZiBab2RUcmlnZ2VyQ29uZmlnPiAmIHsgX3NvdXJjZUZpbGU6IHN0cmluZyB9O1xuXG4gIGNvbnN0IGFnZ3JlZ2F0ZWRDb25maWc6IHtcbiAgICBwbGF5bGlzdHM6IEFnZ3JlZ2F0ZWRQbGF5bGlzdFtdO1xuICAgIHRyaWdnZXJzOiBBZ2dyZWdhdGVkVHJpZ2dlcltdO1xuICAgIGRlZmF1bHRQbGF5bGlzdElkPzogc3RyaW5nO1xuICAgIF9kZWZhdWx0UGxheWxpc3RJZFNvdXJjZUZpbGU6IHN0cmluZyB8IG51bGw7XG4gIH0gPSB7XG4gICAgcGxheWxpc3RzOiBbXSxcbiAgICB0cmlnZ2VyczogW10sXG4gICAgZGVmYXVsdFBsYXlsaXN0SWQ6IHVuZGVmaW5lZCxcbiAgICBfZGVmYXVsdFBsYXlsaXN0SWRTb3VyY2VGaWxlOiBudWxsLFxuICB9O1xuXG4gIHRyeSB7XG4gICAgLy8g5YmN572u5qOA5p+l77ya5Zyo5omn6KGM5Lu75L2V5aSN5p2C6YC76L6R5YmN77yM6aaW5YWI56Gu6K6k5LiW55WM5Lmm5pWw5o2u5piv5ZCm5Y+v6K6/6Zeu44CCXG4gICAgY29uc3Qgd29ybGRib29rTmFtZXMgPSBnZXRDaGFyV29ybGRib29rTmFtZXMoJ2N1cnJlbnQnKTtcbiAgICBjb25zdCBzZWFyY2hPcmRlciA9IFt3b3JsZGJvb2tOYW1lcy5wcmltYXJ5LCAuLi53b3JsZGJvb2tOYW1lcy5hZGRpdGlvbmFsXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyDlpoLmnpzop5LoibLljaHmsqHmnInlhbPogZTku7vkvZXkuJbnlYzkuabvvIznm7TmjqXmipvlh7rmiJHku6zoh6rlrprkuYnnmoTplJnor69cbiAgICBpZiAoc2VhcmNoT3JkZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmlnTWlzc2luZ0Vycm9yKCfop5LoibLljaHmnKrlhbPogZTku7vkvZXkuJbnlYzkuabjgIInKTtcbiAgICB9XG5cbiAgICBsZXQgZm91bmRBbnlDb25maWdFbnRyeSA9IGZhbHNlO1xuXG4gICAgZm9yIChjb25zdCBib29rTmFtZSBvZiBzZWFyY2hPcmRlcikge1xuICAgICAgaWYgKCFib29rTmFtZSkgY29udGludWU7XG4gICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgZ2V0V29ybGRib29rKGJvb2tOYW1lKTtcbiAgICAgIGNvbnN0IGNvbmZpZ0VudHJpZXMgPSBlbnRyaWVzLmZpbHRlcihlID0+IGUubmFtZS5pbmNsdWRlcygnW011c2ljQ29uZmlnXScpKTtcblxuICAgICAgaWYgKGNvbmZpZ0VudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3VuZEFueUNvbmZpZ0VudHJ5ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBjb25maWdFbnRyaWVzKSB7XG4gICAgICAgIGxvZ1Byb2JlKGBbUGFyc2VyIFY0XSDlj5HnjrDlubblpITnkIbphY3nva7mlofku7Y6IFwiJHtlbnRyeS5uYW1lfVwiYCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmF3Q29uZmlnID0gWUFNTC5wYXJzZShlbnRyeS5jb250ZW50KTtcbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gWm9kV29ybGRib29rQ29uZmlnLnNhZmVQYXJzZShyYXdDb25maWcpO1xuXG4gICAgICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGxvZ1Byb2JlKGBbUGFyc2VyIFY0XSDmnaHnm64gXCIke2VudHJ5Lm5hbWV9XCIgWm9k6aqM6K+B5aSx6LSl77yM5bey6Lez6L+H44CCYCwgJ2Vycm9yJyk7XG4gICAgICAgICAgICBfZm9ybWF0Wm9kRXJyb3JGb3JUb2FzdHIodmFsaWRhdGlvblJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBkYXRhID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhO1xuXG4gICAgICAgICAgaWYgKGRhdGEucGxheWxpc3RzKSB7XG4gICAgICAgICAgICBhZ2dyZWdhdGVkQ29uZmlnLnBsYXlsaXN0cy5wdXNoKC4uLmRhdGEucGxheWxpc3RzLm1hcChwID0+ICh7IC4uLnAsIF9zb3VyY2VGaWxlOiBlbnRyeS5uYW1lIH0pKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLnRyaWdnZXJzKSB7XG4gICAgICAgICAgICBhZ2dyZWdhdGVkQ29uZmlnLnRyaWdnZXJzLnB1c2goLi4uZGF0YS50cmlnZ2Vycy5tYXAodCA9PiAoeyAuLi50LCBfc291cmNlRmlsZTogZW50cnkubmFtZSB9KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGF0YS5kZWZhdWx0X3BsYXlsaXN0X2lkKSB7XG4gICAgICAgICAgICBpZiAoYWdncmVnYXRlZENvbmZpZy5kZWZhdWx0UGxheWxpc3RJZCAmJiBhZ2dyZWdhdGVkQ29uZmlnLmRlZmF1bHRQbGF5bGlzdElkICE9PSBkYXRhLmRlZmF1bHRfcGxheWxpc3RfaWQpIHtcbiAgICAgICAgICAgICAgY29uc3Qgd2FybmluZ01zZyA9IGDlnKjmlofku7YgXCIke2VudHJ5Lm5hbWV9XCIg5Lit5Y+R546w55qEIGRlZmF1bHRfcGxheWxpc3RfaWQgKFwiJHtkYXRhLmRlZmF1bHRfcGxheWxpc3RfaWR9XCIpIOimhuebluS6huadpeiHquaWh+S7tiBcIiR7YWdncmVnYXRlZENvbmZpZy5fZGVmYXVsdFBsYXlsaXN0SWRTb3VyY2VGaWxlID8/ICfmnKrnn6UnfVwiIOeahOWumuS5iSAoXCIke2FnZ3JlZ2F0ZWRDb25maWcuZGVmYXVsdFBsYXlsaXN0SWR9XCIp44CC5Li656Gu5L+d6KGM5Li65Y+v6aKE5rWL77yM5bu66K6u5Y+q5L+d55WZ5LiA5Liq5a6a5LmJ44CCYDtcbiAgICAgICAgICAgICAgbG9nUHJvYmUoYFtQYXJzZXIgVjRdICR7d2FybmluZ01zZ31gLCAnd2FybicpO1xuICAgICAgICAgICAgICB0b2FzdHIud2FybmluZyh3YXJuaW5nTXNnLCAn6YWN572u6K2m5ZGKJywgeyB0aW1lT3V0OiAyMDAwMCwgY2xvc2VCdXR0b246IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZ2dyZWdhdGVkQ29uZmlnLmRlZmF1bHRQbGF5bGlzdElkID0gZGF0YS5kZWZhdWx0X3BsYXlsaXN0X2lkO1xuICAgICAgICAgICAgYWdncmVnYXRlZENvbmZpZy5fZGVmYXVsdFBsYXlsaXN0SWRTb3VyY2VGaWxlID0gZW50cnkubmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgIGxvZ1Byb2JlKGBbUGFyc2VyIFY0XSDop6PmnpDmnaHnm64gXCIke2VudHJ5Lm5hbWV9XCIg5pe25Y+R55SfWUFNTOivreazlemUmeivrzogJHtlLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7XG4gICAgICAgICAgdG9hc3RyLmVycm9yKGBbTXVzaWNDb25maWddIOaWh+S7tiBcIiR7ZW50cnkubmFtZX1cIiDmoLzlvI/plJnor6/vvJpZQU1MIOivreazleS4jeato+ehruOAgmAsICfphY3nva7plJnor68nLCB7XG4gICAgICAgICAgICB0aW1lT3V0OiAxMDAwMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWcqOaJgOacieaWh+S7tumDveajgOafpeWujOS5i+WQju+8jOWGjeWIpOaWreaYr+WQpuaJvuWIsOS6huS7u+S9lSBbTXVzaWNDb25maWddIOadoeebrlxuICAgIGlmICghZm91bmRBbnlDb25maWdFbnRyeSkge1xuICAgICAgdGhyb3cgbmV3IENvbmZpZ01pc3NpbmdFcnJvcign5Zyo5bey5YWz6IGU55qE5LiW55WM5Lmm5Lit77yM5pyq5om+5Yiw5Lu75L2V5YyF5ZCrIFtNdXNpY0NvbmZpZ10g55qE5p2h55uu44CCJyk7XG4gICAgfVxuXG4gICAgLy8gLS0tIOWFqOWxgOWBpeWFqOaAp+ajgOafpSAo6YC76L6R5L+d5oyB5LiN5Y+YKSAtLS1cbiAgICBsb2dQcm9iZSgnW1BhcnNlciBWNF0g5omA5pyJ5paH5Lu26IGa5ZCI5a6M5q+V77yM5byA5aeL5omn6KGM5YWo5bGA5YGl5YWo5oCn5qOA5p+lLi4uJywgJ2dyb3VwQ29sbGFwc2VkJyk7XG4gICAgbGV0IGlzR2xvYmFsbHlWYWxpZCA9IHRydWU7XG4gICAgY29uc3QgcGxheWxpc3RzQnlJZCA9IF8uZ3JvdXBCeShhZ2dyZWdhdGVkQ29uZmlnLnBsYXlsaXN0cywgJ2lkJyk7XG4gICAgZm9yIChjb25zdCBpZCBpbiBwbGF5bGlzdHNCeUlkKSB7XG4gICAgICBpZiAocGxheWxpc3RzQnlJZFtpZF0ubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBzb3VyY2VzID0gcGxheWxpc3RzQnlJZFtpZF0ubWFwKHAgPT4gcC5fc291cmNlRmlsZSkuam9pbignLCAnKTtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgW011c2ljQ29uZmlnXSDoh7Tlkb3plJnor686IOatjOWNlSBJRCBcIiR7aWR9XCIg5Zyo5aSa5Liq5paH5Lu25Lit6YeN5aSN5a6a5LmJ44CC5p2l5rqQOiAke3NvdXJjZXN944CCSUQg5b+F6aG75piv5ZSv5LiA55qE44CCYDtcbiAgICAgICAgbG9nUHJvYmUoZXJyb3JNc2csICdlcnJvcicpO1xuICAgICAgICB0b2FzdHIuZXJyb3IoZXJyb3JNc2csICfphY3nva7lhrLnqoEnLCB7IHRpbWVPdXQ6IDE1MDAwIH0pO1xuICAgICAgICBpc0dsb2JhbGx5VmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWxsUGxheWxpc3RJZHMgPSBuZXcgU2V0KGFnZ3JlZ2F0ZWRDb25maWcucGxheWxpc3RzLm1hcChwID0+IHAuaWQpKTtcbiAgICBpZiAoYWdncmVnYXRlZENvbmZpZy5kZWZhdWx0UGxheWxpc3RJZCAmJiAhYWxsUGxheWxpc3RJZHMuaGFzKGFnZ3JlZ2F0ZWRDb25maWcuZGVmYXVsdFBsYXlsaXN0SWQpKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBbTXVzaWNDb25maWddIOmFjee9rumUmeivrzog5pyA57uI55qEIGRlZmF1bHRfcGxheWxpc3RfaWQgKFwiJHthZ2dyZWdhdGVkQ29uZmlnLmRlZmF1bHRQbGF5bGlzdElkfVwiLCDmnaXoh6rmlofku7YgXCIke2FnZ3JlZ2F0ZWRDb25maWcuX2RlZmF1bHRQbGF5bGlzdElkU291cmNlRmlsZSA/PyAn5pyq55+lJ31cIikg5oyH5ZCR5LqG5LiA5Liq5LiN5a2Y5Zyo55qE5q2M5Y2V44CCYDtcbiAgICAgIGxvZ1Byb2JlKGVycm9yTXNnLCAnZXJyb3InKTtcbiAgICAgIHRvYXN0ci5lcnJvcihlcnJvck1zZywgJ+mFjee9rumUmeivrycsIHsgdGltZU91dDogMTUwMDAgfSk7XG4gICAgICBhZ2dyZWdhdGVkQ29uZmlnLmRlZmF1bHRQbGF5bGlzdElkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBmaW5hbFRyaWdnZXJzID0gYWdncmVnYXRlZENvbmZpZy50cmlnZ2Vycy5maWx0ZXIodHJpZ2dlciA9PiB7XG4gICAgICBpZiAoYWxsUGxheWxpc3RJZHMuaGFzKHRyaWdnZXIucGxheWxpc3RfaWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgW011c2ljQ29uZmlnXSDmoKHpqozlpLHotKU6IOadpeiHquaWh+S7tiBcIiR7dHJpZ2dlci5fc291cmNlRmlsZX1cIiDnmoTop6blj5HlmajmjIflkJHkuobkuI3lrZjlnKjnmoTmrYzljZVJRCBcIiR7dHJpZ2dlci5wbGF5bGlzdF9pZH1cIuOAguivpeinpuWPkeWZqOWwhuiiq+W/veeVpeOAgmA7XG4gICAgICBsb2dQcm9iZShlcnJvck1zZywgJ2Vycm9yJyk7XG4gICAgICB0b2FzdHIuZXJyb3IoZXJyb3JNc2csICfphY3nva7plJnor68nLCB7IHRpbWVPdXQ6IDEwMDAwIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgaWYgKCFpc0dsb2JhbGx5VmFsaWQpIHtcbiAgICAgIGxvZ1Byb2JlKCdbUGFyc2VyIFY0XSDlhajlsYDlgaXlhajmgKfmo4Dmn6XlpLHotKXvvIzphY3nva7ooqvmi5Lnu53jgIInLCAnZXJyb3InKTtcbiAgICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsb2dQcm9iZSgnW1BhcnNlciBWNF0g5YWo5bGA5YGl5YWo5oCn5qOA5p+l6YCa6L+H44CCJyk7XG4gICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuXG4gICAgaWYgKGFnZ3JlZ2F0ZWRDb25maWcucGxheWxpc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IENvbmZpZ01pc3NpbmdFcnJvcign5omA5pyJ6YWN572u5paH5Lu25Lit6YO95pyq6IO95om+5Yiw5Lu75L2V5pyJ5pWI55qE5q2M5Y2VIChwbGF5bGlzdHMp44CCJyk7XG4gICAgfVxuXG4gICAgLy8gLS0tIOaVsOaNruW9kuS4gOWMluW5tui/lOWbniAtLS1cbiAgICBjb25zdCBwbGF5bGlzdHNBc01hcDogUmVjb3JkPHN0cmluZywgUGxheWxpc3RDb25maWc+ID0ge307XG4gICAgZm9yIChjb25zdCBwbCBvZiBhZ2dyZWdhdGVkQ29uZmlnLnBsYXlsaXN0cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFRyYWNrcyA9IHBsLnRyYWNrcy5tYXAodHJhY2sgPT4gKHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIOatjOWQjTpcbiAgICAgICAgICB0cmFjay7mrYzlkI0gJiYgdHJhY2su5q2M5ZCNLnRyaW0oKSAhPT0gJydcbiAgICAgICAgICAgID8gdHJhY2su5q2M5ZCNXG4gICAgICAgICAgICA6IGRlY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwuc3BsaXQoJy8nKS5wb3AoKT8uc3BsaXQoJz8nKVswXSB8fCAn5pyq55+l5q2M5puyJyksXG4gICAgICAgIOatjOaJizogdHJhY2su5q2M5omLLFxuICAgICAgICDlsIHpnaI6IHRyYWNrLuWwgemdoixcbiAgICAgIH0pKTtcblxuICAgICAgcGxheWxpc3RzQXNNYXBbcGwuaWRdID0geyAuLi5fLm9taXQocGwsICdfc291cmNlRmlsZScpLCB0cmFja3M6IG5vcm1hbGl6ZWRUcmFja3MgfTtcbiAgICB9XG5cbiAgICBjb25zdCBmaW5hbENvbmZpZyA9IHtcbiAgICAgIHBsYXlsaXN0czogcGxheWxpc3RzQXNNYXAsXG4gICAgICBkZWZhdWx0SWQ6IGFnZ3JlZ2F0ZWRDb25maWcuZGVmYXVsdFBsYXlsaXN0SWQsXG4gICAgICB0cmlnZ2VyczogZmluYWxUcmlnZ2Vycy5tYXAodCA9PiBfLm9taXQodCwgJ19zb3VyY2VGaWxlJykpLFxuICAgIH07XG5cbiAgICBsb2dQcm9iZSgnW1BhcnNlciBWNF0g5pWw5o2u5b2S5LiA5YyW5a6M5oiQ77yM6L+Q6KGM5pe26YWN572u5bey5bCx57uq44CCJywgJ2xvZycpO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm4gZmluYWxDb25maWc7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8g6L+Z5piv5paw55qE44CB5pu05pm66IO955qE6ZSZ6K+v5aSE55CG5Lit5b+DXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ29uZmlnTWlzc2luZ0Vycm9yKSB7XG4gICAgICAvLyDliKTmlq3ov5nkuKrplJnor6/mmK/kuI3mmK/miJHku6zoh6rlt7Hmipvlh7rnmoTigJzphY3nva7nvLrlpLHigJ3plJnor69cbiAgICAgIGxvZ1Byb2JlKGBbUGFyc2VyIFY0XSDmjZXojrfliLDlj6/pooTop4HnmoTphY3nva7plJnor686ICR7ZXJyb3IubWVzc2FnZX1gLCAnZXJyb3InKTtcblxuICAgICAgLy8gW+aguOW/g+S/ruaUuV0g55u05o6l5L2/55SoIGVycm9yLm1lc3NhZ2Ug5L2c5Li6IHRvYXN0ciDnmoTmj5DnpLrlhoXlrrlcbiAgICAgIC8vIOi/meehruS/neS6huaIkeS7rOaKm+WHuueahOWFt+S9k+mUmeivr+S/oeaBr+iDveWkn+ebtOaOpeWRiOeOsOe7meeUqOaIt1xuICAgICAgdG9hc3RyLmVycm9yKGVycm9yLm1lc3NhZ2UsICdb6Z+z5LmQ5pKt5pS+5ZmoXSDphY3nva7nvLrlpLEnLCB7XG4gICAgICAgIHRpbWVPdXQ6IDIwMDAwLFxuICAgICAgICBjbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlpoLmnpzmmK/lhbbku5bmiYDmnInml6Dms5XpooTmlpnnmoTplJnor6/vvIzmr5TlpoLphZLppobnjq/looPpl67pophcbiAgICAgIGxvZ1Byb2JlKGBbUGFyc2VyIFY0XSDop6PmnpDov4fnqIvkuK3lj5HnlJ/mhI/lpJbpobblsYLplJnor686ICR7ZXJyb3J9YCwgJ2Vycm9yJyk7XG4gICAgICAvLyDmmL7npLrpgJrnlKjnmoTjgIHlu7rorq7nlKjmiLfliLfmlrDnmoTmj5DnpLpcbiAgICAgIHRvYXN0ci5lcnJvcihcbiAgICAgICAgJ+aSreaUvuWZqOWcqOWKoOi9veiuvue9ruaXtumBh+WIsOS4gOS4quS4tOaXtumXrumimOOAgui/memAmuW4uOWPr+S7pemAmui/h+aMiSBGNSDliLfmlrDphZLppobpobXpnaLmnaXop6PlhrPjgIInLFxuICAgICAgICAnW+mfs+S5kOaSreaUvuWZqF0g5Yqg6L295pe26YGH5Yiw5Li05pe26Zeu6aKYJyxcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVPdXQ6IDIwMDAwLFxuICAgICAgICAgIGNsb3NlQnV0dG9uOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG4gICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogW+W3peWOgiBWMy4wXSDku47mjIHkuYXljJblr7nosaHph43lu7rkuIDkuKrlrozmlbTnmoTjgIHlj6/kvpvov5DooYzml7bkvb/nlKjnmoQgUXVldWVJdGVt44CCXG4gKiBAcGFyYW0gcGVyc2lzdGVkSXRlbSAtIOS7jumFkummhuWPmOmHj+ivu+WPlueahOOAgee7j+i/hyBab2Qg6aqM6K+B55qEaXRlbeOAglxuICogQHBhcmFtIHBsYXlsaXN0Q29uZmlnIC0g5LuO5b2T5YmN5LiW55WM5Lmm6Kej5p6Q5Ye655qE5a+55bqU5q2M5Y2V6YWN572u44CCXG4gKiBAcmV0dXJucyB7UXVldWVJdGVtfSDkuIDkuKrlrozmlbTnmoTov5DooYzml7YgUXVldWVJdGVt44CCXG4gKi9cbmZ1bmN0aW9uIHJlY29uc3RpdHV0ZVF1ZXVlSXRlbShcbiAgcGVyc2lzdGVkSXRlbTogei5pbmZlcjx0eXBlb2YgWm9kUXVldWVJdGVtU3RhdGU+LFxuICBwbGF5bGlzdENvbmZpZzogUGxheWxpc3RDb25maWcsXG4pOiBRdWV1ZUl0ZW0ge1xuICByZXR1cm4ge1xuICAgIHBsYXlsaXN0SWQ6IHBlcnNpc3RlZEl0ZW0ucGxheWxpc3RJZCxcbiAgICBwcmlvcml0eTogcGVyc2lzdGVkSXRlbS50cmlnZ2VyU291cmNlPy5wcmlvcml0eSA/PyAtSW5maW5pdHksXG4gICAgcGxheWxpc3RDb250ZW50OiBfLmNsb25lRGVlcChwbGF5bGlzdENvbmZpZy50cmFja3MpLFxuICAgIG9uRmluaXNoUnVsZTogcGxheWxpc3RDb25maWcub25GaW5pc2hSdWxlLFxuICAgIGN1cnJlbnRJbmRleDogcGVyc2lzdGVkSXRlbS5jdXJyZW50SW5kZXgsXG4gICAgcGxheWVkSW5kaWNlczogbmV3IFNldChwZXJzaXN0ZWRJdGVtLnBsYXllZEluZGljZXMpLFxuICAgIHdhc0V2ZXJQbGF5ZWQ6IHBlcnNpc3RlZEl0ZW0ud2FzRXZlclBsYXllZCxcbiAgICB0cmlnZ2VyZWRCeTogcGVyc2lzdGVkSXRlbS50cmlnZ2VyU291cmNlID8gJ212dScgOiAnYmFzZScsXG4gICAgdHJpZ2dlclNvdXJjZTogcGVyc2lzdGVkSXRlbS50cmlnZ2VyU291cmNlLFxuICB9O1xufVxuXG50eXBlIENyZWF0ZVF1ZXVlSXRlbUNvbmZpZyA9XG4gIHwgeyB0eXBlOiAnYmFzZSc7IHBsYXlsaXN0SWQ6IHN0cmluZyB9XG4gIHwgeyB0eXBlOiAnbXZ1JzsgcGxheWxpc3RJZDogc3RyaW5nOyB0cmlnZ2VyOiB6LmluZmVyPHR5cGVvZiBab2RUcmlnZ2VyQ29uZmlnPiB9O1xuXG4vKipcbiAqIFvlt6XljoIgVjMuMF0g5Yib5bu65LiA5Liq5YWo5paw55qE44CB54q25oCB5Yid5aeL5YyW55qEIFF1ZXVlSXRlbeOAglxuICogQHBhcmFtIGNvbmZpZyAtIOS4gOS4quWMheWQq+aJgOacieW/heimgeS/oeaBr+eahOmFjee9ruWvueixoeOAglxuICogQHJldHVybnMge1F1ZXVlSXRlbSB8IG51bGx9IOS4gOS4quWujOaVtOeahOmYn+WIl+mhue+8jOaIluWcqOWksei0peaXtui/lOWbniBudWxs44CCXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVF1ZXVlSXRlbShjb25maWc6IENyZWF0ZVF1ZXVlSXRlbUNvbmZpZyk6IFF1ZXVlSXRlbSB8IG51bGwge1xuICBjb25zdCB7IHBsYXlsaXN0SWQgfSA9IGNvbmZpZztcblxuICBpZiAoIXBsYXlsaXN0SWQgfHwgIWFsbFBsYXlsaXN0c1twbGF5bGlzdElkXSkge1xuICAgIGxvZ1Byb2JlKGBbRmFjdG9yeV0g5Yib5bu66Zif5YiX6aG55aSx6LSl77ya6K+35rGC55qE5q2M5Y2VSUQgXCIke3BsYXlsaXN0SWR9XCIg5LiN5a2Y5Zyo44CCYCwgJ2Vycm9yJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBwbGF5bGlzdENvbmZpZyA9IGFsbFBsYXlsaXN0c1twbGF5bGlzdElkXTtcblxuICBjb25zdCBiYXNlSXRlbTogT21pdDxRdWV1ZUl0ZW0sICd0cmlnZ2VyZWRCeScgfCAndHJpZ2dlclNvdXJjZScgfCAnb25GaW5pc2hSdWxlJyB8ICdwcmlvcml0eSc+ID0ge1xuICAgIHBsYXlsaXN0SWQ6IHBsYXlsaXN0SWQsXG4gICAgcGxheWxpc3RDb250ZW50OiBfLmNsb25lRGVlcChwbGF5bGlzdENvbmZpZy50cmFja3MpLFxuICAgIGN1cnJlbnRJbmRleDogMCxcbiAgICBwbGF5ZWRJbmRpY2VzOiBuZXcgU2V0KCksXG4gICAgd2FzRXZlclBsYXllZDogZmFsc2UsXG4gIH07XG5cbiAgaWYgKGNvbmZpZy50eXBlID09PSAnYmFzZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uYmFzZUl0ZW0sXG4gICAgICBwcmlvcml0eTogLUluZmluaXR5LFxuICAgICAgdHJpZ2dlcmVkQnk6ICdiYXNlJyxcbiAgICAgIG9uRmluaXNoUnVsZTogcGxheWxpc3RDb25maWcub25GaW5pc2hSdWxlID8/ICdsb29wJyxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5iYXNlSXRlbSxcbiAgICAgIHByaW9yaXR5OiBjb25maWcudHJpZ2dlci5wcmlvcml0eSxcbiAgICAgIHRyaWdnZXJlZEJ5OiAnbXZ1JyxcbiAgICAgIG9uRmluaXNoUnVsZTogcGxheWxpc3RDb25maWcub25GaW5pc2hSdWxlLFxuICAgICAgdHJpZ2dlclNvdXJjZTogY29uZmlnLnRyaWdnZXIsXG4gICAgfTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gNy4g6L+Q6KGM5pe25Yid5aeL5YyW5LiO5pKt5pS+5Zmo5o6n5Yi2IChSdW50aW1lICYgUGxheWVyIENvbnRyb2xzKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVBsYXllckZvckNoYXQoXG4gIGNvbmZpZzogYW55LFxuICBhdXRob3JpdGF0aXZlU3RhdGU6IGFueSxcbiAgb3B0aW9ucz86IHsgYXV0b1BsYXlJZldhc1BsYXlpbmc/OiBib29sZWFuIH0sXG4pIHtcbiAgbG9nUHJvYmUoJz09PSDlvIDlp4vmiafooYzjgJDmoLjlv4PCt+iHquaEiOW8j+WIneWni+WMluOAkSBWOS4wID09PScsICdncm91cCcpO1xuICB0cnkge1xuICAgIC8vIC0tLSDjgJDlh4blpIfpmLbmrrXjgJEg5riF55CG5LiO6YeN572uIC0tLVxuICAgIGlzQ29yZVBsYXllckluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAvLyDms6jmhI/vvJpTdGF0ZVJlc2V0IOS8mumHjee9ruWGheWtmO+8jOaJgOS7peaIkeS7rOmcgOimgeWFiOivu+aho++8jOWGjeagueaNruivu+aho+e7k+aenOaBouWkjeW/heimgeeahOiusOW/hlxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSByZWFkU3RhdGUoKTtcbiAgICBTdGF0ZU1hbmFnZXIucmVzZXRTdGF0ZSgpO1xuXG4gICAgaWYgKHNhdmVkU3RhdGUpIHtcbiAgICAgIC8vIOaBouWkjeWfuuehgOeKtuaAge+8iOatpOaXtiBhY3RpdmVfcXVldWUg6L+Y5piv56m655qE77yM5bCG5Zyo5ZCO6Z2i6YeN5bu677yJXG4gICAgICBTdGF0ZU1hbmFnZXIubG9hZFN0YXRlKHNhdmVkU3RhdGUpO1xuICAgIH1cblxuICAgIE12dU1hbmFnZXIucmVzZXRTdGF0ZSgpO1xuICAgIE12dU1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuICAgIGNvbnN0IGFjdGl2ZVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldEFjdGl2ZVBsYXllcigpO1xuICAgIGlmIChhY3RpdmVQbGF5ZXIpIGFjdGl2ZVBsYXllci5wYXVzZSgpO1xuICAgIHRyaWdnZXJzID0gW107XG4gICAgYWxsUGxheWxpc3RzID0ge307XG4gICAgZGVmYXVsdFBsYXlsaXN0SWQgPSAnJztcblxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyXSDphY3nva7ml6DmlYjvvIzliJ3lp4vljJbkuK3mraLjgIInLCAnZXJyb3InKTtcbiAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfkuJbnlYzkuabpn7PkuZDphY3nva7op6PmnpDlpLHotKXvvIzor7fmo4Dmn6XphY3nva7jgIInKTtcbiAgICB9XG5cbiAgICBhbGxQbGF5bGlzdHMgPSBjb25maWcucGxheWxpc3RzO1xuICAgIGRlZmF1bHRQbGF5bGlzdElkID0gY29uZmlnLmRlZmF1bHRJZDtcbiAgICB0cmlnZ2VycyA9IGNvbmZpZy50cmlnZ2VycztcblxuICAgIGNvbnN0IGN1cnJlbnRTdGF0RGF0YSA9IGF1dGhvcml0YXRpdmVTdGF0ZT8ubXZ1RGF0YT8uc3RhdF9kYXRhID8/IG51bGw7XG4gICAgY29uc3QgYXV0aG9yaXRhdGl2ZU1lc3NhZ2VJZCA9IGF1dGhvcml0YXRpdmVTdGF0ZT8ubWVzc2FnZUlkO1xuXG4gICAgbGV0IGZpbmFsUXVldWU6IFF1ZXVlSXRlbVtdID0gW107XG5cbiAgICAvLyAtLS0g44CQ56ys5LiA5q2l44CRIOehruWumuW5tumqjOivgeadg+WogeeahOWfuuehgOatjOWNlSBJRCAtLS1cbiAgICBsZXQgY29ycmVjdEJhc2VQbGF5bGlzdElkID0gZGVmYXVsdFBsYXlsaXN0SWQ7XG5cbiAgICBjb25zdCBtc2daZXJvID0gZ2V0Q2hhdE1lc3NhZ2VzKDAsIHsgaW5jbHVkZV9zd2lwZXM6IHRydWUgfSlbMF07XG4gICAgY29uc3QgY3VycmVudFN3aXBlSWQgPSBtc2daZXJvPy5zd2lwZV9pZCA/PyAwO1xuXG4gICAgaWYgKG1zZ1plcm8pIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRHcmVldGluZyA9IG1zZ1plcm8uc3dpcGVzPy5bbXNnWmVyby5zd2lwZV9pZF07XG4gICAgICBjb25zdCB0YWdNYXRjaCA9IGN1cnJlbnRHcmVldGluZz8ubWF0Y2goLzxwbGF5bGlzdDooW14+XSspPi8pO1xuICAgICAgaWYgKHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdKSB7XG4gICAgICAgIGNvbnN0IHRhZ1BsYXlsaXN0SWQgPSB0YWdNYXRjaFsxXTtcbiAgICAgICAgaWYgKGFsbFBsYXlsaXN0c1t0YWdQbGF5bGlzdElkXSkge1xuICAgICAgICAgIGxvZ1Byb2JlKGBbSW5pdGlhbGl6ZXItSGVhbF0gKOWfuuWHhikg5LuO5byA5Zy655m95qCH562+56Gu5a6a5p2D5aiB5Z+656GA5q2M5Y2VOiBcIiR7dGFnUGxheWxpc3RJZH1cImApO1xuICAgICAgICAgIGNvcnJlY3RCYXNlUGxheWxpc3RJZCA9IHRhZ1BsYXlsaXN0SWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgW011c2ljQ29uZmlnXSDphY3nva7orablkYo6IOW8gOWcuueZveagh+etviA8cGxheWxpc3Q6JHt0YWdQbGF5bGlzdElkfT4g5oyH5ZCR5LqG5LiA5Liq5LiN5a2Y5Zyo55qE5q2M5Y2VSUTjgILlsIblm57pgIDoh7Ppu5jorqTmrYzljZXjgIJgO1xuICAgICAgICAgIGxvZ1Byb2JlKGVycm9yTXNnLCAnd2FybicpO1xuICAgICAgICAgIHRvYXN0ci53YXJuaW5nKGVycm9yTXNnLCAn6YWN572u6K2m5ZGKJywgeyB0aW1lT3V0OiAxNTAwMCB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoYFtJbml0aWFsaXplci1IZWFsXSAo5Z+65YeGKSDlvIDlnLrnmb3ml6DmoIfnrb7vvIzkvb/nlKjkuJbnlYzkuabpu5jorqTmrYzljZU6IFwiJHtkZWZhdWx0UGxheWxpc3RJZCA/PyAn5pegJ31cImApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxhc3RTd2lwZUlkID0gU3RhdGVNYW5hZ2VyLmdldExhc3RBY3RpdmVTd2lwZUlkKCk7XG5cbiAgICBpZiAobGFzdFN3aXBlSWQgIT09IG51bGwgJiYgbGFzdFN3aXBlSWQgIT09IGN1cnJlbnRTd2lwZUlkKSB7XG4gICAgICBsb2dQcm9iZShgW0luaXRpYWxpemVyXSAo5LiK5LiL5paH5YiH5o2iKSDmo4DmtYvliLDlubPooYzlroflrpnot4Pov4E6IFN3aXBlICR7bGFzdFN3aXBlSWR9IC0+ICR7Y3VycmVudFN3aXBlSWR944CCYCwgJ3dhcm4nKTtcbiAgICAgIGxvZ1Byb2JlKGBbSW5pdGlhbGl6ZXJdICjlhrPnrZYpIOaXp+aXtumXtOe6v+eahOWik+W/l+mTreW3suWkseaViO+8jOato+WcqOa4heepui4uLmApO1xuICAgICAgU3RhdGVNYW5hZ2VyLmNsZWFyRmluaXNoZWRCYXNlUGxheWxpc3RzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ1Byb2JlKGBbSW5pdGlhbGl6ZXJdICjkuIrkuIvmlofkv53mjIEpIOWQjOS4gOaXtumXtOe6vyAoU3dpcGUgJHtjdXJyZW50U3dpcGVJZH0p77yM5L+d5oyB5aKT5b+X6ZOt6K6w5b2V44CCYCk7XG4gICAgfVxuICAgIC8vIOabtOaWsOW9k+WJjemUmueCuVxuICAgIFN0YXRlTWFuYWdlci5zZXRMYXN0QWN0aXZlU3dpcGVJZChjdXJyZW50U3dpcGVJZCk7XG5cbiAgICAvLyBb5paw5aKeXSDmo4Dmn6UgNDog5Z+656GA5q2M5Y2V5LiO5Zy65pmv5q2M5Y2V5Yay56qB5qOA5p+lXG4gICAgaWYgKGNvcnJlY3RCYXNlUGxheWxpc3RJZCkge1xuICAgICAgY29uc3Qgc2NlbmVQbGF5bGlzdElkcyA9IG5ldyBTZXQodHJpZ2dlcnMubWFwKHQgPT4gdC5wbGF5bGlzdF9pZCkpO1xuICAgICAgaWYgKHNjZW5lUGxheWxpc3RJZHMuaGFzKGNvcnJlY3RCYXNlUGxheWxpc3RJZCkpIHtcbiAgICAgICAgY29uc3QgZmF0YWxFcnJvck1zZyA9IGBbTXVzaWNDb25maWddIOiHtOWRvemFjee9rumUmeivrzog5q2M5Y2VIFwiJHtjb3JyZWN0QmFzZVBsYXlsaXN0SWR9XCIg5LiN6IO95ZCM5pe26KKr55So5L2c5Z+656GA5q2M5Y2V77yI5Zyo5byA5Zy655m95oiW6buY6K6k6K6+572u5Lit77yJ5ZKM5Zy65pmv5q2M5Y2V77yI6KKr6Kem5Y+R5Zmo5YWz6IGU77yJ44CC6K+35Li65a6D5Lus5L2/55So5LiN5ZCM55qE5q2M5Y2V44CCYDtcbiAgICAgICAgbG9nUHJvYmUoZmF0YWxFcnJvck1zZywgJ2Vycm9yJyk7XG4gICAgICAgIHRvYXN0ci5lcnJvcihmYXRhbEVycm9yTXNnLCAn6YWN572u5Yay56qBJywgeyB0aW1lT3V0OiAyMDAwMCwgY2xvc2VCdXR0b246IHRydWUgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5Z+656GA5q2M5Y2V5LiO5Zy65pmv5q2M5Y2V5a2Y5Zyo6Ie05ZG95Yay56qB44CCJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tIOOAkOesrOS6jOatpeOAkSDpmJ/liJflh4DljJbkuI7ph43lu7ogKEhlYWwgdGhlIFBhc3QpIC0tLVxuICAgIGlmIChzYXZlZFN0YXRlKSB7XG4gICAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyLUhlYWxdICjlh4DljJYpIOW8gOWni+WuoeafpeWtmOahoy4uLicsICdncm91cENvbGxhcHNlZCcpO1xuICAgICAgY29uc3QgaGVhbGVkUXVldWU6IFF1ZXVlSXRlbVtdID0gW107XG4gICAgICAvLyDms6jmhI/vvJrmraTml7bmiJHku6zkvb/nlKjnmoTmmK8gc2F2ZWRTdGF0ZS5hY3RpdmVfcXVldWXvvIzogIzkuI3mmK8gU3RhdGVNYW5hZ2VyIOS4reeahO+8iOWboOS4uiByZXNldFN0YXRlIOS8mua4heepuu+8iVxuICAgICAgZm9yIChjb25zdCBwZXJzaXN0ZWRJdGVtIG9mIHNhdmVkU3RhdGUuYWN0aXZlX3F1ZXVlKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFsbFBsYXlsaXN0cywgcGVyc2lzdGVkSXRlbS5wbGF5bGlzdElkKSkge1xuICAgICAgICAgIGxvZ1Byb2JlKGAo5YeA5YyWLeS4ouW8gykg5a2Y5qGj5q2M5Y2VIFwiJHtwZXJzaXN0ZWRJdGVtLnBsYXlsaXN0SWR9XCIg5bey5LiN5a2Y5Zyo44CCYCwgJ3dhcm4nKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYXlsaXN0Q29uZmlnID0gYWxsUGxheWxpc3RzW3BlcnNpc3RlZEl0ZW0ucGxheWxpc3RJZF07XG4gICAgICAgIGNvbnN0IGlzQmFzZUl0ZW0gPSAhcGVyc2lzdGVkSXRlbS50cmlnZ2VyU291cmNlO1xuXG4gICAgICAgIGlmIChpc0Jhc2VJdGVtKSB7XG4gICAgICAgICAgaWYgKHBlcnNpc3RlZEl0ZW0ucGxheWxpc3RJZCA9PT0gY29ycmVjdEJhc2VQbGF5bGlzdElkKSB7XG4gICAgICAgICAgICBsb2dQcm9iZShgKOWHgOWMli3kv53nlZkpIOWfuuehgOatjOWNlSBcIiR7cGVyc2lzdGVkSXRlbS5wbGF5bGlzdElkfVwiIOS7jeeEtuacieaViOOAgmApO1xuICAgICAgICAgICAgaGVhbGVkUXVldWUucHVzaChyZWNvbnN0aXR1dGVRdWV1ZUl0ZW0ocGVyc2lzdGVkSXRlbSwgcGxheWxpc3RDb25maWcpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nUHJvYmUoXG4gICAgICAgICAgICAgIGAo5YeA5YyWLeS4ouW8gykg5Z+656GA5q2M5Y2VIFwiJHtwZXJzaXN0ZWRJdGVtLnBsYXlsaXN0SWR9XCIg5bey6KKr5paw55qE5p2D5aiB5q2M5Y2VIFwiJHtjb3JyZWN0QmFzZVBsYXlsaXN0SWQgPz8gJ+aXoCd9XCIg5pu/5Luj44CCYCxcbiAgICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudFRyaWdnZXIgPSB0cmlnZ2Vycy5maW5kKHQgPT4gdC5wbGF5bGlzdF9pZCA9PT0gcGVyc2lzdGVkSXRlbS5wbGF5bGlzdElkKTtcbiAgICAgICAgICBsb2dQcm9iZShgKOaOoumSiC3lh4DljJYpIOato+WcqOWuoeafpeWtmOaho+eahE1WVeatjOWNlSBcIiR7cGVyc2lzdGVkSXRlbS5wbGF5bGlzdElkfVwiLi4uYCk7XG5cbiAgICAgICAgICBpZiAocGxheWxpc3RDb25maWcub25GaW5pc2hSdWxlID09PSAncG9wJykge1xuICAgICAgICAgICAgbG9nUHJvYmUoYCjlh4DljJYt5Lii5byDKSDljp/lm6DvvJrop4TliJnkuLogJ3BvcCcgKOWcuuaZr+atjOWNleS4jeW6lOi3qOS8muivneS/neeVmSnjgIJgKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghY3VycmVudFRyaWdnZXIpIHtcbiAgICAgICAgICAgIGxvZ1Byb2JlKGAo5YeA5YyWLeS4ouW8gykg5Y6f5Zug77ya5Zyo5pyA5paw55qE5LiW55WM5Lmm6YWN572u5Lit5bey5om+5LiN5Yiw5a+55bqU55qE6Kem5Y+R5Zmo44CCYCwgJ3dhcm4nKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghTXZ1TWFuYWdlci5jaGVja1RyaWdnZXJDb25kaXRpb24oY3VycmVudFRyaWdnZXIsIGN1cnJlbnRTdGF0RGF0YSkpIHtcbiAgICAgICAgICAgIGxvZ1Byb2JlKGAo5YeA5YyWLeS4ouW8gykg5Y6f5Zug77ya5pyA5paw55qE6Kem5Y+R5Zmo5p2h5Lu25Zyo5b2T5YmN54q25oCB5LiL5LiN5ruh6Laz44CCYCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsb2dQcm9iZShgKOWHgOWMli3kv53nlZkpIOmqjOivgemAmui/h+OAgmApO1xuICAgICAgICAgIGhlYWxlZFF1ZXVlLnB1c2gocmVjb25zdGl0dXRlUXVldWVJdGVtKHBlcnNpc3RlZEl0ZW0sIHBsYXlsaXN0Q29uZmlnKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZpbmFsUXVldWUgPSBoZWFsZWRRdWV1ZTtcbiAgICAgIGxvZ1Byb2JlKCdbSW5pdGlhbGl6ZXItSGVhbF0gKOWHgOWMlikg5a6h5p+l5a6M5oiQ44CCJywgJ2dyb3VwRW5kJyk7XG4gICAgfVxuXG4gICAgLy8gLS0tIOOAkOesrOS4ieatpeOAkSDpmJ/liJfooaXlhYUgLS0tXG4gICAgaWYgKGN1cnJlbnRTdGF0RGF0YSAmJiB0cmlnZ2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyLUhlYWxdICjooaXlhYUpIOato+WcqOajgOafpeaYr+WQpuacieaWsOa/gOa0u+eahOWcuuaZr+atjOWNlS4uLicsICdncm91cENvbGxhcHNlZCcpO1xuICAgICAgZm9yIChjb25zdCB0cmlnZ2VyIG9mIHRyaWdnZXJzKSB7XG4gICAgICAgIGNvbnN0IGFscmVhZHlFeGlzdHMgPSBmaW5hbFF1ZXVlLnNvbWUoXG4gICAgICAgICAgaXRlbSA9PiBpdGVtLnRyaWdnZXJTb3VyY2UgJiYgYXJlVHJpZ2dlcnNGdW5jdGlvbmFsbHlFcXVhbChpdGVtLnRyaWdnZXJTb3VyY2UsIHRyaWdnZXIpLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghYWxyZWFkeUV4aXN0cyAmJiBNdnVNYW5hZ2VyLmNoZWNrVHJpZ2dlckNvbmRpdGlvbih0cmlnZ2VyLCBjdXJyZW50U3RhdERhdGEpKSB7XG4gICAgICAgICAgY29uc3QgcGxheWxpc3RDb25maWcgPSBhbGxQbGF5bGlzdHNbdHJpZ2dlci5wbGF5bGlzdF9pZF07XG4gICAgICAgICAgaWYgKHBsYXlsaXN0Q29uZmlnICYmIHBsYXlsaXN0Q29uZmlnLm9uRmluaXNoUnVsZSA9PT0gJ3BvcCcpIHtcbiAgICAgICAgICAgIGlmIChhdXRob3JpdGF0aXZlTWVzc2FnZUlkID09PSAwKSB7XG4gICAgICAgICAgICAgIGxvZ1Byb2JlKGAo6KGl5YWFKSDlhYHorrjmt7vliqAgJ3BvcCcg5q2M5Y2VIFwiJHt0cmlnZ2VyLnBsYXlsaXN0X2lkfVwi77yM5Zug5Li65LiK5LiL5paH5piv5byA5Zy655m944CCYCk7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSBjcmVhdGVRdWV1ZUl0ZW0oeyB0eXBlOiAnbXZ1JywgcGxheWxpc3RJZDogdHJpZ2dlci5wbGF5bGlzdF9pZCwgdHJpZ2dlcjogdHJpZ2dlciB9KTtcbiAgICAgICAgICAgICAgaWYgKG5ld0l0ZW0pIGZpbmFsUXVldWUucHVzaChuZXdJdGVtKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvZ1Byb2JlKFxuICAgICAgICAgICAgICAgIGAo6KGl5YWFLemYu+atoikg5Zy65pmv5q2M5Y2VIFwiJHt0cmlnZ2VyLnBsYXlsaXN0X2lkfVwiIOWboOinhOWImeS4uiAncG9wJyDkuJTkuIrkuIvmlofpnZ7lvIDlnLrnmb3ogIzooqvlv73nlaXjgIJgLFxuICAgICAgICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV3SXRlbSA9IGNyZWF0ZVF1ZXVlSXRlbSh7IHR5cGU6ICdtdnUnLCBwbGF5bGlzdElkOiB0cmlnZ2VyLnBsYXlsaXN0X2lkLCB0cmlnZ2VyOiB0cmlnZ2VyIH0pO1xuICAgICAgICAgICAgaWYgKG5ld0l0ZW0pIGZpbmFsUXVldWUucHVzaChuZXdJdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxvZ1Byb2JlKCdbSW5pdGlhbGl6ZXItSGVhbF0gKOihpeWFhSkg5qOA5p+l5a6M5oiQ44CCJywgJ2dyb3VwRW5kJyk7XG4gICAgfVxuXG4gICAgLy8gLS0tIOOAkOesrOWbm+atpeOAkSDln7rnoYDmrYzljZXmnIDnu4jms6jlhaUgKEZpbmFsIEd1YXJhbnRlZSBWMi4wKSAtLS1cbiAgICBjb25zdCBiYXNlUGxheWxpc3RFeGlzdHMgPSBmaW5hbFF1ZXVlLnNvbWUoaXRlbSA9PiBpdGVtLnRyaWdnZXJlZEJ5ID09PSAnYmFzZScpO1xuICAgIGlmICghYmFzZVBsYXlsaXN0RXhpc3RzICYmIGNvcnJlY3RCYXNlUGxheWxpc3RJZCAmJiBhbGxQbGF5bGlzdHNbY29ycmVjdEJhc2VQbGF5bGlzdElkXSkge1xuICAgICAgY29uc3QgaXNEZWFkID0gU3RhdGVNYW5hZ2VyLmdldEZpbmlzaGVkQmFzZVBsYXlsaXN0cygpLmhhcyhjb3JyZWN0QmFzZVBsYXlsaXN0SWQpO1xuXG4gICAgICBpZiAoaXNEZWFkKSB7XG4gICAgICAgIGxvZ1Byb2JlKFxuICAgICAgICAgIGBbSW5pdGlhbGl6ZXItSGVhbF0gKOazqOWFpS3pmLvmraIpIOWfuuehgOatjOWNlSBcIiR7Y29ycmVjdEJhc2VQbGF5bGlzdElkfVwiIOWcqOatpOS4iuS4i+aWhyhTd2lwZSAke2N1cnJlbnRTd2lwZUlkfSnkuK3lt7Llroznu5Mo5aKT5b+X6ZOt5Zyo5YaMKeOAguWwiumHjeWOhuWPsu+8jOaLkue7neWkjea0u+OAgmAsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dQcm9iZShgW0luaXRpYWxpemVyLUhlYWxdICjms6jlhaUpIOacgOe7iOazqOWFpeadg+WogeWfuuehgOatjOWNlSBcIiR7Y29ycmVjdEJhc2VQbGF5bGlzdElkfVwi44CCYCk7XG4gICAgICAgIGNvbnN0IGJhc2VJdGVtID0gY3JlYXRlUXVldWVJdGVtKHsgdHlwZTogJ2Jhc2UnLCBwbGF5bGlzdElkOiBjb3JyZWN0QmFzZVBsYXlsaXN0SWQgfSk7XG4gICAgICAgIGlmIChiYXNlSXRlbSkgZmluYWxRdWV1ZS5wdXNoKGJhc2VJdGVtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAtLS0g44CQ56ys5LqU5q2l44CRIOacgOe7iOWKoOi9veS4juWQjue7reiuvue9riAtLS1cbiAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyLUZpbmFsaXplXSDmraPlnKjmj5DkuqTmnIDnu4jpmJ/liJflubblrozmiJDorr7nva4uLi4nKTtcbiAgICBTdGF0ZU1hbmFnZXIudXBkYXRlUXVldWUoZmluYWxRdWV1ZSk7XG5cbiAgICAvLyDms6jmhI/vvJrlpoLmnpwgcmVzZXRTdGF0ZSDph43nva7kuobmqKHlvI/vvIzmiJHku6zpnIDopoHku44gc2F2ZWRTdGF0ZSDmgaLlpI3vvIzmiJbogIXkvb/nlKjpu5jorqRcbiAgICAvLyDkuYvliY3nmoTku6PnoIHmmK/lnKggcmVzZXRTdGF0ZSDlkI7nm7TmjqXopobnm5bvvIzkvYbov5nph4zmiJHku6zliKnnlKggbG9hZFN0YXRlIOW3sue7j+aBouWkjeS6huS4gOmDqOWIhlxuICAgIC8vIOaIkeS7rOmcgOimgeehruS/nSBTdHJhdGVneU1hbmFnZXIg5ZCM5q2lXG4gICAgY29uc3QgbW9kZSA9IFN0YXRlTWFuYWdlci5nZXRQbGF5YmFja01vZGUoKTtcbiAgICBTdHJhdGVneU1hbmFnZXIuc2V0TW9kZShtb2RlKTtcbiAgICBsb2dQcm9iZShgKOaOoumSiCkg562W55Wl5qih5byP5bey5ZCM5q2l5Li6OiAke21vZGV9YCk7XG4gICAgU3RyYXRlZ3lNYW5hZ2VyLm5vdGlmeVF1ZXVlQ2hhbmdlZCgpO1xuXG4gICAgUGxheWJhY2tFbmdpbmUuaW5pdGlhbGl6ZSgpO1xuXG4gICAgY29uc3Qgdm9sdW1lID0gU3RhdGVNYW5hZ2VyLmdldFZvbHVtZSgpO1xuICAgIGlmIChQbGF5YmFja0VuZ2luZS5nZXRBY3RpdmVQbGF5ZXIoKSkgUGxheWJhY2tFbmdpbmUuZ2V0QWN0aXZlUGxheWVyKCkhLnZvbHVtZSA9IHZvbHVtZTtcbiAgICBpZiAoUGxheWJhY2tFbmdpbmUuZ2V0U3RhbmRieVBsYXllcigpKSBQbGF5YmFja0VuZ2luZS5nZXRTdGFuZGJ5UGxheWVyKCkhLnZvbHVtZSA9IDA7XG5cbiAgICBjb25zdCBpbml0aWFsVG9wSXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgICBpZiAoaW5pdGlhbFRvcEl0ZW0pIHtcbiAgICAgIGNvbnN0IHRyYWNrID0gaW5pdGlhbFRvcEl0ZW0ucGxheWxpc3RDb250ZW50W2luaXRpYWxUb3BJdGVtLmN1cnJlbnRJbmRleF07XG4gICAgICBpZiAodHJhY2sgJiYgUGxheWJhY2tFbmdpbmUuZ2V0QWN0aXZlUGxheWVyKCkpIHtcbiAgICAgICAgUGxheWJhY2tFbmdpbmUuZ2V0QWN0aXZlUGxheWVyKCkhLnNyYyA9IHRyYWNrLnVybDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9nUHJvYmUoYFtJbml0aWFsaXplcl0gKOaOoumSiCkg5pyA57uI6Zif5YiX5Li656m677yI5Y+v6IO95Zug5Z+656GA5q2M5Y2V5bey5a6M57uT77yJ77yM5LiN5omn6KGM6Z+z6aKR6aKE5Yqg6L2944CCYCk7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRTdGF0RGF0YSkge1xuICAgICAgYXdhaXQgTXZ1TWFuYWdlci5wZXJzaXN0Q3VycmVudFN0YXRlKGN1cnJlbnRTdGF0RGF0YSk7XG4gICAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyLUZpbmFsaXplXSAg5bey5bCG5pys5qyh5Yib5LiW55qE5p2D5aiBTVZV54q25oCB5oyB5LmF5YyW5Li65Y6G5Y+y5Z+65YeG44CCJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IE12dU1hbmFnZXIucGVyc2lzdEN1cnJlbnRTdGF0ZSh7fSk7XG4gICAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyLUZpbmFsaXplXSDlvZPliY3ml6BNVlXnirbmgIHvvIzlt7LlsIbnqbrnirbmgIHmjIHkuYXljJbkuLrljoblj7Lln7rlh4bjgIInKTtcbiAgICB9XG5cbiAgICBhd2FpdCB3cml0ZVN0YXRlKCdpbml0aWFsaXphdGlvbicpO1xuICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuXG4gICAgaWYgKG9wdGlvbnM/LmF1dG9QbGF5SWZXYXNQbGF5aW5nKSB7XG4gICAgICBsb2dQcm9iZSgnW0luaXRpYWxpemVyXSAo5o6i6ZKIKSDmo4DmtYvliLDmnaXoh6rlvIDlnLrnmb3mu5HliqjnmoTigJzoh6rliqjmkq3mlL7igJ3mhI/lm77jgIInLCAnd2FybicpO1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gICAgICBpZiAoY3VycmVudEl0ZW0pIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tJbml0aWFsaXplcl0g5paw55qE5byA5Zy655m95bey6YWN572u5q2M5Y2V77yM5bCG5omn6KGM4oCc5Yib5LiW5pKt5pS+4oCdLi4uJyk7XG4gICAgICAgIGF3YWl0IF9oYW5kbGVHZW5lc2lzUGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tJbml0aWFsaXplcl0g5paw55qE5byA5Zy655m95pyq6YWN572u5q2M5Y2V77yM6Ieq5Yqo5pKt5pS+5bey5Y+W5raI44CCJyk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbSW5pdGlhbGl6ZXJdIOaguOW/g+WIneWni+WMlui/h+eoi+S4reWPkeeUn+S4pemHjemUmeivrzogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBmaW5hbGx5IHtcbiAgICBsb2dQcm9iZSgnPT09IOOAkOaguOW/g8K36Ieq5oSI5byP5Yid5aeL5YyW44CR5omn6KGM5a6M5q+VID09PScsICdncm91cEVuZCcpO1xuICB9XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIOOAkFY4LjIg5qC45b+D44CR5pKt5pS+5omn6KGM5Zmo44CCXG4gKiAgICAgICAgICAgICAg5a6D55qE5Y2V5LiA6IGM6LSj5piv77ya5o6l5pS25LiA5Liq55uu5qCH57Si5byV77yM5bm25bCd6K+V5pKt5pS+5a6D44CCXG4gKiAgICAgICAgICAgICAg5a6D5Lya6L+U5Zue5LiA5LiqIFByb21pc2XvvIzmiJDlip/ml7YgcmVzb2x2Ze+8jOWksei0peaXtiByZWplY3TvvIzlsIbplJnor6/lhpLms6Hnu5nosIPnlKjogIXlpITnkIbjgIJcbiAqICAgICAgICAgICAgICDlroPoh6rouqvkuI3ljIXlkKvku7vkvZXph43or5XmiJboh6rmhIjpgLvovpHjgIJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gX2V4ZWN1dGVUcmFuc2l0aW9uKHRhcmdldEluZGV4OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgbG9nUHJvYmUoYFtFeGVjdXRvcl0g5pS25Yiw5pKt5pS+5oyH5Luk77yM55uu5qCH57Si5byVOiAke3RhcmdldEluZGV4fWAsICdncm91cCcpO1xuXG4gIGNvbnN0IGZyZXNoSXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgaWYgKCFmcmVzaEl0ZW0pIHtcbiAgICBsb2dQcm9iZShgW0V4ZWN1dG9yXSDmiafooYzkuK3mraLvvJrml6DmnInmlYjpmJ/liJfpoblgLCAnd2FybicpO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBjb25zdCB0YXJnZXRUcmFjayA9IGZyZXNoSXRlbS5wbGF5bGlzdENvbnRlbnRbdGFyZ2V0SW5kZXhdO1xuICBpZiAoIXRhcmdldFRyYWNrPy51cmwpIHtcbiAgICBsb2dQcm9iZShgW0V4ZWN1dG9yXSDmiafooYzlpLHotKXvvJrlnKjntKLlvJUgJHt0YXJnZXRJbmRleH0g5aSE5om+5LiN5Yiw6Z+z6L2o5oiW6Z+z6L2oVVJM5peg5pWI44CCYCwgJ2Vycm9yJyk7XG4gICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0cmFjayBhdCBpbmRleCAke3RhcmdldEluZGV4fWApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBQbGF5YmFja0VuZ2luZS50cmFuc2l0aW9uVG9UcmFjayh0YXJnZXRUcmFjay51cmwsIFN0YXRlTWFuYWdlci5nZXRWb2x1bWUoKSk7XG5cbiAgICBTdGF0ZU1hbmFnZXIuc2V0UGxheWJhY2tTdGF0ZSgnUExBWUlORycpO1xuICAgIHByZXBhcmVOZXh0VHJhY2soKTtcbiAgICBsb2dQcm9iZShgW0V4ZWN1dG9yXSDntKLlvJUgJHt0YXJnZXRJbmRleH0g5pKt5pS+5oiQ5Yqf44CCYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nUHJvYmUoYFtFeGVjdXRvcl0gUGxheWJhY2tFbmdpbmXmiqXlkYrmkq3mlL7lpLHotKXjgILljp/lm6A6ICR7ZXJyb3J9YCwgJ2Vycm9yJyk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0gZmluYWxseSB7XG4gICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICB9XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIOOAkFY4LjIg5qC45b+D44CR6L+t5Luj5byP6Ieq5oSI5b6q546v44CCXG4gKiAgICAgICAgICAgICAg5q2k5pyA57uI54mI5Lil5qC86YG15a6IIFNSUCDljp/liJnvvIzlsIblhrPnrZblupTnlKjpgLvovpHlrozlhajlp5TmiZjnu5kgX2FwcGx5TmF2aWdhdGlvbkRlY2lzaW9u44CCXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9leGVjdXRlU2VsZkhlYWxpbmdMb29wKCk6IFByb21pc2U8dm9pZD4ge1xuICBsb2dQcm9iZSgnW1NlbGZIZWFsXSDlkK/liqjigJzov63ku6PlvI/oh6rmhIjlvqrnjq/igJ0uLi4g5pKt5pS+5Zmo6L+b5YWl57Sn5oCl6Ieq5oSI5qih5byP44CCJywgJ3dhcm4nKTtcblxuICBsZXQgY29uc2VjdXRpdmVGYWlsdXJlcyA9IDE7XG4gIGNvbnN0IGN1cnJlbnRJdGVtRm9yVGhyZXNob2xkID0gU3RhdGVNYW5hZ2VyLmdldFRvcFF1ZXVlSXRlbSgpO1xuICBjb25zdCB0aHJlc2hvbGQgPSBjdXJyZW50SXRlbUZvclRocmVzaG9sZD8ucGxheWxpc3RDb250ZW50Lmxlbmd0aCA/PyAwO1xuXG4gIGlmIChjdXJyZW50SXRlbUZvclRocmVzaG9sZCkge1xuICAgIHRvYXN0ci5lcnJvcihcbiAgICAgIGDmrYzmm7LjgIoke2N1cnJlbnRJdGVtRm9yVGhyZXNob2xkLnBsYXlsaXN0Q29udGVudFtjdXJyZW50SXRlbUZvclRocmVzaG9sZC5jdXJyZW50SW5kZXhdPy7mrYzlkI0gPz8gJ+acquefpeatjOabsid944CL5Yqg6L295aSx6LSl77yM5q2j5Zyo5bCd6K+V6Ieq5Yqo5aSE55CGLi4uYCxcbiAgICApO1xuICB9XG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBpZiAodGhyZXNob2xkID4gMCAmJiBjb25zZWN1dGl2ZUZhaWx1cmVzID49IHRocmVzaG9sZCkge1xuICAgICAgbG9nUHJvYmUoXG4gICAgICAgIGBbU2VsZkhlYWxdICjnhpTmlq3lmagpIOi/nue7reWksei0pSAke2NvbnNlY3V0aXZlRmFpbHVyZXN9IOasoe+8jOW3sui+vuWIsOaIlui2hei/h+mYiOWAvCAke3RocmVzaG9sZH3jgILoh6rmhIjkuK3mraLjgIJgLFxuICAgICAgICAnZXJyb3InLFxuICAgICAgKTtcbiAgICAgIGlmIChjdXJyZW50SXRlbUZvclRocmVzaG9sZCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoYOatjOWNleOAiiR7Y3VycmVudEl0ZW1Gb3JUaHJlc2hvbGQucGxheWxpc3RJZH3jgIvkuK3miYDmnInmrYzmm7LlnYfml6Dms5XliqDovb3vvIzmkq3mlL7lt7LlgZzmraLjgIJgKTtcbiAgICAgIH1cbiAgICAgIFN0YXRlTWFuYWdlci5zZXRQbGF5YmFja1N0YXRlKCdTVE9QUEVEJyk7XG4gICAgICBicm9hZGNhc3RGdWxsU3RhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50SXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgICBpZiAoIWN1cnJlbnRJdGVtKSB7XG4gICAgICBsb2dQcm9iZSgnW1NlbGZIZWFsXSDoh6rmhIjkuK3mraLvvJrkuK3pgJTpmJ/liJflj5jnqbrjgIInLCAnd2FybicpO1xuICAgICAgU3RhdGVNYW5hZ2VyLnNldFBsYXliYWNrU3RhdGUoJ1NUT1BQRUQnKTtcbiAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yRGVjaXNpb24gPSBTdHJhdGVneU1hbmFnZXIuZ2V0Q3VycmVudFN0cmF0ZWd5KCkub25QbGF5YmFja0Vycm9yKGN1cnJlbnRJdGVtKTtcbiAgICBsb2dQcm9iZShcbiAgICAgIGBbU2VsZkhlYWxdIOaUtuWIsOetlueVpSAoJHtTdHJhdGVneU1hbmFnZXIuZ2V0Q3VycmVudFN0cmF0ZWd5KCkuY29uc3RydWN0b3IubmFtZX0pIOeahOmUmeivr+WGs+etljogeyBhY3Rpb246ICcke2Vycm9yRGVjaXNpb24uYWN0aW9ufScgfWAsXG4gICAgKTtcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IGF3YWl0IF9hcHBseU5hdmlnYXRpb25EZWNpc2lvbihlcnJvckRlY2lzaW9uKTtcblxuICAgIGlmICghZGlyZWN0aXZlLm5lZWRzQXN5bmNFZmZlY3QpIHtcbiAgICAgIGxvZ1Byb2JlKCdbU2VsZkhlYWxdIOWGs+etluW6lOeUqOWQjuaXoOmcgOaSreaUvu+8jOiHquaEiOS4reatouOAgicpO1xuICAgICAgLy8g5rOo5oSP77yaYXBwbHlOYXZpZ2F0aW9uRGVjaXNpb24g5YaF6YOo5bey57uP5aSE55CG5LqGIHNldFBsYXlpbmcoZmFsc2UpIOWSjOW5v+aSrVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOmYsuW+oeaAp+e8lueoi++8muehruS/nSB0YXJnZXRJbmRleCDlrZjlnKhcbiAgICBpZiAodHlwZW9mIGRpcmVjdGl2ZS50YXJnZXRJbmRleCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGxvZ1Byb2JlKCdbU2VsZkhlYWxdIOWGs+etluW6lOeUqOWQjumcgOimgeaSreaUvu+8jOS9huayoeacieacieaViOeahCB0YXJnZXRJbmRleOOAguiHquaEiOS4reatouOAgicsICdlcnJvcicpO1xuICAgICAgU3RhdGVNYW5hZ2VyLnNldFBsYXliYWNrU3RhdGUoJ1NUT1BQRUQnKTtcbiAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOatpemqpCA0OiDlho3mrKHlsJ3or5Xmkq3mlL5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgX2V4ZWN1dGVUcmFuc2l0aW9uKGRpcmVjdGl2ZS50YXJnZXRJbmRleCk7XG5cbiAgICAgIGxvZ1Byb2JlKCdbU2VsZkhlYWxdIOaSreaUvuaIkOWKn++8jOiHquaEiOW+queOr+e7k+adn+OAgicsICdsb2cnKTtcbiAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gY2F0Y2ggKG5leHRFcnJvcikge1xuICAgICAgY29uc2VjdXRpdmVGYWlsdXJlcysrO1xuICAgICAgY29uc3QgbmV4dFRvcEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gICAgICBjb25zdCBuZXh0VHJhY2tUaXRsZSA9IG5leHRUb3BJdGVtPy5wbGF5bGlzdENvbnRlbnRbbmV4dFRvcEl0ZW0uY3VycmVudEluZGV4XT8u5q2M5ZCNID8/ICfmnKrnn6XmrYzmm7InO1xuICAgICAgbG9nUHJvYmUoYFtTZWxmSGVhbF0g56ysICR7Y29uc2VjdXRpdmVGYWlsdXJlc30g5qyh5pKt5pS+5aSx6LSlOmAsICdlcnJvcicpO1xuICAgICAgY29uc29sZS5lcnJvcihuZXh0RXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKGDkuIvkuIDpppbjgIoke25leHRUcmFja1RpdGxlfeOAi+WKoOi9veWksei0pS4uLmApO1xuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfYXBwbHlOYXZpZ2F0aW9uRGVjaXNpb24oXG4gIGRlY2lzaW9uOiBTdHJhdGVneURlY2lzaW9uLFxuKTogUHJvbWlzZTx7IG5lZWRzQXN5bmNFZmZlY3Q6IGJvb2xlYW47IHRhcmdldEluZGV4PzogbnVtYmVyIH0+IHtcbiAgbG9nUHJvYmUoXG4gICAgYFtDZW50cmFsQ29tbWFuZF0g5q2j5Zyo5bqU55So562W55Wl5Yaz562WOiB7IGFjdGlvbjogJyR7ZGVjaXNpb24uYWN0aW9ufScsIG5leHRJbmRleDogJHtkZWNpc2lvbi5uZXh0SW5kZXggPz8gJ04vQSd9IH1gLFxuICAgICdncm91cCcsXG4gICk7XG5cbiAgbGV0IG5lZWRzQXN5bmNFZmZlY3QgPSBmYWxzZTtcbiAgbGV0IHRhcmdldEluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3QgY3VycmVudEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG5cbiAgc3dpdGNoIChkZWNpc2lvbi5hY3Rpb24pIHtcbiAgICBjYXNlICdHb1RvJzoge1xuICAgICAgaWYgKHR5cGVvZiBkZWNpc2lvbi5uZXh0SW5kZXggPT09ICdudW1iZXInKSB7XG4gICAgICAgIGxvZ1Byb2JlKCdbQ2VudHJhbENvbW1hbmRdIOaMh+S7pDogR29Ub+OAguaPkOS6pOWvvOiIquatpemqpC4uLicpO1xuICAgICAgICBTdGF0ZU1hbmFnZXIuY29tbWl0TmF2aWdhdGlvblN0ZXAoZGVjaXNpb24ubmV4dEluZGV4KTtcbiAgICAgICAgbmVlZHNBc3luY0VmZmVjdCA9IHRydWU7XG4gICAgICAgIHRhcmdldEluZGV4ID0gZGVjaXNpb24ubmV4dEluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tDZW50cmFsQ29tbWFuZF0g6Ie05ZG96YC76L6R6ZSZ6K+vOiBHb1RvIOaMh+S7pOe8uuWwkSBuZXh0SW5kZXjvvIHov5nmmK/kuIDkuKrnrZbnlaXmqKHlnZfnmoRCVUfjgIInLCAnZXJyb3InKTtcbiAgICAgICAgY29uc29sZS5lcnJvcign5o6i6ZKI5o2V6I6377ya6ZSZ6K+v55qE5Yaz562W5a+56LGhOicsIGRlY2lzaW9uKTtcbiAgICAgICAgY29uc29sZS5lcnJvcign5o6i6ZKI5o2V6I6377ya5Y+R55Sf6ZSZ6K+v5pe255qE5pKt5pS+5Zmo54q25oCBOicsIFN0YXRlTWFuYWdlci5nZXRTdGF0ZVNuYXBzaG90Rm9yUnVudGltZSgpKTtcbiAgICAgICAgbmVlZHNBc3luY0VmZmVjdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSAnUmVzdGFydCc6IHtcbiAgICAgIGxvZ1Byb2JlKCdbQ2VudHJhbENvbW1hbmRdIOaMh+S7pDogUmVzdGFydOOAguivt+axguS7juWktOmHjeaSreW9k+WJjei9qOmBk+OAgicpO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtKSB7XG4gICAgICAgIGxvZ1Byb2JlKCdbQ2VudHJhbENvbW1hbmRdICjmjqLpkogpIOatpOWGs+etluS4jeaUueWPmOeKtuaAgee0ouW8le+8jOS7heeUn+aIkOS4gOS4quaViOaenOaMh+S7pOOAgicpO1xuICAgICAgICBuZWVkc0FzeW5jRWZmZWN0ID0gdHJ1ZTtcbiAgICAgICAgdGFyZ2V0SW5kZXggPSBjdXJyZW50SXRlbS5jdXJyZW50SW5kZXg7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlICdSZW1vdmVUb3BBbmRBZHZhbmNlJzoge1xuICAgICAgbG9nUHJvYmUoJ1tDZW50cmFsQ29tbWFuZF0g5oyH5LukOiBSZW1vdmVUb3BBbmRBZHZhbmNl44CC5q2j5Zyo5omn6KGM44CQ6Ieq5rS95byP44CR6Zif5YiX5L+u5pS55LiO6L+H5rihLi4uJyk7XG4gICAgICBjb25zdCBpdGVtVG9SZW1vdmUgPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gICAgICBpZiAoaXRlbVRvUmVtb3ZlICYmIGl0ZW1Ub1JlbW92ZS50cmlnZ2VyZWRCeSA9PT0gJ2Jhc2UnICYmIGl0ZW1Ub1JlbW92ZS5vbkZpbmlzaFJ1bGUgPT09ICdwb3AnKSB7XG4gICAgICAgIGxvZ1Byb2JlKGBbQ2VudHJhbENvbW1hbmRdICjmrbvkuqHnmbvorrApIOWfuuehgOatjOWNlSBcIiR7aXRlbVRvUmVtb3ZlLnBsYXlsaXN0SWR9XCIg5Y2z5bCG56a75Zy6YCwgJ3dhcm4nKTtcbiAgICAgICAgU3RhdGVNYW5hZ2VyLmFkZFRvRmluaXNoZWRCYXNlUGxheWxpc3RzKGl0ZW1Ub1JlbW92ZS5wbGF5bGlzdElkKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRRdWV1ZSA9IFN0YXRlTWFuYWdlci5nZXRRdWV1ZSgpO1xuXG4gICAgICBjb25zdCBwb3BwZWRJdGVtID0gY3VycmVudFF1ZXVlLnNoaWZ0KCk7XG4gICAgICBsb2dQcm9iZShgKOaOoumSiCkg5bey5LuO6Zif5YiX5Lit56e76ZmkOiBcIiR7cG9wcGVkSXRlbT8ucGxheWxpc3RJZH1cImApO1xuXG4gICAgICBTdGF0ZU1hbmFnZXIudXBkYXRlUXVldWUoY3VycmVudFF1ZXVlKTtcblxuICAgICAgbG9nUHJvYmUoJ1tDZW50cmFsQ29tbWFuZF0gKOaPoeaJiykg5q2j5Zyo6YCa55+lIFN0cmF0ZWd5TWFuYWdlciDpmJ/liJflt7Llj5jmm7QuLi4nKTtcbiAgICAgIFN0cmF0ZWd5TWFuYWdlci5ub3RpZnlRdWV1ZUNoYW5nZWQoKTtcblxuICAgICAgY29uc3QgbmV3VG9wSXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgICAgIGlmIChuZXdUb3BJdGVtKSB7XG4gICAgICAgIGxvZ1Byb2JlKGAo5Yaz562WKSDmlrDpmJ/pppbkuLogXCIke25ld1RvcEl0ZW0ucGxheWxpc3RJZH1cIu+8jOWHhuWkh+i/h+a4oeWIsOWFtuW9k+WJjee0ouW8lTogJHtuZXdUb3BJdGVtLmN1cnJlbnRJbmRleH1gKTtcbiAgICAgICAgbmVlZHNBc3luY0VmZmVjdCA9IHRydWU7XG4gICAgICAgIHRhcmdldEluZGV4ID0gbmV3VG9wSXRlbS5jdXJyZW50SW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dQcm9iZSgnKOWGs+etlikg6Zif5YiX5bey56m677yM5YGc5q2i5pKt5pS+44CCJyk7XG4gICAgICAgIGxvZ1Byb2JlKCdbQ2VudHJhbENvbW1hbmRdICjkv67lpI0pIOajgOa1i+WIsOmYn+WIl+a4heepuu+8jOato+WcqOS4i+i+vueJqeeQhumdmemfs+aMh+S7pC4uLicpO1xuICAgICAgICBhd2FpdCBQbGF5YmFja0VuZ2luZS5mYWRlT3V0QW5kUGF1c2UoKTtcbiAgICAgICAgU3RhdGVNYW5hZ2VyLnNldFBsYXliYWNrU3RhdGUoJ1NUT1BQRUQnKTtcbiAgICAgICAgbmVlZHNBc3luY0VmZmVjdCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlICdMb29wUmVzZXQnOiB7XG4gICAgICBsb2dQcm9iZSgnW0NlbnRyYWxDb21tYW5kXSDmjIfku6Q6IExvb3BSZXNldOOAguaJp+ihjOKAnOaMh+aMpeWutuaooeWei+KAnS4uLicsICd3YXJuJyk7XG4gICAgICBTdGF0ZU1hbmFnZXIucmVzZXRDdXJyZW50SXRlbUZvckxvb3AoKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRNb2RlID0gU3RhdGVNYW5hZ2VyLmdldFBsYXliYWNrTW9kZSgpO1xuICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAncmFuZG9tJykge1xuICAgICAgICBsb2dQcm9iZSgnKOaMh+aMpSkg5qOA5rWL5Yiw6ZqP5py65qih5byP77yM5ZCR5L2c5puy5a6257Si6KaB5paw5LmQ6LCxLi4uJyk7XG4gICAgICAgIGNvbnN0IGdlbmVzaXNQbGFuID0gKFN0cmF0ZWd5TWFuYWdlci5nZXRDdXJyZW50U3RyYXRlZ3koKSBhcyBSYW5kb21TdHJhdGVneSkucHJlcGFyZUdlbmVzaXMoXG4gICAgICAgICAgU3RhdGVNYW5hZ2VyLmdldFRvcFF1ZXVlSXRlbSgpLFxuICAgICAgICApO1xuICAgICAgICBpZiAoZ2VuZXNpc1BsYW4pIHtcbiAgICAgICAgICBTdGF0ZU1hbmFnZXIuY29tbWl0R2VuZXNpc1N0YXRlKFxuICAgICAgICAgICAgZ2VuZXNpc1BsYW4ubmV3Q3VycmVudEluZGV4LFxuICAgICAgICAgICAgZ2VuZXNpc1BsYW4ubmV3UGxheWJhY2tQbGFuLFxuICAgICAgICAgICAgZ2VuZXNpc1BsYW4ubmV3UGxhbkluZGV4LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbmFsU3RhcnRJbmRleCA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKT8uY3VycmVudEluZGV4ID8/IDA7XG4gICAgICBsb2dQcm9iZShgKOaMh+aMpSkg5rWB56iL5a6M5oiQ44CC5pyA57uI56Gu5a6a55qE5paw6LW35aeL57Si5byV5Li6OiAke2ZpbmFsU3RhcnRJbmRleH1gKTtcbiAgICAgIG5lZWRzQXN5bmNFZmZlY3QgPSB0cnVlO1xuICAgICAgdGFyZ2V0SW5kZXggPSBmaW5hbFN0YXJ0SW5kZXg7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlICdTdG9wJzoge1xuICAgICAgbG9nUHJvYmUoJ1tDZW50cmFsQ29tbWFuZF0g5oyH5LukOiBTdG9w44CC5YGc5q2i5pKt5pS+44CCJyk7XG4gICAgICBTdGF0ZU1hbmFnZXIuc2V0UGxheWJhY2tTdGF0ZSgnU1RPUFBFRCcpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSAnRG9Ob3RoaW5nJzpcbiAgICBkZWZhdWx0OlxuICAgICAgbG9nUHJvYmUoYFtDZW50cmFsQ29tbWFuZF0g5oyH5LukOiBEb05vdGhpbmfjgILml6DnirbmgIHlj5jmm7TjgIJgKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgaWYgKGRlY2lzaW9uLmFjdGlvbiAhPT0gJ1JlbW92ZVRvcEFuZEFkdmFuY2UnKSB7XG4gICAgYnJvYWRjYXN0RnVsbFN0YXRlKCk7XG4gIH1cblxuICBjb25zdCBkaXJlY3RpdmUgPSB7IG5lZWRzQXN5bmNFZmZlY3QsIHRhcmdldEluZGV4IH07XG4gIGxvZ1Byb2JlKFxuICAgIGBbQ2VudHJhbENvbW1hbmRdIOWGs+etluW6lOeUqOWujOaIkOOAgui/lOWbnuaMh+S7pDogeyBuZWVkc0FzeW5jRWZmZWN0OiAke2RpcmVjdGl2ZS5uZWVkc0FzeW5jRWZmZWN0fSwgdGFyZ2V0SW5kZXg6ICR7ZGlyZWN0aXZlLnRhcmdldEluZGV4ID8/ICdOL0EnfSB9YCxcbiAgKTtcbiAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICByZXR1cm4gZGlyZWN0aXZlO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBbVjkuNiDlh4DljJZdIOmHiuaUvuaViOaenOmUgeW5tuW5v+aSreacgOe7iOeKtuaAgeOAglxuICogICAgICAgICAgICAgIOi/meaYr+aJgOacieW8guatpeaOp+WItuWZqCBmaW5hbGx5IOWdl+S4reeahOagh+WHhuKAnOiwouW5leKAneeoi+W6j+OAglxuICovXG5hc3luYyBmdW5jdGlvbiBfcmVsZWFzZUVmZmVjdExvY2soKSB7XG4gIC8vIOaOoumSiDog6K6w5b2V6ZSB6YeK5pS+55qE5Yqo5L2c77yM6L+Z5a+55LqO6LCD6K+VVUnljaHmrbvpl67popjoh7PlhbPph43opoFcbiAgbG9nUHJvYmUoJ1tMb2NrTWFuYWdlcl0g5q2j5Zyo6YeK5pS+5pWI5p6c6ZSB5bm25bm/5pKt5pyA57uI54q25oCBLi4uJyk7XG5cbiAgU3RhdGVNYW5hZ2VyLnNldFBlcmZvcm1pbmdFZmZlY3QoZmFsc2UpO1xuICBicm9hZGNhc3RGdWxsU3RhdGUoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX2hhbmRsZVRyYWNrRW5kZWQoKSB7XG4gIGxvZ1Byb2JlKCdbQ29udHJvbGxlcjpUcmFja0VuZF0gPT09IOW8gOWni+WkhOeQhui9qOmBk+iHqueEtue7k+adn+S6i+S7tiA9PT0nLCAnZ3JvdXAnKTtcbiAgaWYgKFN0YXRlTWFuYWdlci5pc1BlcmZvcm1pbmdFZmZlY3QoKSkge1xuICAgIGxvZ1Byb2JlKCdbQ29udHJvbGxlcjpUcmFja0VuZF0g6K+35rGC6KKr5ouS57ud77yM5Zug5Li65pWI5p6c5q2j5Zyo5omn6KGM44CCJywgJ3dhcm4nKTtcbiAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY3VycmVudEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gIGlmICghY3VycmVudEl0ZW0pIHtcbiAgICBsb2dQcm9iZSgnW0NvbnRyb2xsZXI6VHJhY2tFbmRdIOivt+axguS4reatou+8mumYn+WIl+S4uuepuuOAgicpO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIFN0YXRlTWFuYWdlci5zZXRQZXJmb3JtaW5nRWZmZWN0KHRydWUpO1xuICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuXG4gICAgY29uc3QgZGVjaXNpb24gPSBTdHJhdGVneU1hbmFnZXIuZ2V0Q3VycmVudFN0cmF0ZWd5KCkub25UcmFja0VuZChjdXJyZW50SXRlbSk7XG4gICAgY29uc3QgZGlyZWN0aXZlID0gYXdhaXQgX2FwcGx5TmF2aWdhdGlvbkRlY2lzaW9uKGRlY2lzaW9uKTtcblxuICAgIGlmIChkaXJlY3RpdmUubmVlZHNBc3luY0VmZmVjdCAmJiB0eXBlb2YgZGlyZWN0aXZlLnRhcmdldEluZGV4ID09PSAnbnVtYmVyJykge1xuICAgICAgYXdhaXQgX2V4ZWN1dGVUcmFuc2l0aW9uKGRpcmVjdGl2ZS50YXJnZXRJbmRleCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpUcmFja0VuZF0g5Zyo5omn6KGM5pWI5p6c5pe25o2V6I635Yiw6ZSZ6K+v77yM5bCG5ZCv5Yqo6Ieq5oSI5b6q546vLi4uYCwgJ2Vycm9yJyk7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgYXdhaXQgX2V4ZWN1dGVTZWxmSGVhbGluZ0xvb3AoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCBfcmVsZWFzZUVmZmVjdExvY2soKTtcbiAgICBhd2FpdCB3cml0ZVN0YXRlKCd0cmFja0VuZGVkJyk7XG4gICAgbG9nUHJvYmUoJ1tDb250cm9sbGVyOlRyYWNrRW5kXSA9PT0g6L2o6YGT57uT5p2f5LqL5Lu25aSE55CG5a6M5q+VICjplIHlt7LpgJrov4fosIPluqblmajph4rmlL4pID09PScsICdncm91cEVuZCcpO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyA4LiDlhajlsYBBUEnkuI7kuovku7bns7vnu58gKEdsb2JhbCBBUEkgJiBFdmVudCBTeXN0ZW0pXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5hc3luYyBmdW5jdGlvbiBfaGFuZGxlTmF2aWdhdGlvbihkaXJlY3Rpb246ICduZXh0JyB8ICdwcmV2Jykge1xuICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6TmF2XSA9PT0g5byA5aeL5aSE55CG55So5oi35a+86Iiq5LqL5Lu2ICjmlrnlkJE6ICR7ZGlyZWN0aW9ufSkgPT09YCwgJ2dyb3VwJyk7XG4gIGlmIChTdGF0ZU1hbmFnZXIuaXNQZXJmb3JtaW5nRWZmZWN0KCkpIHtcbiAgICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6TmF2XSDor7fmsYLooqvmi5Lnu53vvIzlm6DkuLrmlYjmnpzmraPlnKjmiafooYzjgIJgLCAnd2FybicpO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjdXJyZW50SXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgaWYgKCFjdXJyZW50SXRlbSkge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpOYXZdIOivt+axguS4reatou+8mumYn+WIl+S4uuepuuOAgmApO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIFN0YXRlTWFuYWdlci5zZXRQZXJmb3JtaW5nRWZmZWN0KHRydWUpO1xuICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuXG4gICAgY29uc3QgZGVjaXNpb24gPSBTdHJhdGVneU1hbmFnZXIuZ2V0Q3VycmVudFN0cmF0ZWd5KCkuYWR2YW5jZShjdXJyZW50SXRlbSwgZGlyZWN0aW9uKTtcbiAgICBjb25zdCBkaXJlY3RpdmUgPSBhd2FpdCBfYXBwbHlOYXZpZ2F0aW9uRGVjaXNpb24oZGVjaXNpb24pO1xuXG4gICAgbG9nUHJvYmUoXG4gICAgICBgW0NvbnRyb2xsZXI6TmF2XSAo5o6i6ZKIKSDljp/lp4vlhrPnrZY6ICR7ZGVjaXNpb24uYWN0aW9ufSwg5aSE55CG5oyH5LukOiBuZWVkc0FzeW5jRWZmZWN0PSR7ZGlyZWN0aXZlLm5lZWRzQXN5bmNFZmZlY3R9YCxcbiAgICApO1xuXG4gICAgaWYgKGRlY2lzaW9uLmFjdGlvbiA9PT0gJ1Jlc3RhcnQnKSB7XG4gICAgICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6TmF2XSDmo4DmtYvliLAgUmVzdGFydCDlhrPnrZbvvIzmiafooYwgc2VlaygwKSDmlYjmnpzjgIJgKTtcbiAgICAgIGNvbnN0IGFjdGl2ZVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldEFjdGl2ZVBsYXllcigpO1xuICAgICAgaWYgKGFjdGl2ZVBsYXllcikgYWN0aXZlUGxheWVyLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIGlmIChTdGF0ZU1hbmFnZXIuZ2V0UGxheWJhY2tNb2RlKCkgIT09ICdzaW5nbGUnKSB7XG4gICAgICAgIHRvYXN0ci5pbmZvKCflt7LmmK/nrKzkuIDpppYnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpcmVjdGl2ZS5uZWVkc0FzeW5jRWZmZWN0ICYmIHR5cGVvZiBkaXJlY3RpdmUudGFyZ2V0SW5kZXggPT09ICdudW1iZXInKSB7XG4gICAgICBhd2FpdCBfZXhlY3V0ZVRyYW5zaXRpb24oZGlyZWN0aXZlLnRhcmdldEluZGV4KTtcbiAgICB9IGVsc2UgaWYgKGRlY2lzaW9uLmFjdGlvbiA9PT0gJ0RvTm90aGluZycpIHtcbiAgICAgIHRvYXN0ci5pbmZvKGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ+W3suaYr+atjOWNleacgOWQjuS4gOmmluOAgicgOiAn5bey5piv5q2M5Y2V56ys5LiA6aaW44CCJyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpOYXZdIOWcqOaJp+ihjOaViOaenOaXtuaNleiOt+WIsOmUmeivr++8jOWwhuWQr+WKqOiHquaEiOW+queOry4uLmAsICdlcnJvcicpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGF3YWl0IF9leGVjdXRlU2VsZkhlYWxpbmdMb29wKCk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgX3JlbGVhc2VFZmZlY3RMb2NrKCk7XG4gICAgYXdhaXQgd3JpdGVTdGF0ZSgnbmF2aWdhdGlvbicpO1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpOYXZdID09PSDnlKjmiLflr7zoiKrkuovku7blpITnkIblrozmr5UgKOmUgeW3sumAmui/h+iwg+W6puWZqOmHiuaUvikgPT09YCwgJ2dyb3VwRW5kJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBb5YaF6YOo5qC45b+DXSDmiafooYzliJvkuJbmkq3mlL7nmoTlrp7pmYXpgLvovpHjgIJcbiAqIOazqOaEj++8muatpOWHveaVsOS4jeajgOafpeS5n+S4jeiuvue9ruaViOaenOmUge+8jOiwg+eUqOiAheW/hemhu+ehruS/neW3suaMgeaciemUgeOAglxuICovXG5hc3luYyBmdW5jdGlvbiBfZXhlY3V0ZUdlbmVzaXNQbGF5SW50ZXJuYWwodGFyZ2V0SW5kZXg6IG51bWJlcikge1xuICBsb2dQcm9iZShgW0ludGVybmFsOkdlbmVzaXNdICjliqjkvZwpIOaJp+ihjOWGhemDqOWIm+S4luaSreaUvumAu+i+kSAo55uu5qCH57Si5byVOiAke3RhcmdldEluZGV4fSkuLi5gKTtcbiAgU3RhdGVNYW5hZ2VyLnNldFBsYXliYWNrU3RhdGUoJ1BMQVlJTkcnKTtcbiAgYnJvYWRjYXN0RnVsbFN0YXRlKCk7XG4gIGF3YWl0IF9leGVjdXRlVHJhbnNpdGlvbih0YXJnZXRJbmRleCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9oYW5kbGVHZW5lc2lzUGxheSgpIHtcbiAgaWYgKFN0YXRlTWFuYWdlci5pc1BlcmZvcm1pbmdFZmZlY3QoKSkge1xuICAgIGxvZ1Byb2JlKCdbQ29udHJvbGxlcjpHZW5lc2lzXSDor7fmsYLooqvmi5Lnu53vvIzlm6DkuLrmlYjmnpzmraPlnKjmiafooYzjgIInLCAnd2FybicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gU3RhdGVNYW5hZ2VyLmdldFRvcFF1ZXVlSXRlbSgpO1xuICBpZiAoIWN1cnJlbnRJdGVtKSB7XG4gICAgbG9nUHJvYmUoJ1tDb250cm9sbGVyOkdlbmVzaXNdIOivt+axguS4reatou+8muaSreaUvuWIl+ihqOS4uuepuuOAgicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgU3RhdGVNYW5hZ2VyLnNldFBlcmZvcm1pbmdFZmZlY3QodHJ1ZSk7XG4gICAgbG9nUHJvYmUoYFtDb250cm9sbGVyOkdlbmVzaXNdID09PSDigJzliJvkuJbmkq3mlL7igJ3mlYjmnpzlvIDlp4sgKOebruagh+e0ouW8lTogJHtjdXJyZW50SXRlbS5jdXJyZW50SW5kZXh9KSA9PT1gLCAnZ3JvdXAnKTtcblxuICAgIGF3YWl0IF9leGVjdXRlR2VuZXNpc1BsYXlJbnRlcm5hbChjdXJyZW50SXRlbS5jdXJyZW50SW5kZXgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpHZW5lc2lzXSDigJzliJvkuJbmkq3mlL7igJ3mlYjmnpzmiafooYzml7blj5HnlJ/mhI/lpJbpobblsYLplJnor686ICR7ZXJyb3J9YCwgJ2Vycm9yJyk7XG4gICAgU3RhdGVNYW5hZ2VyLnNldFBsYXliYWNrU3RhdGUoJ1NUT1BQRUQnKTtcbiAgICBicm9hZGNhc3RGdWxsU3RhdGUoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCBfcmVsZWFzZUVmZmVjdExvY2soKTtcbiAgICBhd2FpdCB3cml0ZVN0YXRlKCdnZW5lc2lzUGxheScpO1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpHZW5lc2lzXSA9PT0g4oCc5Yib5LiW5pKt5pS+4oCd5pWI5p6c57uT5p2fICjplIHlt7LpgJrov4fosIPluqblmajph4rmlL4pID09PWAsICdncm91cEVuZCcpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9oYW5kbGVQbGF5SW5kZXgoaW5kZXg6IG51bWJlcikge1xuICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6UGxheUluZGV4XSA9PT0g5byA5aeL5aSE55CG57Si5byV5pKt5pS+5LqL5Lu2ICjnm67moIc6ICR7aW5kZXh9KSA9PT1gLCAnZ3JvdXAnKTtcbiAgaWYgKFN0YXRlTWFuYWdlci5pc1BlcmZvcm1pbmdFZmZlY3QoKSkge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpQbGF5SW5kZXhdIOivt+axguiiq+aLkue7ne+8jOWboOS4uuaViOaenOato+WcqOaJp+ihjOOAgmAsICd3YXJuJyk7XG4gICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgU3RhdGVNYW5hZ2VyLnNldFBlcmZvcm1pbmdFZmZlY3QodHJ1ZSk7XG4gICAgYnJvYWRjYXN0RnVsbFN0YXRlKCk7XG5cbiAgICBjb25zdCBjdXJyZW50SXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgICBjb25zdCBjdXJyZW50TW9kZSA9IFN0YXRlTWFuYWdlci5nZXRQbGF5YmFja01vZGUoKTtcblxuICAgIGlmIChjdXJyZW50SXRlbSAmJiBpbmRleCA9PT0gY3VycmVudEl0ZW0uY3VycmVudEluZGV4KSB7XG4gICAgICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6UGxheUluZGV4XSAo5Yaz562WKSDnlKjmiLfngrnlh7vkuoblvZPliY3mrYzmm7LvvIzlsIbku47lpLTph43mkq3jgIJgKTtcbiAgICAgIGNvbnN0IGFjdGl2ZVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldEFjdGl2ZVBsYXllcigpO1xuICAgICAgaWYgKGFjdGl2ZVBsYXllcikgYWN0aXZlUGxheWVyLmN1cnJlbnRUaW1lID0gMDtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRNb2RlID09PSAnbGlzdCcgfHwgY3VycmVudE1vZGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6UGxheUluZGV4XSAo5Yaz562WKSAke2N1cnJlbnRNb2RlfSDmqKHlvI/vvIzmiafooYzmoIflh4bot7PovawuLi5gKTtcbiAgICAgIFN0YXRlTWFuYWdlci5zZXRDdXJyZW50SW5kZXgoaW5kZXgpO1xuICAgICAgYXdhaXQgX2V4ZWN1dGVUcmFuc2l0aW9uKGluZGV4KTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRNb2RlID09PSAncmFuZG9tJykge1xuICAgICAgbG9nUHJvYmUoYFtDb250cm9sbGVyOlBsYXlJbmRleF0gKOWGs+etlikgcmFuZG9tIOaooeW8j++8jOaJp+ihjOKAnOeUqOaIt+i3s+i9rOKAnemrmOe6p+mAu+i+kS4uLmApO1xuICAgICAgU3RhdGVNYW5hZ2VyLnVzZXJJbml0aWF0ZWRKdW1wKGluZGV4KTtcbiAgICAgIGF3YWl0IF9leGVjdXRlVHJhbnNpdGlvbihpbmRleCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpQbGF5SW5kZXhdIOWcqOaJp+ihjOaViOaenOaXtuaNleiOt+WIsOmUmeivr++8jOWwhuWQr+WKqOiHquaEiOW+queOry4uLmAsICdlcnJvcicpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGF3YWl0IF9leGVjdXRlU2VsZkhlYWxpbmdMb29wKCk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgX3JlbGVhc2VFZmZlY3RMb2NrKCk7XG4gICAgYXdhaXQgd3JpdGVTdGF0ZSgncGxheUluZGV4Jyk7XG4gICAgbG9nUHJvYmUoYFtDb250cm9sbGVyOlBsYXlJbmRleF0gPT09IOe0ouW8leaSreaUvuS6i+S7tuWkhOeQhuWujOavlSAo6ZSB5bey6YCa6L+H6LCD5bqm5Zmo6YeK5pS+KSA9PT1gLCAnZ3JvdXBFbmQnKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVQbGF5UGF1c2UoKSB7XG4gIGxvZ1Byb2JlKCdbQ29udHJvbGxlcjpUb2dnbGVdID09PSDlvIDlp4vlpITnkIbmkq3mlL4v5pqC5YGc5YiH5o2i5LqL5Lu2ICjkuInmgIHmnLrniYgpID09PScsICdncm91cCcpO1xuXG4gIC8vIDEuIOaViOaenOmUgeajgOafpVxuICBpZiAoU3RhdGVNYW5hZ2VyLmlzUGVyZm9ybWluZ0VmZmVjdCgpKSB7XG4gICAgbG9nUHJvYmUoJ1tDb250cm9sbGVyOlRvZ2dsZV0g6K+35rGC6KKr5ouS57ud77yM5Zug5Li65pWI5p6c5q2j5Zyo5omn6KGM44CCJywgJ3dhcm4nKTtcbiAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gMi4g56m66Zif5YiX5qOA5p+lXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gU3RhdGVNYW5hZ2VyLmdldFRvcFF1ZXVlSXRlbSgpO1xuICBpZiAoIWN1cnJlbnRJdGVtKSB7XG4gICAgbG9nUHJvYmUoJ1tDb250cm9sbGVyOlRvZ2dsZV0g6K+35rGC5Lit5q2i77ya5pKt5pS+5YiX6KGo5Li656m644CCJyk7XG4gICAgdG9hc3RyLmluZm8oJ+aSreaUvuWIl+ihqOS4uuepuicpO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIC8vIDMuIOS4iumUgeW5tuW5v+aSrVxuICAgIFN0YXRlTWFuYWdlci5zZXRQZXJmb3JtaW5nRWZmZWN0KHRydWUpO1xuICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuXG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gU3RhdGVNYW5hZ2VyLmdldFBsYXliYWNrU3RhdGUoKTtcbiAgICBsb2dQcm9iZShgW0NvbnRyb2xsZXI6VG9nZ2xlXSDlvZPliY3nirbmgIE6ICR7Y3VycmVudFN0YXRlfWApO1xuXG4gICAgc3dpdGNoIChjdXJyZW50U3RhdGUpIHtcbiAgICAgIGNhc2UgJ1NUT1BQRUQnOiB7XG4gICAgICAgIC8vIFvmoLjlv4NdIOi/meaYr+mmluasoeaSreaUvuaEj+WbvueahOWFs+mUrueCuVxuICAgICAgICBsb2dQcm9iZSgnW0NvbnRyb2xsZXI6VG9nZ2xlXSDlhrPnrZY6IFNUT1BQRUQgLT4gUExBWUlORyAo6KeG5Li65Yib5LiW5pKt5pS+KScpO1xuXG4gICAgICAgIFN0YXRlTWFuYWdlci5zZXRQbGF5YmFja1N0YXRlKCdQTEFZSU5HJyk7XG4gICAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuXG4gICAgICAgIC8vIOWwneivleaSreaUvuW9k+WJjemYn+mmllxuICAgICAgICAvLyDlpoLmnpzmmK/liJrliqDovb3nmoTmrYzljZXvvIxjdXJyZW50SW5kZXgg5bqU6K+l5pivIDDvvIzmiJbogIXmmK/orrDlv4bkuK3nmoTkvY3nva5cbiAgICAgICAgYXdhaXQgX2V4ZWN1dGVUcmFuc2l0aW9uKGN1cnJlbnRJdGVtLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdQTEFZSU5HJzoge1xuICAgICAgICBsb2dQcm9iZSgnW0NvbnRyb2xsZXI6VG9nZ2xlXSDlhrPnrZY6IFBMQVlJTkcgLT4gUEFVU0VEJyk7XG4gICAgICAgIFN0YXRlTWFuYWdlci5zZXRQbGF5YmFja1N0YXRlKCdQQVVTRUQnKTtcbiAgICAgICAgYnJvYWRjYXN0RnVsbFN0YXRlKCk7XG4gICAgICAgIGF3YWl0IFBsYXliYWNrRW5naW5lLmZhZGVPdXRBbmRQYXVzZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAnUEFVU0VEJzoge1xuICAgICAgICBsb2dQcm9iZSgnW0NvbnRyb2xsZXI6VG9nZ2xlXSDlhrPnrZY6IFBBVVNFRCAtPiBQTEFZSU5HICjmgaLlpI0pJyk7XG4gICAgICAgIFN0YXRlTWFuYWdlci5zZXRQbGF5YmFja1N0YXRlKCdQTEFZSU5HJyk7XG4gICAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuICAgICAgICBhd2FpdCBQbGF5YmFja0VuZ2luZS5yZXN1bWVBbmRGYWRlSW4oU3RhdGVNYW5hZ2VyLmdldFZvbHVtZSgpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGBbQ29udHJvbGxlcjpUb2dnbGVdIOWcqOaJp+ihjOaViOaenOaXtuaNleiOt+WIsOmUmeivr++8jOWwhuWQr+WKqOiHquaEiOW+queOry4uLmAsICdlcnJvcicpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGF3YWl0IF9leGVjdXRlU2VsZkhlYWxpbmdMb29wKCk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgX3JlbGVhc2VFZmZlY3RMb2NrKCk7XG4gICAgYXdhaXQgd3JpdGVTdGF0ZSgndG9nZ2xlUGxheVBhdXNlJyk7XG4gICAgbG9nUHJvYmUoJ1tDb250cm9sbGVyOlRvZ2dsZV0gPT09IOaSreaUvi/mmoLlgZzliIfmjaLkuovku7blpITnkIblrozmr5UgKOmUgeW3sumAmui/h+iwg+W6puWZqOmHiuaUvikgPT09JywgJ2dyb3VwRW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGxheU5leHQoKSB7XG4gIHZvaWQgX2hhbmRsZU5hdmlnYXRpb24oJ25leHQnKTtcbn1cblxuZnVuY3Rpb24gcGxheVByZXYoKSB7XG4gIHZvaWQgX2hhbmRsZU5hdmlnYXRpb24oJ3ByZXYnKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBHbG9iYWxBUEkoKSB7XG4gIHdpbmRvdy5tdXNpY1BsYXllckFQSSA9IHtcbiAgICByZXF1ZXN0SW5pdGlhbGl6YXRpb246ICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGlmIChpc0luaXRpYWxpemVkRm9yVGhpc0NoYXQpIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tBUEldIHJlcXVlc3RJbml0aWFsaXphdGlvbiAo5bey5a6M5oiQKTog5LiA5Liq6L+f5Yiw55qE55WM6Z2i5Y+R5p2l6K+35rGC77yM56uL5Y2z6L+U5Zue5oiQ5Yqf5aWR57qm44CCJyk7XG4gICAgICAgIGJyb2FkY2FzdEZ1bGxTdGF0ZSgpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghX2luaXRpYWxpemF0aW9uUHJvbWlzZSkge1xuICAgICAgICBsb2dQcm9iZSgnW0FQSV0gcmVxdWVzdEluaXRpYWxpemF0aW9uICjpppbmrKEpOiDnrKzkuIDkuKrnlYzpnaLor7fmsYLliLDovr7vvIzmraPlnKjliJvlu7rjgJDlhbHkuqvnmoTjgJFQcm9taXNl5aWR57qmLi4uJyk7XG4gICAgICAgIF9pbml0aWFsaXphdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgX2luaXRpYWxpemF0aW9uUHJvbWlzZUNvbnRyb2xzID0geyByZXNvbHZlLCByZWplY3QgfTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dQcm9iZSgnW0FQSV0gcmVxdWVzdEluaXRpYWxpemF0aW9uICjlkI7nu60pOiDlj4jkuIDkuKrnlYzpnaLor7fmsYLliLDovr7vvIzov5Tlm57jgJDlt7LlrZjlnKjnmoTjgJHlhbHkuqvlpZHnuqbjgIInKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9pbml0aWFsaXphdGlvblByb21pc2U7XG4gICAgfSxcblxuICAgIHRvZ2dsZVBsYXlQYXVzZTogKCkgPT4gdG9nZ2xlUGxheVBhdXNlKCksXG4gICAgcGxheU5leHQ6ICgpID0+IHBsYXlOZXh0KCksXG4gICAgcGxheVByZXY6ICgpID0+IHBsYXlQcmV2KCksXG4gICAgcGxheUluZGV4OiAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gICAgICBpZiAoY3VycmVudEl0ZW0gJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IGN1cnJlbnRJdGVtLnBsYXlsaXN0Q29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgdm9pZCBfaGFuZGxlUGxheUluZGV4KGluZGV4KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHBlcnNpc3RWb2x1bWVBbmRCcm9hZGNhc3Q6ICh2b2x1bWU6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgZmluYWxWb2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2b2x1bWUpKTtcbiAgICAgIGNvbnN0IGFjdGl2ZVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldEFjdGl2ZVBsYXllcigpO1xuICAgICAgU3RhdGVNYW5hZ2VyLnNldFZvbHVtZShmaW5hbFZvbHVtZSk7XG4gICAgICBpZiAoYWN0aXZlUGxheWVyICYmICFTdGF0ZU1hbmFnZXIuaXNQZXJmb3JtaW5nRWZmZWN0KCkpIGFjdGl2ZVBsYXllci52b2x1bWUgPSBmaW5hbFZvbHVtZTtcbiAgICAgIHZvaWQgd3JpdGVTdGF0ZSgncGVyc2lzdFZvbHVtZScpO1xuICAgICAgYnJvYWRjYXN0RnVsbFN0YXRlKCk7XG4gICAgfSxcbiAgICBzZXRMaXZlVm9sdW1lOiAodm9sdW1lOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVBsYXllciA9IFBsYXliYWNrRW5naW5lLmdldEFjdGl2ZVBsYXllcigpO1xuICAgICAgaWYgKGFjdGl2ZVBsYXllciAmJiAhU3RhdGVNYW5hZ2VyLmlzUGVyZm9ybWluZ0VmZmVjdCgpKSBhY3RpdmVQbGF5ZXIudm9sdW1lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdm9sdW1lKSk7XG4gICAgfSxcblxuICAgIHNldFBsYXliYWNrTW9kZTogKG1vZGU6IFBsYXliYWNrTW9kZSkgPT4ge1xuICAgICAgbG9nUHJvYmUoYD09PSDlvIDlp4vmiafooYzjgJDmqKHlvI/liIfmjaLjgJHkuovliqEgKOivt+axgjogJHttb2RlfSkgPT09YCwgJ2dyb3VwJyk7XG4gICAgICBjb25zdCBvbGRNb2RlID0gU3RhdGVNYW5hZ2VyLmdldFBsYXliYWNrTW9kZSgpO1xuICAgICAgaWYgKG1vZGUgPT09IG9sZE1vZGUpIHtcbiAgICAgICAgbG9nUHJvYmUoYFtNb2RlU3dpdGNoXSDmqKHlvI/mnKrlj5jmm7QgKOS7jeS4uiAke21vZGV9Ke+8jOS6i+WKoeaPkOWJjeS4reatouOAgmApO1xuICAgICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgU3RhdGVNYW5hZ2VyLnNldFBsYXliYWNrTW9kZShtb2RlKTtcbiAgICAgIFN0cmF0ZWd5TWFuYWdlci5zZXRNb2RlKG1vZGUpO1xuXG4gICAgICBsb2dQcm9iZShgW01vZGVTd2l0Y2hdIOetlueVpeW3suWIh+aNouS4ujogJHtTdHJhdGVneU1hbmFnZXIuZ2V0Q3VycmVudFN0cmF0ZWd5KCkuY29uc3RydWN0b3IubmFtZX1gKTtcblxuICAgICAgaWYgKG9sZE1vZGUgPT09ICdyYW5kb20nKSB7XG4gICAgICAgIGxvZ1Byb2JlKCdbTW9kZVN3aXRjaF0g5q2j5Zyo5Li65pen5qih5byPIFwicmFuZG9tXCIg5omn6KGM4oCc56a75byA4oCd55Sf5ZG95ZGo5pyf6ZKp5a2QLi4uJyk7XG4gICAgICAgIFN0YXRlTWFuYWdlci5jbGVhclJhbmRvbU1vZGVQbGFuKCk7XG4gICAgICB9XG4gICAgICBpZiAobW9kZSA9PT0gJ3JhbmRvbScpIHtcbiAgICAgICAgbG9nUHJvYmUoJ1tNb2RlU3dpdGNoXSDmraPlnKjkuLrmlrDmqKHlvI8gXCJyYW5kb21cIiDmiafooYzigJzov5vlhaXigJ3nlJ/lkb3lkajmnJ/pkqnlrZAuLi4nKTtcbiAgICAgICAgU3RyYXRlZ3lNYW5hZ2VyLm5vdGlmeVF1ZXVlQ2hhbmdlZCgpO1xuICAgICAgfVxuXG4gICAgICB2b2lkIHdyaXRlU3RhdGUoJ3NldFBsYXliYWNrTW9kZScpO1xuICAgICAgYnJvYWRjYXN0RnVsbFN0YXRlKCk7XG4gICAgICBsb2dQcm9iZSgnPT09IOOAkOaooeW8j+WIh+aNouOAkeS6i+WKoeaJp+ihjOWujOavlSA9PT0nLCAnZ3JvdXBFbmQnKTtcbiAgICB9LFxuICAgIHNlZWtUbzogKHBlcmNlbnRhZ2U6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgYWN0aXZlUGxheWVyID0gUGxheWJhY2tFbmdpbmUuZ2V0QWN0aXZlUGxheWVyKCk7XG4gICAgICBpZiAoYWN0aXZlUGxheWVyPy5kdXJhdGlvbikgYWN0aXZlUGxheWVyLmN1cnJlbnRUaW1lID0gYWN0aXZlUGxheWVyLmR1cmF0aW9uICogcGVyY2VudGFnZTtcbiAgICB9LFxuICAgIGdldEN1cnJlbnRTdGF0ZTogKCk6IEZ1bGxTdGF0ZVBheWxvYWQgPT4ge1xuICAgICAgY29uc3QgaSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgICAgIGNvbnN0IGMgPSBpPy5wbGF5bGlzdENvbnRlbnQgPz8gW107XG4gICAgICBjb25zdCB4ID0gaT8uY3VycmVudEluZGV4ID8/IDA7XG4gICAgICBjb25zdCBzdGF0ZVRvUmV0dXJuOiBGdWxsU3RhdGVQYXlsb2FkID0ge1xuICAgICAgICBjdXJyZW50SXRlbTogY1t4XSA/IHsgdGl0bGU6IGNbeF0u5q2M5ZCNLCBhcnRpc3Q6IGNbeF0u5q2M5omLLCBjb3ZlcjogY1t4XS7lsIHpnaIgfSA6IG51bGwsXG4gICAgICAgIGlzUGxheWluZzogU3RhdGVNYW5hZ2VyLmlzUGxheWluZygpLFxuICAgICAgICBwbGF5YmFja1N0YXRlOiBTdGF0ZU1hbmFnZXIuZ2V0UGxheWJhY2tTdGF0ZSgpLFxuICAgICAgICBwbGF5YmFja01vZGU6IFN0YXRlTWFuYWdlci5nZXRQbGF5YmFja01vZGUoKSxcbiAgICAgICAgbWFzdGVyVm9sdW1lOiBTdGF0ZU1hbmFnZXIuZ2V0Vm9sdW1lKCksXG4gICAgICAgIHBsYXlsaXN0OiBjLm1hcCh0ID0+ICh7IHRpdGxlOiB0LuatjOWQjSwgYXJ0aXN0OiB0LuatjOaJiywgY292ZXI6IHQu5bCB6Z2iIH0pKSxcbiAgICAgICAgaXNUcmFuc2l0aW9uaW5nOiBTdGF0ZU1hbmFnZXIuaXNQZXJmb3JtaW5nRWZmZWN0KCksXG4gICAgICB9O1xuICAgICAgbG9nUHJvYmUoJ1vmjqLpkoggQl0g5YmN56uv5Li75Yqo6LCD55SoIGdldEN1cnJlbnRTdGF0ZSDojrflj5bliJ3lp4vnirbmgIHvvIzlkI7lj7Dov5Tlm57nmoTmlbDmja7lpoLkuIs6JywgJ3dhcm4nKTtcbiAgICAgIGNvbnNvbGUuZGlyKHN0YXRlVG9SZXR1cm4pO1xuICAgICAgcmV0dXJuIHN0YXRlVG9SZXR1cm47XG4gICAgfSxcblxuICAgIG9uRnVsbFN0YXRlVXBkYXRlOiAoYzogKHBheWxvYWQ6IEZ1bGxTdGF0ZVBheWxvYWQpID0+IHZvaWQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBmdWxsU3RhdGVVcGRhdGVDYWxsYmFja3MucHVzaChjKTtcbiAgICAgICAgbG9nUHJvYmUoYFtBUEldIOWJjeerr+azqOWGjOS6hiBmdWxsU3RhdGVVcGRhdGUg55uR5ZCs5Zmo44CC5b2T5YmN55uR5ZCs5pWwOiAke2Z1bGxTdGF0ZVVwZGF0ZUNhbGxiYWNrcy5sZW5ndGh9YCk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IGZ1bGxTdGF0ZVVwZGF0ZUNhbGxiYWNrcy5pbmRleE9mKGMpO1xuICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBmdWxsU3RhdGVVcGRhdGVDYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGxvZ1Byb2JlKGBbQVBJXSDliY3nq6/ms6jplIDkuoYgZnVsbFN0YXRlVXBkYXRlIOebkeWQrOWZqOOAguWJqeS9meebkeWQrOaVsDogJHtmdWxsU3RhdGVVcGRhdGVDYWxsYmFja3MubGVuZ3RofWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICgpID0+IHt9O1xuICAgIH0sXG5cbiAgICBvblRpbWVVcGRhdGU6IChjOiAocGF5bG9hZDogVGltZVVwZGF0ZVBheWxvYWQpID0+IHZvaWQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aW1lVXBkYXRlQ2FsbGJhY2tzLnB1c2goYyk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRpbWVVcGRhdGVDYWxsYmFja3MuaW5kZXhPZihjKTtcbiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGltZVVwZGF0ZUNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKSA9PiB7fTtcbiAgICB9LFxuICB9O1xuICBpbml0aWFsaXplR2xvYmFsKCdtdXNpY1BsYXllckFQSScsIHdpbmRvdy5tdXNpY1BsYXllckFQSSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyA5LiDphZLppobpm4bmiJDkuI7kuLvmiafooYzljLogKFRhdmVybiBJbnRlZ3JhdGlvbiAmIE1haW4gRXhlY3V0aW9uKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZnVuY3Rpb24gZXhlY3V0ZUhhcmRSZXNldCgpIHtcbiAgbG9nUHJvYmUoJ1tIYXJkUmVzZXRdIOKAnOS8mOmbheWBnOacuuKAneWNj+iuruWQr+WKqC4uLicsICd3YXJuJyk7XG5cbiAgaXNTY3JpcHRBY3RpdmUgPSBmYWxzZTtcblxuICBQbGF5YmFja0VuZ2luZS5nZXRBY3RpdmVQbGF5ZXIoKT8ucGF1c2UoKTtcbiAgbG9nUHJvYmUoJ1tIYXJkUmVzZXRdIOmfs+mikeW3suaaguWBnOOAgicpO1xuXG4gIGxvZ1Byb2JlKCdbSGFyZFJlc2V0XSDljbPlsIbosIPnlKggcmVsb2FkSWZyYW1lKCnjgIInKTtcbiAgcmVsb2FkSWZyYW1lKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHRyeUluaXRpYWxpemUoKSB7XG4gIGlmIChpc0luaXRpYWxpemVkRm9yVGhpc0NoYXQpIHJldHVybjtcblxuICBjb25zdCBjdXJyZW50Q2hhdElkID0gU2lsbHlUYXZlcm4uZ2V0Q3VycmVudENoYXRJZCA/IFNpbGx5VGF2ZXJuLmdldEN1cnJlbnRDaGF0SWQoKSA6IG51bGw7XG5cbiAgaWYgKFNpbGx5VGF2ZXJuLmNoYXQubGVuZ3RoID4gMCAmJiBjdXJyZW50Q2hhdElkICE9PSBudWxsKSB7XG4gICAgLy8gW+WOn+WImTogU1JQXSBpc0luaXRpYWxpemVkRm9yVGhpc0NoYXQg5qCH5b+X546w5Zyo5piv6L+Z5Liq5Ye95pWw55qE4oCc5a6I5Y2r4oCd77yM56Gu5L+d5Yid5aeL5YyW5Y+q5omn6KGM5LiA5qyh44CCXG4gICAgaXNJbml0aWFsaXplZEZvclRoaXNDaGF0ID0gdHJ1ZTtcbiAgICBfY3VycmVudENoYXRJZCA9IGN1cnJlbnRDaGF0SWQ7XG5cbiAgICBsb2dQcm9iZShg44CQ5Yid5aeL5YyW5oyH5oyl5a6YIFY5LjjjgJHplIHlrppJRDogJHtfY3VycmVudENoYXRJZH3vvIzlvIDlp4vmiafooYzigJzliIbmtYEt562J5b6FLeaJp+ihjOKAneWNj+iuri4uLmAsICdncm91cCcpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIC0tLSDmraXpqqTkuIDvvJrmo4DmtYsgKERldGVjdCkgLS0tXG4gICAgICAvLyBb5Y6f5YiZOiBTU29UXSDliJ3lp4vljJbmtYHnqIvnmoTnrKzkuIDkuKrliqjkvZzvvIzlsLHmmK/ojrflj5bigJzkuJbnlYzkuabigJ3ov5nkuKrllK/kuIDkuovlrp7mnaXmupDjgIJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHBhcnNlV29ybGRib29rQ29uZmlnKCk7XG4gICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOazleino+aekOS4lueVjOS5pumFjee9ru+8jOWIneWni+WMluS4reatouOAgicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc012dUNhcmQgPSBjb25maWcudHJpZ2dlcnMgJiYgQXJyYXkuaXNBcnJheShjb25maWcudHJpZ2dlcnMpICYmIGNvbmZpZy50cmlnZ2Vycy5sZW5ndGggPiAwO1xuICAgICAgbG9nUHJvYmUoYCjmjqLpkogt5Yaz562WKSDkvZzogIXmhI/lm77liKTmlq0gLT4g5pivTVZV5Y2h5ZCXPyAke2lzTXZ1Q2FyZH1gKTtcblxuICAgICAgLy8gLS0tIOatpemqpOS6jO+8muWIhua1gSAoQnJhbmNoKSAmIOetieW+hSAoV2FpdCkgLS0tXG4gICAgICBpZiAoaXNNdnVDYXJkKSB7XG4gICAgICAgIGxvZ1Byb2JlKCfjgJDmjIfmjKXlrpjjgJEo6Lev5b6E6YCJ5oupKSDmo4DmtYvliLBNVlXljaHvvIzov5vlhaXigJzlronlhajot6/lvoTigJ3vvIzlvIDlp4vnrYnlvoVNVlXlsLHnu6ouLi4nKTtcbiAgICAgICAgLy8gW+WOn+WImTogQ1FTXSBfd2FpdEZvck12dUdlbmVzaXMg5piv5LiA5Liq4oCc5p+l6K+i4oCd77yM5a6D6K+i6Zeu5aSW6YOo546v5aKD54q25oCB77yM55u05Yiw5ruh6Laz5p2h5Lu244CCXG4gICAgICAgIGNvbnN0IG12dUlzUmVhZHkgPSBhd2FpdCBfd2FpdEZvck12dUdlbmVzaXMoKTtcbiAgICAgICAgaWYgKCFtdnVJc1JlYWR5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNVlXpm4bmiJDliJ3lp4vljJblpLHotKXmiJbotoXml7bvvIzpg6jliIblip/og73lsIbkuI3lj6/nlKjjgIInKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dQcm9iZSgn44CQ5oyH5oyl5a6Y44CRTVZV5bey5a6M5YWo5bCx57uq77yM5Y+v5Lul5a6J5YWo57un57ut44CCJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dQcm9iZSgn44CQ5oyH5oyl5a6Y44CRKOi3r+W+hOmAieaLqSkg5qOA5rWL5Yiw57qv5paH5a2X5Y2h77yM6L+b5YWl4oCc5b+r6YCf6Lev5b6E4oCd44CCJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIC0tLSDmraXpqqTkuInvvJrmiafooYwgKEV4ZWN1dGUpIC0tLVxuICAgICAgbG9nUHJvYmUoJ+OAkOaMh+aMpeWumOOAkeaJgOacieWJjee9ruadoeS7tua7oei2s++8jOW8gOWni+aJp+ihjOaSreaUvuWZqOaguOW/g+WIneWni+WMli4uLicpO1xuXG4gICAgICBsZXQgYXV0aG9yaXRhdGl2ZVN0YXRlID0gbnVsbDtcbiAgICAgIGlmIChpc012dUNhcmQpIHtcbiAgICAgICAgbG9nUHJvYmUoJ+OAkOaMh+aMpeWumOOAkSjmn6Xor6IpIOato+WcqOS4uk1WVeWNoeafpeaJvuadg+WogeeKtuaAgS4uLicpO1xuICAgICAgICBhdXRob3JpdGF0aXZlU3RhdGUgPSBhd2FpdCBfZmluZExhdGVzdEF1dGhvcml0YXRpdmVNdnVTdGF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nUHJvYmUoJ+OAkOaMh+aMpeWumOOAkSjot7Pov4cpIOe6r+aWh+Wtl+WNoe+8jOaXoOmcgOafpeaJvk1WVeeKtuaAgeOAgicpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBpbml0aWFsaXplUGxheWVyRm9yQ2hhdChjb25maWcsIGF1dGhvcml0YXRpdmVTdGF0ZSk7XG5cbiAgICAgIF9yZWdpc3RlckNvbnRleHR1YWxFdmVudExpc3RlbmVycygpO1xuXG4gICAgICBpZiAoX2luaXRpYWxpemF0aW9uUHJvbWlzZUNvbnRyb2xzKSB7XG4gICAgICAgIGxvZ1Byb2JlKCfjgJDmjIfmjKXlrpjjgJEo5o6i6ZKIKSDlkI7lj7DliJ3lp4vljJbmiJDlip/vvIzlhZHnjrAgUHJvbWlzZSDlpZHnuqbvvIzllKTphpLliY3nq6/jgIInKTtcbiAgICAgICAgX2luaXRpYWxpemF0aW9uUHJvbWlzZUNvbnRyb2xzLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nUHJvYmUoYOOAkOaMh+aMpeWumOOAkeWcqOWIneWni+WMluS4u+a1geeoi+S4reWPkeeUn+S4pemHjemUmeivrzogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICAgIC8vIOWmguaenOWPkeeUn+S7u+S9lemUmeivr++8jOmDveimgemAmuefpeWJjeerr++8jOiuqeWug+aYvuekuumUmeivr+S/oeaBr1xuICAgICAgaWYgKF9pbml0aWFsaXphdGlvblByb21pc2VDb250cm9scykge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICAgIF9pbml0aWFsaXphdGlvblByb21pc2VDb250cm9scy5yZWplY3QoZXJyb3JNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgX2luaXRpYWxpemF0aW9uUHJvbWlzZUNvbnRyb2xzID0gbnVsbDtcbiAgICAgIGxvZ1Byb2JlKCfjgJDliJ3lp4vljJbmjIfmjKXlrpggVjkuOOOAkeWNj+iuruaJp+ihjOWujOavleOAgicsICdncm91cEVuZCcpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVnaXN0ZXJNdnVFdmVudExpc3RlbmVycygpIHtcbiAgbG9nUHJvYmUoJ1tFdmVudERpc3BhdGNoZXJdIOato+WcqOazqOWGjOOAkOi/kOihjOaXtuOAkU1WVSDkuovku7bnm5HlkKzlmaguLi4nKTtcblxuICBjb25zdCBjcmVhdGVSZWNvbmNpbGVIYW5kbGVyID0gKGV2ZW50TmFtZTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIChldmVudFBheWxvYWQ/OiBhbnkpID0+IHtcbiAgICAgIGlmICghaXNNdnVJbnRlZ3JhdGlvbkFjdGl2ZSB8fCAhaXNDb3JlUGxheWVySW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgbG9nUHJvYmUoYFtHYXRla2VlcGVyXSDmjZXojrfliLBNVlXkuovku7YgKCR7ZXZlbnROYW1lfSnvvIzkvYbns7vnu5/mnKrlsLHnu6rvvIzlt7Llv73nlaXjgIJgLCAnd2FybicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsb2dQcm9iZShgW0V2ZW50XSDmjZXojrfliLBNVlXkuovku7Y6ICR7ZXZlbnROYW1lfe+8jOWNs+WwhuWUpOmGkuagoeWHhuWumC4uLmApO1xuICAgICAgLy8gKFNTb1Tljp/liJkpIOWwhuS6i+S7tui9veiNt+i/meS4quKAnOS6i+WunuKAneebtOaOpeS8oOmAkue7meagoeWHhuWumFxuICAgICAgdm9pZCBfcmVjb25jaWxlUGxheWxpc3RRdWV1ZShldmVudFBheWxvYWQpO1xuICAgIH07XG4gIH07XG5cbiAgZXZlbnRPbihNdnUuZXZlbnRzLlZBUklBQkxFX1VQREFURV9FTkRFRCwgY3JlYXRlUmVjb25jaWxlSGFuZGxlcignVkFSSUFCTEVfVVBEQVRFX0VOREVEJykpO1xuICBldmVudE9uKHRhdmVybl9ldmVudHMuTUVTU0FHRV9ERUxFVEVELCBjcmVhdGVSZWNvbmNpbGVIYW5kbGVyKCdNRVNTQUdFX0RFTEVURUQnKSk7XG5cbiAgbG9nUHJvYmUoJ1tFdmVudERpc3BhdGNoZXJdIE1WVeebkeWQrOWZqOmDqOe9suWujOavleOAgicpO1xufVxuXG4vKipcbiAqIFtWOS4xIOaguOW/g+WkhOeQhuWZqF0g57uf5LiA5aSE55CG5omA5pyJ5a+86Ie04oCc6L+Q6KGM5pe25Y6G5Y+y4oCd5Y+Y5pu055qE5LqL5Lu244CCXG4gKiDogYzotKPvvJrph43mlrDmn6Xmib7mnYPlqIHnirbmgIHvvIznhLblkI7osIPnlKjmoKHlh4blrpjov5vooYznirbmgIHlkIzmraXjgIJcbiAqIEBwYXJhbSBldmVudE5hbWUgLSDop6blj5HmraTlpITnkIblmajnmoTkuovku7blkI3vvIznlKjkuo7ml6Xlv5forrDlvZXjgIJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gX2hhbmRsZUhpc3RvcnlDaGFuZ2VFdmVudChldmVudE5hbWU6IHN0cmluZywgb3B0aW9ucz86IHsgdHJhbnNpdGlvbkVmZmVjdD86ICdoYXJkJyB8ICdzbW9vdGgnIH0pIHtcbiAgbG9nUHJvYmUoYFtIaXN0b3J5Q2hhbmdlXSDmo4DmtYvliLDljoblj7Llj5jmm7Tkuovku7Y6ICR7ZXZlbnROYW1lfeOAgmApO1xuICBpZiAoIWlzQ29yZVBsYXllckluaXRpYWxpemVkKSByZXR1cm47XG5cbiAgaWYgKHRyaWdnZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIGxvZ1Byb2JlKCdbSGlzdG9yeUNoYW5nZV0gKOWIhua1gSkg5qOA5rWL5Yiw57qv5paH5a2X5qih5byPICjml6Dop6blj5Hlmagp77yM6Lez6L+HTVZV54q25oCB5p+l6K+i5LiO5qCh5YeG77yM55u05o6l5omn6KGMIFVJIOajgOafpeOAgicpO1xuICAgIGF3YWl0IF9lbnN1cmVVaVZpc2liaWxpdHkoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb2dQcm9iZShgW0hpc3RvcnlDaGFuZ2UtUHJvYmVdIOato+WcqOafpeivouacgOaWsOeahOadg+WogU1WVeeKtuaAgS4uLmApO1xuICBjb25zdCBhdXRob3JpdGF0aXZlU3RhdGUgPSBhd2FpdCBfZmluZExhdGVzdEF1dGhvcml0YXRpdmVNdnVTdGF0ZSgpO1xuXG4gIGlmICghYXV0aG9yaXRhdGl2ZVN0YXRlPy5tdnVEYXRhKSB7XG4gICAgbG9nUHJvYmUoJ1tIaXN0b3J5Q2hhbmdlXSAo5a6I6Zeo5ZGYKSDmnKrmib7liLDmnInmlYjnmoTmnYPlqIHnirbmgIHjgILov5nlnKhBSemHjeaWsOeUn+aIkOacn+mXtOaYr+ato+W4uOeOsOixoeOAgicsICd3YXJuJyk7XG4gICAgbG9nUHJvYmUoJ1tIaXN0b3J5Q2hhbmdlXSAo5a6I6Zeo5ZGYKSDph4flj5bigJzpnZnpu5jnrYnlvoXigJ3nrZbnlaXvvIzmnKzmrKHmoKHlh4blt7Lot7Pov4fjgIInKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zb2xlLmxvZyhgW0hpc3RvcnlDaGFuZ2UtUHJvYmVdIOafpeivouWujOavle+8jOi/meaYr+aJvuWIsOeahOadg+WogeeKtuaAgeaVsOaNru+8jOivt+aCqOWuoeafpe+8mmApO1xuICBjb25zb2xlLmRpcihfLmNsb25lRGVlcChhdXRob3JpdGF0aXZlU3RhdGU/Lm12dURhdGEpKTtcblxuICBhd2FpdCBfcmVjb25jaWxlUGxheWxpc3RRdWV1ZShhdXRob3JpdGF0aXZlU3RhdGU/Lm12dURhdGEsIG9wdGlvbnMpO1xuXG4gIGF3YWl0IF9lbnN1cmVVaVZpc2liaWxpdHkoKTtcbn1cblxuLyoqXG4gKiBbVjkuOSDmoLjlv4Pkv67mraNdIOWkhOeQhuaWsEFJ5raI5oGv5riy5p+T5LqL5Lu255qE5LiT55So5aSE55CG5Zmo44CCXG4gKiDlroPnmoTogYzotKPmmK/mo4Dmn6Xlubbnq4vljbPms6jlhaUgPHBsYXltdXNpYy8+IOagh+etvu+8jOS7peS/ruWkjeWIt+aWsOernuaAgeadoeS7tkJVR+OAglxuICogKFNSUDogU2luZ2xlIFJlc3BvbnNpYmlsaXR5IFByaW5jaXBsZSlcbiAqIEBwYXJhbSBtZXNzYWdlSWQgLSDnlLHkuovku7bkvKDmnaXnmoTmtojmga9JROOAglxuICovXG5hc3luYyBmdW5jdGlvbiBfaGFuZGxlTmV3QXNzaXN0YW50TWVzc2FnZShtZXNzYWdlSWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBsb2dQcm9iZShgW0luamVjdG9yXSDmjZXojrfliLAgQ0hBUkFDVEVSX01FU1NBR0VfUkVOREVSRUQg5LqL5Lu277yMbWVzc2FnZV9pZDogJHttZXNzYWdlSWR9YCk7XG5cbiAgaWYgKG1lc3NhZ2VJZCA9PT0gMCkge1xuICAgIGxvZ1Byb2JlKGBbSW5qZWN0b3JdICjmjqLpkogpIOaTjeS9nOS4reatou+8mm1lc3NhZ2VfaWQg5Li6IDAgKOW8gOWcuueZvSnvvIzmnYPpmZDlsZ7kuo7kvZzogIXvvIzml6DpnIDms6jlhaXjgIJgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB0b3BRdWV1ZUl0ZW0gPSBTdGF0ZU1hbmFnZXIuZ2V0VG9wUXVldWVJdGVtKCk7XG4gIGlmICghdG9wUXVldWVJdGVtKSB7XG4gICAgbG9nUHJvYmUoYFtJbmplY3Rvcl0gKOWuiOmXqOWRmCkg5ouS57ud5rOo5YWl77ya5b2T5YmN5pKt5pS+6Zif5YiX5Li656m644CCYCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKG1lc3NhZ2VJZCk/LlswXTtcblxuICAgIGlmIChtZXNzYWdlICYmIG1lc3NhZ2Uucm9sZSAhPT0gJ3VzZXInICYmICFtZXNzYWdlLm1lc3NhZ2UuaW5jbHVkZXMoJzxEYXJrQnJhbWJsZVBsYXllci8+JykpIHtcbiAgICAgIGxvZ1Byb2JlKGBbSW5qZWN0b3JdICjmjqLpkogpIOadoeS7tua7oei2s++8jOeri+WNs+S4uiBtZXNzYWdlX2lkOiAke21lc3NhZ2VJZH0g5omn6KGM5rOo5YWlLi4uYCk7XG5cbiAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhbeyBtZXNzYWdlX2lkOiBtZXNzYWdlSWQsIG1lc3NhZ2U6IGAke21lc3NhZ2UubWVzc2FnZX1cXG48RGFya0JyYW1ibGVQbGF5ZXIvPmAgfV0pO1xuXG4gICAgICBsb2dQcm9iZShgW0luamVjdG9yXSAo5o6i6ZKIKSDms6jlhaXmiJDlip/jgIJgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nUHJvYmUoYFtJbmplY3Rvcl0gKOaOoumSiCkg5pON5L2c6Lez6L+H77ya5raI5oGv5piv55So5oi35Y+R6YCB55qE77yM5oiW5bey5YyF5ZCr5qCH562+44CCUm9sZTogJHttZXNzYWdlPy5yb2xlfWApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dQcm9iZShgW0luamVjdG9yXSDkuLogbWVzc2FnZV9pZDogJHttZXNzYWdlSWR9IOazqOWFpeagh+etvuaXtuWPkeeUn+S4pemHjemUmeivrzpgLCAnZXJyb3InKTtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIFtWOS45NSDmlrDlop5dIFVJIOWPr+ingeaAp+WNq+Wjq+OAglxuICog6IGM6LSj77ya5ZyoIE1WVSDlu7bov5/liqDovb3miJbmtojmga/liKDpmaTlkI7vvIznoa7kv53lpoLmnpzpn7PkuZDlnKjmkq3mlL7vvIznlYzpnaLkuIDlrprlrZjlnKjjgIJcbiAqIOWOn+WIme+8mlNTb1QgKOS7pemYn+WIl+eKtuaAgeS4uuWHhiksIOmygeajkuaApyAo6KGl5pWR57y65aSx55qEIFVJKVxuICovXG5hc3luYyBmdW5jdGlvbiBfZW5zdXJlVWlWaXNpYmlsaXR5KCkge1xuICBsb2dQcm9iZSgnW1VpR3VhcmRdIOato+WcqOajgOafpeeVjOmdouS4gOiHtOaApy4uLicsICdncm91cENvbGxhcHNlZCcpO1xuXG4gIGNvbnN0IHRvcFF1ZXVlSXRlbSA9IFN0YXRlTWFuYWdlci5nZXRUb3BRdWV1ZUl0ZW0oKTtcbiAgaWYgKCF0b3BRdWV1ZUl0ZW0pIHtcbiAgICBsb2dQcm9iZSgnW1VpR3VhcmRdIOmYn+WIl+S4uuepuu+8jOaXoOmcgCBVSeOAgicpO1xuICAgIGxvZ1Byb2JlKCcnLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGxhdGVzdE1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKTtcbiAgICBpZiAoIWxhdGVzdE1lc3NhZ2VzIHx8IGxhdGVzdE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbG9nUHJvYmUoJ1tVaUd1YXJkXSDml6Dms5Xojrflj5bmnIDmlrDmtojmga/vvIzmo4Dmn6XkuK3mraLjgIInLCAnd2FybicpO1xuICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsYXRlc3RNc2dPYmogPSBsYXRlc3RNZXNzYWdlc1swXTtcblxuICAgIGlmIChsYXRlc3RNc2dPYmoubWVzc2FnZV9pZCA9PT0gMCkge1xuICAgICAgbG9nUHJvYmUoJ1tVaUd1YXJkXSDmnIDmlrDmtojmga/mmK/lvIDlnLrnmb0gKG1lc3NhZ2VfaWQ6IDAp77yM5ouS57ud5omn6KGM6KGl5pWR5rOo5YWl44CCJyk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGxhdGVzdE1zZ09iai5yb2xlID09PSAndXNlcicpIHtcbiAgICAgIGxvZ1Byb2JlKCdbVWlHdWFyZF0g5pyA5paw5raI5oGv5piv55So5oi35Y+R6KiA77yM5ouS57ud5omn6KGM6KGl5pWR5rOo5YWl44CCJyk7XG4gICAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGxhdGVzdE1zZ09iai5tZXNzYWdlICYmIGxhdGVzdE1zZ09iai5tZXNzYWdlLmluY2x1ZGVzKCc8RGFya0JyYW1ibGVQbGF5ZXIvPicpKSB7XG4gICAgICBsb2dQcm9iZSgnW1VpR3VhcmRdIOacgOaWsOa2iOaBr+W3suacieaSreaUvuWZqOagh+etvu+8jOaXoOmcgOaTjeS9nOOAgicpO1xuICAgICAgbG9nUHJvYmUoJycsICdncm91cEVuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGxhdGVzdE1zZ09iai5tZXNzYWdlX2lkO1xuICAgIGxvZ1Byb2JlKFxuICAgICAgYFtVaUd1YXJkXSDlj5HnjrDpn7PkuZDmraPlnKjmkq3mlL7kvYYgVUkg57y65aSx77yM5q2j5Zyo5Li6IG1lc3NhZ2VfaWQ6ICR7bWVzc2FnZUlkfSAoJHtsYXRlc3RNc2dPYmoucm9sZX0pIOaJp+ihjOihpeaVkeazqOWFpS4uLmAsXG4gICAgKTtcblxuICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBgJHtsYXRlc3RNc2dPYmoubWVzc2FnZX1cXG48RGFya0JyYW1ibGVQbGF5ZXIvPmA7XG5cbiAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoW1xuICAgICAge1xuICAgICAgICBtZXNzYWdlX2lkOiBtZXNzYWdlSWQsXG4gICAgICAgIG1lc3NhZ2U6IG5ld0NvbnRlbnQsXG4gICAgICB9LFxuICAgIF0pO1xuXG4gICAgbG9nUHJvYmUoJ1tVaUd1YXJkXSDooaXmlZHms6jlhaXmiJDlip/jgIInKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dQcm9iZShgW1VpR3VhcmRdIOaJp+ihjOihpeaVkeazqOWFpeaXtuWPkeeUn+mUmeivrzogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBsb2dQcm9iZSgnJywgJ2dyb3VwRW5kJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBbVjkuMCDmoLjlv4NdIOaJp+ihjOS4gOasoeKAnOi9r+mHjee9ruKAneOAglxuICog6L+Z5bCG5Zyo5LiN5Yi35paw5pW05Liq6aG16Z2i55qE5oOF5Ya15LiL77yM6YeN5paw5omn6KGM5a6M5pW055qE5Yid5aeL5YyW5rWB56iL44CCXG4gKiDnlKjkuo7lk43lupTigJzlvIDlnLrnmb3mu5HliqjigJ3nrYnmoLnmnKzmgKfnmoTkuIrkuIvmloflj5jmm7TjgIJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gX2V4ZWN1dGVTb2Z0UmVzZXQob3B0aW9ucz86IHsgYXV0b1BsYXlJZldhc1BsYXlpbmc/OiBib29sZWFuIH0pIHtcbiAgbG9nUHJvYmUoJ1tTb2Z0UmVzZXRdIOajgOa1i+WIsOagueacrOaAp+S4iuS4i+aWh+WPmOabtO+8jOWQr+WKqOKAnOi9r+mHjee9ruKAneWNj+iuri4uLicsICd3YXJuJyk7XG4gIHRyeSB7XG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgcGFyc2VXb3JsZGJvb2tDb25maWcoKTtcblxuICAgIGxvZ1Byb2JlKCdbU29mdFJlc2V0XSDmraPlnKjkuLrmlrDnmoTlvIDlnLrnmb3mn6Xmib7mnYPlqIFNVlXnirbmgIEuLi4nKTtcbiAgICBjb25zdCBhdXRob3JpdGF0aXZlU3RhdGUgPSBhd2FpdCBfZmluZExhdGVzdEF1dGhvcml0YXRpdmVNdnVTdGF0ZSgpO1xuXG4gICAgYXdhaXQgaW5pdGlhbGl6ZVBsYXllckZvckNoYXQoY29uZmlnLCBhdXRob3JpdGF0aXZlU3RhdGUsIG9wdGlvbnMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKCdbU29mdFJlc2V0XSDova/ph43nva7ov4fnqIvkuK3lj5HnlJ/kuKXph43plJnor6/jgIInLCAnZXJyb3InKTtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb250ZXh0dWFsRXZlbnRMaXN0ZW5lcnMoKSB7XG4gIGxvZ1Byb2JlKCdbRXZlbnREaXNwYXRjaGVyXSDmraPlnKjms6jlhozigJzkuIrkuIvmlofkuJPlsZ7igJ3kuovku7bnm5HlkKzlmaguLi4nKTtcblxuICBldmVudE9uKHRhdmVybl9ldmVudHMuQ0hBUkFDVEVSX01FU1NBR0VfUkVOREVSRUQsIChpZDogbnVtYmVyKSA9PiB7XG4gICAgdm9pZCBfaGFuZGxlTmV3QXNzaXN0YW50TWVzc2FnZShpZCk7XG4gIH0pO1xuXG4gIGV2ZW50T24odGF2ZXJuX2V2ZW50cy5NRVNTQUdFX1NXSVBFRCwgKGlkOiBudW1iZXIpID0+IHtcbiAgICBsb2dQcm9iZShgW0V2ZW50XSDmjZXojrfliLDmu5Hliqjkuovku7YgKG1lc3NhZ2VfaWQ6ICR7aWR9KeOAgmApO1xuICAgIGlmICghaXNDb3JlUGxheWVySW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgIGlmIChpZCA9PT0gMCkge1xuICAgICAgbG9nUHJvYmUoJ1tFdmVudC1Td2lwZV0g5Yik5pat5Li65byA5Zy655m95ruR5Yqo77yM5omn6KGM6L2v6YeN572uLi4uJyk7XG4gICAgICBjb25zdCB3YXNQbGF5aW5nID0gU3RhdGVNYW5hZ2VyLmlzUGxheWluZygpO1xuICAgICAgbG9nUHJvYmUoYFtFdmVudC1Td2lwZV0gKOaOoumSiCkg6L2v6YeN572u5YmN55qE5pKt5pS+54q25oCBOiAke3dhc1BsYXlpbmd9YCk7XG4gICAgICB2b2lkIF9leGVjdXRlU29mdFJlc2V0KHsgYXV0b1BsYXlJZldhc1BsYXlpbmc6IHdhc1BsYXlpbmcgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ1Byb2JlKCdbRXZlbnQtU3dpcGVdIOWIpOaWreS4uuWOhuWPsua2iOaBr+a7keWKqO+8jOaJp+ihjOWOhuWPsuWPmOabtOWkhOeQhi4uLicpO1xuICAgICAgdm9pZCBfaGFuZGxlSGlzdG9yeUNoYW5nZUV2ZW50KCdNRVNTQUdFX1NXSVBFRCcsIHsgdHJhbnNpdGlvbkVmZmVjdDogJ2hhcmQnIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgbG9nUHJvYmUoJ1tFdmVudERpc3BhdGNoZXJdIOKAnOS4iuS4i+aWh+S4k+WxnuKAneS6i+S7tuebkeWQrOWZqOazqOWGjOWujOavleOAgicpO1xufVxuXG4vKipcbiAqIFvljp/liJk6IFNSUF0g6L+Z5Liq5Ye95pWw55qE5Y2V5LiA6IGM6LSj5piv77ya5L2c5Li65LiA5Liq6L+U5ZueIFByb21pc2Ug55qE4oCc6KeC5a+f5ZOo4oCd77yMXG4gKiDlroPlj6rotJ/otKPigJznrYnlvoVNVlXliJvkuJblrozmiJDigJ3ov5nkuIDku7bkuovjgILmiJDlip/liJkgcmVzb2x2ZSh0cnVlKe+8jOWksei0peaIlui2heaXtuWImSByZXNvbHZlKGZhbHNlKeOAglxuICog5omA5pyJ5ZCO57ut5pON5L2c77yI5aaC5rOo5YaM5LqL5Lu277yJ6YO95L2c5Li65oiQ5Yqf5ZCO55qE4oCc5Ymv5L2c55So4oCd5Zyo5YaF6YOo5omn6KGM44CCXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF93YWl0Rm9yTXZ1R2VuZXNpcygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgbG9nUHJvYmUoJ+OAkOWuieWFqOinguWvn+WTqOOAkeW3suS4iuWyl++8jOW8gOWni+aJp+ihjE1WVeWwsee7quajgOafpS4uLicsICdncm91cCcpO1xuXG4gIHRyeSB7XG4gICAgLy8gW+aOoumSiF0g6Zi25q615LiA77ya562J5b6FIE1WVSDmoYbmnrbmnKzouqvlh7rnjrBcbiAgICBhd2FpdCB3YWl0R2xvYmFsSW5pdGlhbGl6ZWQoJ012dScpO1xuICAgIGxvZ1Byb2JlKCfjgJDop4Llr5/lk6jjgJEo5o6i6ZKIKSDpmLbmrrXkuIDmiJDlip/vvJpNVlUg5qGG5p625bey5Yqg6L2944CCJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dQcm9iZShg44CQ6KeC5a+f5ZOo44CRKOaOoumSiCkg6Zi25q615LiA5aSx6LSlOiAke2V944CCYCwgJ3dhcm4nKTtcbiAgICBsb2dQcm9iZSgn44CQ5a6J5YWo6KeC5a+f5ZOo44CR5Lu75Yqh5aSx6LSl44CCJywgJ2dyb3VwRW5kJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gW+aOoumSiF0g6Zi25q615LqM77ya6L2u6K+i6KeC5a+f77yM562J5b6FIE1WVSDlsIbliJ3lp4vmlbDmja7lhpnlhaXmtojmga/mpbzlsYJcbiAgY29uc3QgV0FUQ0hFUl9USU1FT1VUID0gMTAwMDA7XG4gIGNvbnN0IFdBVENIRVJfSU5URVJWQUwgPSAyNTA7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gIGxldCBpc0dlbmVzaXNDb21wbGV0ZSA9IGZhbHNlO1xuXG4gIGxvZ1Byb2JlKCfjgJDop4Llr5/lk6jjgJEo5o6i6ZKIKSDpmLbmrrXkuozlvIDlp4vvvJrmraPlnKjkuKXlr4bnm5Hop4YgbWVzc2FnZV9pZDogMCDnmoTliJvkuJbmlbDmja4uLi4nKTtcbiAgd2hpbGUgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPCBXQVRDSEVSX1RJTUVPVVQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbXZ1RGF0YTogYW55ID0gYXdhaXQgTXZ1LmdldE12dURhdGEoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IDAgfSk7XG4gICAgICBpZiAobXZ1RGF0YSAmJiAobXZ1RGF0YS5zd2lwZXNfZGF0YSB8fCBtdnVEYXRhLnN0YXRfZGF0YSkpIHtcbiAgICAgICAgbG9nUHJvYmUoJ+OAkOinguWvn+WTqOOAkSjmjqLpkogpIOmYtuauteS6jOaIkOWKn++8muWcqOa2iOaBr+alvOWxguS4reehruiupOWIsOWIm+S4luaVsOaNru+8gScpO1xuICAgICAgICBpc0dlbmVzaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvKiDlnKhNVlXlkK/liqjliJ3mnJ/vvIzmn6Xor6LlpLHotKXmmK/mraPluLjnjrDosaHvvIzpnZnpu5jlpITnkIYgKi9cbiAgICB9XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIFdBVENIRVJfSU5URVJWQUwpKTtcbiAgfVxuXG4gIGlmICghaXNHZW5lc2lzQ29tcGxldGUpIHtcbiAgICBsb2dQcm9iZSgn44CQ6KeC5a+f5ZOo44CRKOaOoumSiCkg6Zi25q615LqM5aSx6LSl77ya6KeC5a+f6LaF5pe277yBJywgJ2Vycm9yJyk7XG4gICAgbG9nUHJvYmUoJ+OAkOWuieWFqOinguWvn+WTqOOAkeS7u+WKoeWksei0peOAgicsICdncm91cEVuZCcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFvmjqLpkohdIOmYtuauteS4ie+8muaJgOacieadoeS7tua7oei2s++8jOaJp+ihjOa/gOa0u+W6j+WIl1xuICBsb2dQcm9iZSgn44CQ6KeC5a+f5ZOo44CRKOaOoumSiCkg6Zi25q615LiJ5byA5aeL77ya5omn6KGMTVZV6ZuG5oiQ5r+A5rS75bqP5YiXLi4uJyk7XG4gIHRyeSB7XG4gICAgX3JlZ2lzdGVyTXZ1RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBpc012dUludGVncmF0aW9uQWN0aXZlID0gdHJ1ZTtcbiAgICBsb2dQcm9iZSgn44CQ6KeC5a+f5ZOo44CRKOaOoumSiCkg6Zi25q615LiJ5oiQ5Yqf77yaTVZV6ZuG5oiQ5bey5a6M5YWo5r+A5rS744CCJyk7XG4gICAgbG9nUHJvYmUoJ+OAkOWuieWFqOinguWvn+WTqOOAkeS7u+WKoeaIkOWKn+WujOaIkO+8gScsICdncm91cEVuZCcpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ1Byb2JlKGDjgJDop4Llr5/lk6jjgJEo5o6i6ZKIKSDpmLbmrrXkuInlpLHotKXvvJrmv4DmtLvluo/liJflj5HnlJ/mhI/lpJbltKnmuoM6ICR7ZXJyb3J9YCwgJ2Vycm9yJyk7XG4gICAgaXNNdnVJbnRlZ3JhdGlvbkFjdGl2ZSA9IGZhbHNlO1xuICAgIGxvZ1Byb2JlKCfjgJDlronlhajop4Llr5/lk6jjgJHku7vliqHlpLHotKXjgIInLCAnZ3JvdXBFbmQnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuJCgoKSA9PiB7XG4gIGxvZ1Byb2JlKCfpn7PkuZDmkq3mlL7lmajohJrmnKwgVjguNCDigJzkuIrkuIvmlofmhJ/nn6XigJ0g5ZCv5YqoJyk7XG4gIFBsYXliYWNrRW5naW5lLmluaXRpYWxpemUoKTtcbiAgc2V0dXBHbG9iYWxBUEkoKTtcblxuICBldmVudE9uKHRhdmVybl9ldmVudHMuQ0hBVF9DSEFOR0VELCAoKSA9PiB7XG4gICAgbG9nUHJvYmUoYFvnoazph43nva5dIENIQVRfQ0hBTkdFRCDkuovku7bop6blj5HvvIzmo4DmtYvliLDogYrlpKnkuIrkuIvmloflj5jmm7TjgILljbPlsIbmiafooYzigJzkvJjpm4XlgZzmnLrigJ3ljY/orq7jgIJgLCAnd2FybicpO1xuICAgIGV4ZWN1dGVIYXJkUmVzZXQoKTtcbiAgfSk7XG5cbiAgY29uc3Qgb2JzZXJ2ZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICB2b2lkIHRyeUluaXRpYWxpemUoKTtcbiAgICBpZiAoaXNJbml0aWFsaXplZEZvclRoaXNDaGF0KSB7XG4gICAgICBjbGVhckludGVydmFsKG9ic2VydmVySW50ZXJ2YWwpO1xuICAgICAgbG9nUHJvYmUoJ+OAkOinguWvn+iAheaooeWei+OAkeWIneWni+WMluaIkOWKn++8jOinguWvn+iAheW3sumUgOavgeOAgicpO1xuICAgIH1cbiAgfSwgMjUwKTtcblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAoIWlzSW5pdGlhbGl6ZWRGb3JUaGlzQ2hhdCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChvYnNlcnZlckludGVydmFsKTtcbiAgICAgIGxvZ1Byb2JlKCfjgJDop4Llr5/ogIXmqKHlnovjgJHliJ3lp4vljJbotoXml7bvvIEnLCAnZXJyb3InKTtcblxuICAgICAgaWYgKF9pbml0aWFsaXphdGlvblByb21pc2VDb250cm9scykge1xuICAgICAgICBfaW5pdGlhbGl6YXRpb25Qcm9taXNlQ29udHJvbHMucmVqZWN0KCdJbml0aWFsaXphdGlvbiB0aW1lZCBvdXQgYWZ0ZXIgMTAgc2Vjb25kcy4nKTtcbiAgICAgICAgX2luaXRpYWxpemF0aW9uUHJvbWlzZUNvbnRyb2xzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIDEwMDAwKTtcblxuICAkKHdpbmRvdykub24oJ3BhZ2VoaWRlJywgKCkgPT4ge1xuICAgIGxvZ1Byb2JlKCdQQUdFSElERSDkuovku7bop6blj5HvvIEnLCAnd2FybicpO1xuXG4gICAgUGxheWJhY2tFbmdpbmUuZ2V0QWN0aXZlUGxheWVyKCk/LnBhdXNlKCk7XG4gICAgbG9nUHJvYmUoJ+mfs+mikeW3suaaguWBnOOAgicpO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/musicplayer/index.ts\n\n}");
  },
  zod: 
  /*!********************!*\
  !*** external "z" ***!
  \********************/ module => {
    module.exports = z;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.n = module => {
    var getter = module && module.__esModule ? () => module["default"] : () => module;
    __webpack_require__.d(getter, {
      a: getter
    });
    return getter;
  };
})();

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/musicplayer/index.ts");

const __webpack_exports__ZodPersistedState = __webpack_exports__.ZodPersistedState;

const __webpack_exports__ZodPlaylistConfig = __webpack_exports__.ZodPlaylistConfig;

const __webpack_exports__ZodQueueItemState = __webpack_exports__.ZodQueueItemState;

const __webpack_exports__ZodSingleCondition = __webpack_exports__.ZodSingleCondition;

const __webpack_exports__ZodTrackConfig = __webpack_exports__.ZodTrackConfig;

const __webpack_exports__ZodTriggerConfig = __webpack_exports__.ZodTriggerConfig;

const __webpack_exports__ZodWorldbookConfig = __webpack_exports__.ZodWorldbookConfig;

export { __webpack_exports__ZodPersistedState as ZodPersistedState, __webpack_exports__ZodPlaylistConfig as ZodPlaylistConfig, __webpack_exports__ZodQueueItemState as ZodQueueItemState, __webpack_exports__ZodSingleCondition as ZodSingleCondition, __webpack_exports__ZodTrackConfig as ZodTrackConfig, __webpack_exports__ZodTriggerConfig as ZodTriggerConfig, __webpack_exports__ZodWorldbookConfig as ZodWorldbookConfig };